(function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.i=function(n){return n},t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=129)})([function(n,t,i){"use strict";i.d(t,"i",function(){return r});i.d(t,"j",function(){return u});i.d(t,"l",function(){return f});i.d(t,"k",function(){return e});i.d(t,"h",function(){return o});i.d(t,"b",function(){return s});i.d(t,"m",function(){return h});i.d(t,"n",function(){return c});i.d(t,"o",function(){return l});i.d(t,"c",function(){return a});i.d(t,"d",function(){return v});i.d(t,"a",function(){return y});i.d(t,"g",function(){return p});i.d(t,"f",function(){return w});i.d(t,"e",function(){return b});var r=1,u=2,f=4,e=5,o=484813681109536e-20,s=Math.PI/2,h=.16666666666666666,c=.047222222222222221,l=.022156084656084655,a=1e-10,v=.017453292519943295,y=57.295779513082323,p=Math.PI/4,w=Math.PI*2,b=3.14159265359},function(n,t,i){"use strict";var r=i(0),u=i(6);t.a=function(n){return Math.abs(n)<=r.e?n:n-i.i(u.a)(n)*r.f}},function(n,t){"use strict";t.a=function(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}},function(n,t){"use strict";t.a=function(n,t,i){var r=n*t;return i/Math.sqrt(1-r*r)}},function(n,t){
/* @preserve
 * Leaflet 1.3.4, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2018 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
(function(n,i){i(t)})(this,function(n){"use strict";function s(n){for(var i,r,t=1,u=arguments.length;t<u;t++){r=arguments[t];for(i in r)n[i]=r[i]}return n}function c(n,t){var i=Array.prototype.slice,r;return n.bind?n.bind.apply(n,i.call(arguments,1)):(r=i.call(arguments,2),function(){return n.apply(t,r.length?r.concat(i.call(arguments)):arguments)})}function o(n){return n._leaflet_id=n._leaflet_id||++hf,n._leaflet_id}function cf(n,t,i){var u,r,f,e;return e=function(){u=!1;r&&(f.apply(i,r),r=!1)},f=function(){u?r=arguments:(n.apply(i,arguments),setTimeout(e,t),u=!0)}}function ar(n,t,i){var f=t[1],r=t[0],u=f-r;return n===f&&i?n:((n-r)%u+u)%u+r}function d(){return!1}function vt(n,t){var i=Math.pow(10,t===undefined?6:t);return Math.round(n*i)/i}function lf(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function wi(n){return lf(n).split(/\s+/)}function l(n,t){n.hasOwnProperty("options")||(n.options=n.options?lr(n.options):{});for(var i in t)n.options[i]=t[i];return n.options}function fs(n,t,i){var u=[];for(var r in n)u.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(n[r]));return(!t||t.indexOf("?")===-1?"?":"&")+u.join("&")}function os(n,t){return n.replace(es,function(n,i){var r=t[i];if(r===undefined)throw new Error("No value provided for variable "+n);else typeof r=="function"&&(r=r(t));return r})}function ss(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1}function af(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}function hs(n){var t=+new Date,i=Math.max(0,16-(t-vf));return vf=t+i,window.setTimeout(n,i)}function g(n,t,i){if(i&&su===hs)n.call(t);else return su.call(window,c(n,t))}function nt(n){n&&yf.call(window,n)}function gt(){}function vc(n){if(typeof L!="undefined"&&L&&L.Mixin){n=ht(n)?n:[n];for(var t=0;t<n.length;t++)n[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function t(n,t,i){this.x=i?Math.round(n):n;this.y=i?Math.round(t):t}function u(n,i,r){return n instanceof t?n:ht(n)?new t(n[0],n[1]):n===undefined||n===null?n:typeof n=="object"&&"x"in n&&"y"in n?new t(n.x,n.y):new t(n,i,r)}function v(n,t){var r,i,u;if(n)for(r=t?[n,t]:n,i=0,u=r.length;i<u;i++)this.extend(r[i])}function yt(n,t){return!n||n instanceof v?n:new v(n,t)}function it(n,t){var r,i,u;if(n)for(r=t?[n,t]:n,i=0,u=r.length;i<u;i++)this.extend(r[i])}function k(n,t){return n instanceof it?n:new it(n,t)}function h(n,t,i){if(isNaN(n)||isNaN(t))throw new Error("Invalid LatLng object: ("+n+", "+t+")");this.lat=+n;this.lng=+t;i!==undefined&&(this.alt=+i)}function y(n,t,i){return n instanceof h?n:ht(n)&&typeof n[0]!="object"?n.length===3?new h(n[0],n[1],n[2]):n.length===2?new h(n[0],n[1]):null:n===undefined||n===null?n:typeof n=="object"&&"lat"in n?new h(n.lat,"lng"in n?n.lng:n.lon,n.alt):t===undefined?null:new h(n,t,i)}function bf(n,t,i,r){if(ht(n)){this._a=n[0];this._b=n[1];this._c=n[2];this._d=n[3];return}this._a=n;this._b=t;this._c=i;this._d=r}function yr(n,t,i,r){return new bf(n,t,i,r)}function as(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function vs(n,t){for(var u="",i,s,f,e,r=0,o=n.length;r<o;r++){for(f=n[r],i=0,s=f.length;i<s;i++)e=f[i],u+=(i?"L":"M")+e.x+" "+e.y;u+=t?lu?"z":"x":""}return u||"M0 0"}function wt(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}function gc(n,t,i,r){return t==="touchstart"?tl(n,i,r):t==="touchmove"?ul(n,i,r):t==="touchend"&&fl(n,i,r),this}function nl(n,t,i){var r=n["_leaflet_"+t+i];return t==="touchstart"?n.removeEventListener(re,r,!1):t==="touchmove"?n.removeEventListener(ue,r,!1):t==="touchend"&&(n.removeEventListener(fe,r,!1),n.removeEventListener(ee,r,!1)),this}function tl(n,t,i){var r=c(function(n){if(n.pointerType!=="mouse"&&n.MSPOINTER_TYPE_MOUSE&&n.pointerType!==n.MSPOINTER_TYPE_MOUSE)if(dc.indexOf(n.target.tagName)<0)ot(n);else return;se(n,t)});n["_leaflet_touchstart"+i]=r;n.addEventListener(re,r,!1);th||(document.documentElement.addEventListener(re,il,!0),document.documentElement.addEventListener(ue,rl,!0),document.documentElement.addEventListener(fe,ih,!0),document.documentElement.addEventListener(ee,ih,!0),th=!0)}function il(n){nr[n.pointerId]=n;oe++}function rl(n){nr[n.pointerId]&&(nr[n.pointerId]=n)}function ih(n){delete nr[n.pointerId];oe--}function se(n,t){n.touches=[];for(var i in nr)n.touches.push(nr[i]);n.changedTouches=[n];t(n)}function ul(n,t,i){var r=function(n){(n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!=="mouse"||n.buttons!==0)&&se(n,t)};n["_leaflet_touchmove"+i]=r;n.addEventListener(ue,r,!1)}function fl(n,t,i){var r=function(n){se(n,t)};n["_leaflet_touchend"+i]=r;n.addEventListener(fe,r,!1);n.addEventListener(ee,r,!1)}function rh(n,t,i){function e(n){var i,t,e;if(ct){if(!pr||n.pointerType==="mouse")return;i=oe}else i=n.touches.length;i>1||(t=Date.now(),e=t-(u||t),r=n.touches?n.touches[0]:n,f=e>0&&e<=s,u=t)}function o(n){if(f&&!r.cancelBubble){if(ct){if(!pr||n.pointerType==="mouse")return;var e={},i;for(var o in r)i=r[o],e[o]=i&&i.bind?i.bind(r):i;r=e}r.type="dblclick";t(r);u=null}}var u,r,f=!1,s=250;return n[tr+vu+i]=e,n[tr+yu+i]=o,n[tr+"dblclick"+i]=t,n.addEventListener(vu,e,!1),n.addEventListener(yu,o,!1),n.addEventListener("dblclick",t,!1),this}function uh(n,t){var i=n[tr+vu+t],r=n[tr+yu+t],u=n[tr+"dblclick"+t];return n.removeEventListener(vu,i,!1),n.removeEventListener(yu,r,!1),pr||n.removeEventListener("dblclick",u,!1),this}function eh(n){return typeof n=="string"?document.getElementById(n):n}function dr(n,t){var i=n.style[t]||n.currentStyle&&n.currentStyle[t],r;return(!i||i==="auto")&&document.defaultView&&(r=document.defaultView.getComputedStyle(n,null),i=r?r[t]:null),i==="auto"?null:i}function e(n,t,i){var r=document.createElement(n);return r.className=t||"",i&&i.appendChild(r),r}function a(n){var t=n.parentNode;t&&t.removeChild(n)}function ce(n){while(n.firstChild)n.removeChild(n.firstChild)}function ir(n){var t=n.parentNode;t.lastChild!==n&&t.appendChild(n)}function rr(n){var t=n.parentNode;t.firstChild!==n&&t.insertBefore(n,t.firstChild)}function le(n,t){if(n.classList!==undefined)return n.classList.contains(t);var i=pu(n);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function i(n,t){var r,i,f,u;if(n.classList!==undefined)for(r=wi(t),i=0,f=r.length;i<f;i++)n.classList.add(r[i]);else le(n,t)||(u=pu(n),ae(n,(u?u+" ":"")+t))}function p(n,t){n.classList!==undefined?n.classList.remove(t):ae(n,lf((" "+pu(n)+" ").replace(" "+t+" "," ")))}function ae(n,t){n.className.baseVal===undefined?n.className=t:n.className.baseVal=t}function pu(n){return n.className.baseVal===undefined?n.className:n.className.baseVal}function ft(n,t){"opacity"in n.style?n.style.opacity=t:"filter"in n.style&&el(n,t)}function el(n,t){var i=!1,r="DXImageTransform.Microsoft.Alpha";try{i=n.filters.item(r)}catch(u){if(t===1)return}t=Math.round(t*100);i?(i.Enabled=t!==100,i.Opacity=t):n.style.filter+=" progid:"+r+"(opacity="+t+")"}function wu(n){for(var i=document.documentElement.style,t=0;t<n.length;t++)if(n[t]in i)return n[t];return!1}function si(n,i,r){var u=i||new t(0,0);n.style[he]=(te?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(r?" scale("+r+")":"")}function b(n,t){n._leaflet_pos=t;ut?si(n,t):(n.style.left=t.x+"px",n.style.top=t.y+"px")}function oi(n){return n._leaflet_pos||new t(0,0)}function ye(){r(window,"dragstart",ot)}function pe(){w(window,"dragstart",ot)}function be(n){while(n.tabIndex===-1)n=n.parentNode;n.style&&(ku(),bu=n,we=n.style.outline,n.style.outline="none",r(window,"keydown",ku))}function ku(){bu&&(bu.style.outline=we,bu=undefined,we=undefined,w(window,"keydown",ku))}function oh(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function ke(n){var t=n.getBoundingClientRect();return{x:t.width/n.offsetWidth||1,y:t.height/n.offsetHeight||1,boundingClientRect:t}}function r(n,t,i,r){var f,u,e;if(typeof t=="object")for(f in t)du(n,f,t[f],i);else for(t=wi(t),u=0,e=t.length;u<e;u++)du(n,t[u],i,r);return this}function w(n,t,i,r){var f,u,o,e;if(typeof t=="object")for(f in t)de(n,f,t[f],i);else if(t)for(t=wi(t),u=0,o=t.length;u<o;u++)de(n,t[u],i,r);else{for(e in n[et])de(n,e,n[et][e]);delete n[et]}return this}function du(n,t,i,r){var f=t+o(i)+(r?"_"+o(r):""),u,e;if(n[et]&&n[et][f])return this;u=function(t){return i.call(r||n,t||window.event)};e=u;ct&&t.indexOf("touch")===0?gc(n,t,u,f):!pt||t!=="dblclick"||!rh||ct&&br?"addEventListener"in n?t==="mousewheel"?n.addEventListener("onwheel"in n?"wheel":"mousewheel",u,!1):t==="mouseenter"||t==="mouseleave"?(u=function(t){t=t||window.event;nf(n,t)&&e(t)},n.addEventListener(t==="mouseenter"?"mouseover":"mouseout",u,!1)):(t==="click"&&di&&(u=function(n){ol(n,e)}),n.addEventListener(t,u,!1)):"attachEvent"in n&&n.attachEvent("on"+t,u):rh(n,u,f);n[et]=n[et]||{};n[et][f]=u}function de(n,t,i,r){var u=t+o(i)+(r?"_"+o(r):""),f=n[et]&&n[et][u];if(!f)return this;ct&&t.indexOf("touch")===0?nl(n,t,u):!pt||t!=="dblclick"||!uh||ct&&br?"removeEventListener"in n?t==="mousewheel"?n.removeEventListener("onwheel"in n?"wheel":"mousewheel",f,!1):n.removeEventListener(t==="mouseenter"?"mouseover":t==="mouseleave"?"mouseout":t,f,!1):"detachEvent"in n&&n.detachEvent("on"+t,f):uh(n,u);n[et][u]=null}function hi(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,to(n),this}function ge(n){return du(n,"mousewheel",hi),this}function tu(n){return r(n,"mousedown touchstart dblclick",hi),du(n,"click",no),this}function ot(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function bt(n){return ot(n),hi(n),this}function hh(n,i){if(!i)return new t(n.clientX,n.clientY);var r=ke(i),u=r.boundingClientRect;return new t((n.clientX-u.left)/r.x-i.clientLeft,(n.clientY-u.top)/r.y-i.clientTop)}function lh(n){return pr?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/ch:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function no(n){gu[n.type]=!0}function to(n){var t=gu[n.type];return gu[n.type]=!1,t}function nf(n,t){var i=t.relatedTarget;if(!i)return!0;try{while(i&&i!==n)i=i.parentNode}catch(r){return!1}return i!==n}function ol(n,t){var r=n.timeStamp||n.originalEvent&&n.originalEvent.timeStamp,i=io&&r-io;if(i&&i>100&&i<500||n.target._simulatedClick&&!n._simulated){bt(n);return}io=r;t(n)}function hl(n,t){return new f(n,t)}function kh(n,t){if(!t||!n.length)return n.slice();var i=t*t;return n=wl(n,i),pl(n,i)}function dh(n,t,i){return Math.sqrt(iu(n,t,i,!0))}function yl(n,t,i){return iu(n,t,i)}function pl(n,t){var r=n.length,e=typeof Uint8Array!=undefined+""?Uint8Array:Array,u=new e(r),i,f;for(u[0]=u[r-1]=1,eo(n,u,t,0,r-1),f=[],i=0;i<r;i++)u[i]&&f.push(n[i]);return f}function eo(n,t,i,r,u){for(var o=0,e,s,f=r+1;f<=u-1;f++)s=iu(n[f],n[r],n[u],!0),s>o&&(e=f,o=s);o>i&&(t[e]=1,eo(n,t,i,r,e),eo(n,t,i,e,u))}function wl(n,t){for(var r=[n[0]],i=1,u=0,f=n.length;i<f;i++)bl(n[i],n[u])>t&&(r.push(n[i]),u=i);return u<f-1&&r.push(n[f-1]),r}function nc(n,t,i,r,u){var f=r?gh:li(n,i),e=li(t,i),s,o,h;for(gh=e;;){if(!(f|e))return[n,t];if(f&e)return!1;s=f||e;o=tf(n,t,s,i,u);h=li(o,i);s===f?(n=o,f=h):(t=o,e=h)}}function tf(n,i,r,u,f){var s=i.x-n.x,h=i.y-n.y,c=u.min,l=u.max,e,o;return r&8?(e=n.x+s*(l.y-n.y)/h,o=l.y):r&4?(e=n.x+s*(c.y-n.y)/h,o=c.y):r&2?(e=l.x,o=n.y+h*(l.x-n.x)/s):r&1&&(e=c.x,o=n.y+h*(c.x-n.x)/s),new t(e,o,f)}function li(n,t){var i=0;return n.x<t.min.x?i|=1:n.x>t.max.x&&(i|=2),n.y<t.min.y?i|=4:n.y>t.max.y&&(i|=8),i}function bl(n,t){var i=t.x-n.x,r=t.y-n.y;return i*i+r*r}function iu(n,i,r,u){var o=i.x,s=i.y,f=r.x-o,e=r.y-s,c=f*f+e*e,h;return c>0&&(h=((n.x-o)*f+(n.y-s)*e)/c,h>1?(o=r.x,s=r.y):h>0&&(o+=f*h,s+=e*h)),f=n.x-o,e=n.y-s,u?f*f+e*e:new t(o,s)}function ti(n){return!ht(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]!="undefined"}function tc(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ti(n)}function rc(n,t,i){for(var e,a=[1,4,2,8],l,c,o,s,f,u,r=0,h=n.length;r<h;r++)n[r]._code=li(n[r],t);for(c=0;c<4;c++){for(f=a[c],e=[],r=0,h=n.length,l=h-1;r<h;l=r++)o=n[r],s=n[l],o._code&f?s._code&f||(u=tf(s,o,f,t,i),u._code=li(u,t),e.push(u)):(s._code&f&&(u=tf(s,o,f,t,i),u._code=li(u,t),e.push(u)),e.push(o));n=e}return n}function ra(n){return new or(n)}function ua(n,t){return new uu(n,t)}function fa(n,t){return new fu(n,t)}function ea(n,t,i){return new rf(n,t,i)}function oa(n,t){return new kt(n,t)}function sa(n,t){return new vi(n,t)}function ho(n,t){var i=n.type==="Feature"?n.geometry:n,u=i?i.coordinates:null,e=[],o=t&&t.pointToLayer,s=t&&t.coordsToLatLng||co,f,h,r,c,l;if(!u&&!i)return null;switch(i.type){case"Point":return f=s(u),o?o(n,f):new uu(f);case"MultiPoint":for(r=0,c=u.length;r<c;r++)f=s(u[r]),e.push(o?o(n,f):new uu(f));return new ai(e);case"LineString":case"MultiLineString":return h=uf(u,i.type==="LineString"?0:1,s),new kt(h,t);case"Polygon":case"MultiPolygon":return h=uf(u,i.type==="Polygon"?1:2,s),new vi(h,t);case"GeometryCollection":for(r=0,c=i.geometries.length;r<c;r++)l=ho({geometry:i.geometries[r],type:"Feature",properties:n.properties},t),l&&e.push(l);return new ai(e);default:throw new Error("Invalid GeoJSON object.");}}function co(n){return new h(n[1],n[0],n[2])}function uf(n,t,i){for(var u=[],r=0,e=n.length,f;r<e;r++)f=t?uf(n[r],t-1,i):(i||co)(n[r]),u.push(f);return u}function lo(n,t){return t=typeof t=="number"?t:6,n.alt!==undefined?[vt(n.lng,t),vt(n.lat,t),vt(n.alt,t)]:[vt(n.lng,t),vt(n.lat,t)]}function ff(n,t,i,r){for(var u=[],f=0,e=n.length;f<e;f++)u.push(t?ff(n[f],t-1,i,r):lo(n[f],r));return!t&&i&&u.push(u[0]),u}function sr(n,t){return n.feature?s({},n.feature,{geometry:t}):ef(t)}function ef(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}function ec(n,t){return new dt(n,t)}function la(n,t,i){return new oc(n,t,i)}function va(n){return new vo(n)}function ya(n){return new cr(n)}function hc(n,t){return new pi(n,t)}function pa(n,t){return new yo(n,t)}function cc(n){return nh?new po(n):null}function lc(n){return lu||au?new ou(n):null}function ba(n,t){return new wo(n,t)}var us=Object.freeze,lr,hf,es,ht,vr,vf,su,yf,cs,tt,bi,pf,hu,ls,gr,nu,ve,ur,bu,we,sh,et,ch,gu,io,st,fr,ph,lt,gh,ic,rt,ii,fu,rf,kt,vi,dt,of,yi,sc,vo,cr,pi,yo,at,po,wo,bo,ko,go,ns,ts,is,rs,ac;Object.freeze=function(n){return n};lr=Object.create||function(){function n(){}return function(t){return n.prototype=t,new n}}();hf=0;es=/\{ *([\w_-]+) *\}/g;ht=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};vr="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";vf=0;su=window.requestAnimationFrame||af("RequestAnimationFrame")||hs;yf=window.cancelAnimationFrame||af("CancelAnimationFrame")||af("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};cs=(Object.freeze||Object)({freeze:us,extend:s,create:lr,bind:c,lastId:hf,stamp:o,throttle:cf,wrapNum:ar,falseFn:d,formatNum:vt,trim:lf,splitWords:wi,setOptions:l,getParamString:fs,template:os,isArray:ht,indexOf:ss,emptyImageUrl:vr,requestFn:su,cancelFn:yf,requestAnimFrame:g,cancelAnimFrame:nt});gt.extend=function(n){var i=function(){this.initialize&&this.initialize.apply(this,arguments);this.callInitHooks()},u=i.__super__=this.prototype,t=lr(u),r;t.constructor=i;i.prototype=t;for(r in this)this.hasOwnProperty(r)&&r!=="prototype"&&r!=="__super__"&&(i[r]=this[r]);return n.statics&&(s(i,n.statics),delete n.statics),n.includes&&(vc(n.includes),s.apply(null,[t].concat(n.includes)),delete n.includes),t.options&&(n.options=s(lr(t.options),n.options)),s(t,n),t._initHooks=[],t.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this);this._initHooksCalled=!0;for(var n=0,i=t._initHooks.length;n<i;n++)t._initHooks[n].call(this)}},i};gt.include=function(n){return s(this.prototype,n),this};gt.mergeOptions=function(n){return s(this.prototype.options,n),this};gt.addInitHook=function(n){var t=Array.prototype.slice.call(arguments,1),i=typeof n=="function"?n:function(){this[n].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};tt={on:function(n,t,i){var u,r,f;if(typeof n=="object")for(u in n)this._on(u,n[u],t);else for(n=wi(n),r=0,f=n.length;r<f;r++)this._on(n[r],t,i);return this},off:function(n,t,i){var u,r,f;if(n)if(typeof n=="object")for(u in n)this._off(u,n[u],t);else for(n=wi(n),r=0,f=n.length;r<f;r++)this._off(n[r],t,i);else delete this._events;return this},_on:function(n,t,i){var r,e,u,f,o;for(this._events=this._events||{},r=this._events[n],r||(r=[],this._events[n]=r),i===this&&(i=undefined),e={fn:t,ctx:i},u=r,f=0,o=u.length;f<o;f++)if(u[f].fn===t&&u[f].ctx===i)return;u.push(e)},_off:function(n,t,i){var r,u,f,e;if(this._events&&(r=this._events[n],r)){if(!t){for(u=0,f=r.length;u<f;u++)r[u].fn=d;delete this._events[n];return}if(i===this&&(i=undefined),r)for(u=0,f=r.length;u<f;u++)if((e=r[u],e.ctx===i)&&e.fn===t){e.fn=d;this._firingCount&&(this._events[n]=r=r.slice());r.splice(u,1);return}}},fire:function(n,t,i){var f,r,u,o,e;if(!this.listens(n,i))return this;if(f=s({},t,{type:n,target:this,sourceTarget:t&&t.sourceTarget||this}),this._events&&(r=this._events[n],r)){for(this._firingCount=this._firingCount+1||1,u=0,o=r.length;u<o;u++)e=r[u],e.fn.call(e.ctx||this,f);this._firingCount--}return i&&this._propagateEvent(f),this},listens:function(n,t){var i=this._events&&this._events[n],r;if(i&&i.length)return!0;if(t)for(r in this._eventParents)if(this._eventParents[r].listens(n,t))return!0;return!1},once:function(n,t,i){var r,u;if(typeof n=="object"){for(r in n)this.once(r,n[r],t);return this}u=c(function(){this.off(n,t,i).off(n,u,i)},this);return this.on(n,t,i).on(n,u,i)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[o(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[o(n)],this},_propagateEvent:function(n){for(var t in this._eventParents)this._eventParents[t].fire(n.type,s({layer:n.target,propagatedFrom:n.target},n),!0)}};tt.addEventListener=tt.on;tt.removeEventListener=tt.clearAllEventListeners=tt.off;tt.addOneTimeEventListener=tt.once;tt.fireEvent=tt.fire;tt.hasEventListeners=tt.listens;bi=gt.extend(tt);pf=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};t.prototype={clone:function(){return new t(this.x,this.y)},add:function(n){return this.clone()._add(u(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(u(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new t(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new t(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pf(this.x),this.y=pf(this.y),this},distanceTo:function(n){n=u(n);var t=n.x-this.x,i=n.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(n){return n=u(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=u(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+vt(this.x)+", "+vt(this.y)+")"}};v.prototype={extend:function(n){return n=u(n),this.min||this.max?(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=n.clone(),this.max=n.clone()),this},getCenter:function(n){return new t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new t(this.min.x,this.max.y)},getTopRight:function(){return new t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var i,r;return n=typeof n[0]=="number"||n instanceof t?u(n):yt(n),n instanceof v?(i=n.min,r=n.max):i=r=n,i.x>=this.min.x&&r.x<=this.max.x&&i.y>=this.min.y&&r.y<=this.max.y},intersects:function(n){n=yt(n);var t=this.min,i=this.max,r=n.min,u=n.max,f=u.x>=t.x&&r.x<=i.x,e=u.y>=t.y&&r.y<=i.y;return f&&e},overlaps:function(n){n=yt(n);var t=this.min,i=this.max,r=n.min,u=n.max,f=u.x>t.x&&r.x<i.x,e=u.y>t.y&&r.y<i.y;return f&&e},isValid:function(){return!!(this.min&&this.max)}};it.prototype={extend:function(n){var r=this._southWest,u=this._northEast,t,i;if(n instanceof h)t=n,i=n;else if(n instanceof it){if(t=n._southWest,i=n._northEast,!t||!i)return this}else return n?this.extend(y(n)||k(n)):this;return r||u?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),u.lat=Math.max(i.lat,u.lat),u.lng=Math.max(i.lng,u.lng)):(this._southWest=new h(t.lat,t.lng),this._northEast=new h(i.lat,i.lng)),this},pad:function(n){var t=this._southWest,i=this._northEast,r=Math.abs(t.lat-i.lat)*n,u=Math.abs(t.lng-i.lng)*n;return new it(new h(t.lat-r,t.lng-u),new h(i.lat+r,i.lng+u))},getCenter:function(){return new h((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new h(this.getNorth(),this.getWest())},getSouthEast:function(){return new h(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){n=typeof n[0]=="number"||n instanceof h||"lat"in n?y(n):k(n);var r=this._southWest,u=this._northEast,t,i;return n instanceof it?(t=n.getSouthWest(),i=n.getNorthEast()):t=i=n,t.lat>=r.lat&&i.lat<=u.lat&&t.lng>=r.lng&&i.lng<=u.lng},intersects:function(n){n=k(n);var t=this._southWest,i=this._northEast,r=n.getSouthWest(),u=n.getNorthEast(),f=u.lat>=t.lat&&r.lat<=i.lat,e=u.lng>=t.lng&&r.lng<=i.lng;return f&&e},overlaps:function(n){n=k(n);var t=this._southWest,i=this._northEast,r=n.getSouthWest(),u=n.getNorthEast(),f=u.lat>t.lat&&r.lat<i.lat,e=u.lng>t.lng&&r.lng<i.lng;return f&&e},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,t){return n?(n=k(n),this._southWest.equals(n.getSouthWest(),t)&&this._northEast.equals(n.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};h.prototype={equals:function(n,t){if(!n)return!1;n=y(n);var i=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return i<=(t===undefined?1e-9:t)},toString:function(n){return"LatLng("+vt(this.lat,n)+", "+vt(this.lng,n)+")"},distanceTo:function(n){return ui.distance(this,y(n))},wrap:function(){return ui.wrapLatLng(this)},toBounds:function(n){var t=180*n/40075017,i=t/Math.cos(Math.PI/180*this.lat);return k([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new h(this.lat,this.lng,this.alt)}};var ni={latLngToPoint:function(n,t){var i=this.projection.project(n),r=this.scale(t);return this.transformation._transform(i,r)},pointToLatLng:function(n,t){var i=this.scale(t),r=this.transformation.untransform(n,i);return this.projection.unproject(r)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(n),r=this.transformation.transform(t.min,i),u=this.transformation.transform(t.max,i);return new v(r,u)},infinite:!1,wrapLatLng:function(n){var t=this.wrapLng?ar(n.lng,this.wrapLng,!0):n.lng,i=this.wrapLat?ar(n.lat,this.wrapLat,!0):n.lat,r=n.alt;return new h(i,t,r)},wrapLatLngBounds:function(n){var t=n.getCenter(),u=this.wrapLatLng(t),i=t.lat-u.lat,r=t.lng-u.lng;if(i===0&&r===0)return n;var f=n.getSouthWest(),e=n.getNorthEast(),o=new h(f.lat-i,f.lng-r),s=new h(e.lat-i,e.lng-r);return new it(o,s)}},ui=s({},ni,{wrapLng:[-180,180],R:6371e3,distance:function(n,t){var i=Math.PI/180,e=n.lat*i,o=t.lat*i,r=Math.sin((t.lat-n.lat)*i/2),u=Math.sin((t.lng-n.lng)*i/2),f=r*r+Math.cos(e)*Math.cos(o)*u*u,s=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f));return this.R*s}}),wf={R:6378137,MAX_LATITUDE:85.0511287798,project:function(n){var i=Math.PI/180,r=this.MAX_LATITUDE,f=Math.max(Math.min(r,n.lat),-r),u=Math.sin(f*i);return new t(this.R*n.lng*i,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(n){var t=180/Math.PI;return new h((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*t,n.x*t/this.R)},bounds:function(){var n=6378137*Math.PI;return new v([-n,-n],[n,n])}()};bf.prototype={transform:function(n,t){return this._transform(n.clone(),t)},_transform:function(n,t){return t=t||1,n.x=t*(this._a*n.x+this._b),n.y=t*(this._c*n.y+this._d),n},untransform:function(n,i){return i=i||1,new t((n.x/i-this._b)/this._a,(n.y/i-this._d)/this._c)}};hu=s({},ui,{code:"EPSG:3857",projection:wf,transformation:function(){var n=.5/(Math.PI*wf.R);return yr(n,.5,-n,.5)}()});ls=s({},hu,{code:"EPSG:900913"});var kf=document.documentElement.style,cu="ActiveXObject"in window,ki=cu&&!document.addEventListener,pr="msLaunchUri"in navigator&&!("documentMode"in document),df=wt("webkit"),di=wt("android"),wr=wt("android 2")||wt("android 3"),yc=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ys=di&&wt("Google")&&yc<537&&!("AudioNode"in window),gf=!!window.opera,br=wt("chrome"),ne=wt("gecko")&&!df&&!gf&&!cu,ps=!br&&wt("safari"),ws=wt("phantom"),bs="OTransition"in kf,ks=navigator.platform.indexOf("Win")===0,te=cu&&"transition"in kf,ie="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wr,ds="MozPerspective"in kf,ut=!window.L_DISABLE_3D&&(te||ie||ds)&&!bs&&!ws,gi=typeof orientation!="undefined"||wt("mobile"),pc=gi&&df,wc=gi&&ie,fi=!window.PointerEvent&&window.MSPointerEvent,ct=!!(window.PointerEvent||fi),pt=!window.L_NO_TOUCH&&(ct||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),gs=gi&&gf,bc=gi&&ne,ei=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,nh=function(){return!!document.createElement("canvas").getContext}(),lu=!!(document.createElementNS&&as("svg").createSVGRect),au=!lu&&function(){var t,n;try{return t=document.createElement("div"),t.innerHTML='<v:shape adj="1"/>',n=t.firstChild,n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch(i){return!1}}();var kc=(Object.freeze||Object)({ie:cu,ielt9:ki,edge:pr,webkit:df,android:di,android23:wr,androidStock:ys,opera:gf,chrome:br,gecko:ne,safari:ps,phantom:ws,opera12:bs,win:ks,ie3d:te,webkit3d:ie,gecko3d:ds,any3d:ut,mobile:gi,mobileWebkit:pc,mobileWebkit3d:wc,msPointer:fi,pointer:ct,touch:pt,mobileOpera:gs,mobileGecko:bc,retina:ei,canvas:nh,svg:lu,vml:au}),re=fi?"MSPointerDown":"pointerdown",ue=fi?"MSPointerMove":"pointermove",fe=fi?"MSPointerUp":"pointerup",ee=fi?"MSPointerCancel":"pointercancel",dc=["INPUT","SELECT","OPTION"],nr={},th=!1,oe=0;var vu=fi?"MSPointerDown":ct?"pointerdown":"touchstart",yu=fi?"MSPointerUp":ct?"pointerup":"touchend",tr="_leaflet_";var he=wu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kr=wu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fh=kr==="webkitTransition"||kr==="OTransition"?kr+"End":"transitionend";"onselectstart"in document?(gr=function(){r(window,"selectstart",ot)},nu=function(){w(window,"selectstart",ot)}):(ur=wu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),gr=function(){if(ur){var n=document.documentElement.style;ve=n[ur];n[ur]="none"}},nu=function(){ur&&(document.documentElement.style[ur]=ve,ve=undefined)});sh=(Object.freeze||Object)({TRANSFORM:he,TRANSITION:kr,TRANSITION_END:fh,get:eh,getStyle:dr,create:e,remove:a,empty:ce,toFront:ir,toBack:rr,hasClass:le,addClass:i,removeClass:p,setClass:ae,getClass:pu,setOpacity:ft,testProp:wu,setTransform:si,setPosition:b,getPosition:oi,disableTextSelection:gr,enableTextSelection:nu,disableImageDrag:ye,enableImageDrag:pe,preventOutline:be,restoreOutline:ku,getSizedParentNode:oh,getScale:ke});et="_leaflet_events";ch=ks&&br?2*window.devicePixelRatio:ne?window.devicePixelRatio:1;gu={};var sl=(Object.freeze||Object)({on:r,off:w,stopPropagation:hi,disableScrollPropagation:ge,disableClickPropagation:tu,preventDefault:ot,stop:bt,getMousePosition:hh,getWheelDelta:lh,fakeStop:no,skipped:to,isExternalTarget:nf,addListener:r,removeListener:w}),ah=bi.extend({run:function(n,t,i,r){this.stop();this._el=n;this._inProgress=!0;this._duration=i||.25;this._easeOutPower=1/Math.max(r||.5,.2);this._startPos=oi(n);this._offset=t.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=g(this._animate,this);this._step()},_step:function(n){var t=+new Date-this._startTime,i=this._duration*1e3;t<i?this._runFrame(this._easeOut(t/i),n):(this._runFrame(1),this._complete())},_runFrame:function(n,t){var i=this._startPos.add(this._offset.multiplyBy(n));t&&i._round();b(this._el,i);this.fire("step")},_complete:function(){nt(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),f=bi.extend({options:{crs:hu,center:undefined,zoom:undefined,minZoom:undefined,maxZoom:undefined,layers:[],maxBounds:undefined,renderer:undefined,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,t){t=l(this,t);this._initContainer(n);this._initLayout();this._onResize=c(this._onResize,this);this._initEvents();t.maxBounds&&this.setMaxBounds(t.maxBounds);t.zoom!==undefined&&(this._zoom=this._limitZoom(t.zoom));t.center&&t.zoom!==undefined&&this.setView(y(t.center),t.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=!0;this.callInitHooks();this._zoomAnimated=kr&&ut&&!gs&&this.options.zoomAnimation;this._zoomAnimated&&(this._createAnimProxy(),r(this._proxy,fh,this._catchTransitionEnd,this));this._addLayers(this.options.layers)},setView:function(n,t,i){if(t=t===undefined?this._zoom:this._limitZoom(t),n=this._limitCenter(y(n),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==undefined&&(i.zoom=s({animate:i.animate},i.zoom),i.pan=s({animate:i.animate,duration:i.duration},i.pan));var r=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,t,i.zoom):this._tryAnimatedPan(n,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(n,t),this},setZoom:function(n,t){return this._loaded?this.setView(this.getCenter(),n,{zoom:t}):(this._zoom=n,this)},zoomIn:function(n,t){return n=n||(ut?this.options.zoomDelta:1),this.setZoom(this._zoom+n,t)},zoomOut:function(n,t){return n=n||(ut?this.options.zoomDelta:1),this.setZoom(this._zoom-n,t)},setZoomAround:function(n,i,r){var f=this.getZoomScale(i),u=this.getSize().divideBy(2),e=n instanceof t?n:this.latLngToContainerPoint(n),o=e.subtract(u).multiplyBy(1-1/f),s=this.containerPointToLatLng(u.add(o));return this.setView(s,i,{zoom:r})},_getBoundsCenterZoom:function(n,t){t=t||{};n=n.getBounds?n.getBounds():k(n);var r=u(t.paddingTopLeft||t.padding||[0,0]),f=u(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(n,!1,r.add(f));if(i=typeof t.maxZoom=="number"?Math.min(t.maxZoom,i):i,i===Infinity)return{center:n.getCenter(),zoom:i};var e=f.subtract(r).divideBy(2),o=this.project(n.getSouthWest(),i),s=this.project(n.getNorthEast(),i),h=this.unproject(o.add(s).divideBy(2).add(e),i);return{center:h,zoom:i}},fitBounds:function(n,t){if(n=k(n),!n.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(n,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,t){return this.setView(n,this._zoom,{pan:t})},panBy:function(n,t){if(n=u(n).round(),t=t||{},!n.x&&!n.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(!this._panAnim){this._panAnim=new ah;this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(t.noMoveStart||this.fire("movestart"),t.animate!==!1){i(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,r,t.duration||.25,t.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,t,i){function p(n){var u=n?-1:1,f=n?l:r,e=l*l-r*r+u*s*s*o*o,h=2*f*s*o,t=e/h,i=Math.sqrt(t*t+1)-t;return i<1e-9?-18:Math.log(i)}function w(n){return(Math.exp(n)-Math.exp(-n))/2}function h(n){return(Math.exp(n)+Math.exp(-n))/2}function d(n){return w(n)/h(n)}function nt(n){return r*(h(u)/h(u+f*n))}function tt(n){return r*(h(u)*d(u+f*n)-w(u))/s}function it(n){return 1-Math.pow(1-n,1.5)}function k(){var i=(Date.now()-rt)/ft,u=it(i)*b;i<=1?(this._flyToFrame=g(k,this),this._move(this.unproject(c.add(a.subtract(c).multiplyBy(tt(u)/o)),e),this.getScaleZoom(r/nt(u),e),{flyTo:!0})):this._move(n,t)._moveEnd(!0)}var u;if(i=i||{},i.animate===!1||!ut)return this.setView(n,t,i);this._stop();var c=this.project(this.getCenter()),a=this.project(n),v=this.getSize(),e=this._zoom;n=y(n);t=t===undefined?e:t;var r=Math.max(v.x,v.y),l=r*this.getZoomScale(e,t),o=a.distanceTo(c)||1,f=1.42,s=f*f;u=p(0);var rt=Date.now(),b=(p(1)-u)/f,ft=i.duration?1e3*i.duration:1e3*b*.8;return this._moveStart(!0,i.noMoveStart),k.call(this),this},flyToBounds:function(n,t){var i=this._getBoundsCenterZoom(n,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(n){if(n=k(n),n.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);this.options.maxBounds=n;this._loaded&&this._panInsideMaxBounds();return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(n){var t=this.options.minZoom;return(this.options.minZoom=n,this._loaded&&t!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom))?this.setZoom(n):this},setMaxZoom:function(n){var t=this.options.maxZoom;return(this.options.maxZoom=n,this._loaded&&t!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom))?this.setZoom(n):this},panInsideBounds:function(n,t){this._enforcingBounds=!0;var i=this.getCenter(),r=this._limitCenter(i,this._zoom,k(n));return i.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},invalidateSize:function(n){var i;if(!this._loaded)return this;n=s({animate:!1,pan:!0},n===!0?{animate:!0}:n);i=this.getSize();this._sizeChanged=!0;this._lastCenter=null;var r=this.getSize(),u=i.divideBy(2).round(),f=r.divideBy(2).round(),t=u.subtract(f);return!t.x&&!t.y?this:(n.animate&&n.pan?this.panBy(t):(n.pan&&this._rawPanBy(t),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=s({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=c(this._handleGeolocationResponse,this),i=c(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,n):navigator.geolocation.getCurrentPosition(t,i,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var t=n.code,i=n.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(n){var o=n.coords.latitude,s=n.coords.longitude,i=new h(o,s),e=i.toBounds(n.coords.accuracy*2),r=this._locateOptions,u,f,t;r.setView&&(u=this.getBoundsZoom(e),this.setView(i,r.maxZoom?Math.min(u,r.maxZoom):u));f={latlng:i,bounds:e,timestamp:n.timestamp};for(t in n.coords)typeof n.coords[t]=="number"&&(f[t]=n.coords[t]);this.fire("locationfound",f)},addHandler:function(n,t){if(!t)return this;var i=this[n]=new t(this);return this._handlers.push(i),this.options[n]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id;delete this._containerId}catch(t){this._container._leaflet_id=undefined;this._containerId=undefined}this._locationWatchId!==undefined&&this.stopLocate();this._stop();a(this._mapPane);this._clearControlPos&&this._clearControlPos();this._resizeRequest&&(nt(this._resizeRequest),this._resizeRequest=null);this._clearHandlers();this._loaded&&this.fire("unload");for(var n in this._layers)this._layers[n].remove();for(n in this._panes)a(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,t){var r="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),i=e("div",r,t||this._mapPane);return n&&(this._panes[n]=i),i},getCenter:function(){return(this._checkIfLoaded(),this._lastCenter&&!this._moved())?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),t=this.unproject(n.getBottomLeft()),i=this.unproject(n.getTopRight());return new it(t,i)},getMinZoom:function(){return this.options.minZoom===undefined?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===undefined?this._layersMaxZoom===undefined?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,t,i){n=k(n);i=u(i||[0,0]);var r=this.getZoom()||0,c=this.getMinZoom(),l=this.getMaxZoom(),a=n.getNorthWest(),v=n.getSouthEast(),e=this.getSize().subtract(i),o=yt(this.project(v,r),this.project(a,r)).getSize(),f=ut?this.options.zoomSnap:1,s=e.x/o.x,h=e.y/o.y,y=t?Math.max(s,h):Math.min(s,h);return r=this.getScaleZoom(y,r),f&&(r=Math.round(r/(f/100))*(f/100),r=t?Math.ceil(r/f)*f:Math.floor(r/f)*f),Math.max(c,Math.min(l,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new t(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,t){var i=this._getTopLeftPoint(n,t);return new v(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===undefined?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,t){var i=this.options.crs;return t=t===undefined?this._zoom:t,i.scale(n)/i.scale(t)},getScaleZoom:function(n,t){var r=this.options.crs,i;return t=t===undefined?this._zoom:t,i=r.zoom(n*r.scale(t)),isNaN(i)?Infinity:i},project:function(n,t){return t=t===undefined?this._zoom:t,this.options.crs.latLngToPoint(y(n),t)},unproject:function(n,t){return t=t===undefined?this._zoom:t,this.options.crs.pointToLatLng(u(n),t)},layerPointToLatLng:function(n){var t=u(n).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(n){var t=this.project(y(n))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(y(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(k(n))},distance:function(n,t){return this.options.crs.distance(y(n),y(t))},containerPointToLayerPoint:function(n){return u(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return u(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var t=this.containerPointToLayerPoint(u(n));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(y(n)))},mouseEventToContainerPoint:function(n){return hh(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var t=this._container=eh(n);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.");}else throw new Error("Map container not found.");r(t,"scroll",this._onScroll,this);this._containerId=o(t)},_initLayout:function(){var t=this._container,n;this._fadeAnimated=this.options.fadeAnimation&&ut;i(t,"leaflet-container"+(pt?" leaflet-touch":"")+(ei?" leaflet-retina":"")+(ki?" leaflet-oldie":"")+(ps?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));n=dr(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&(t.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);b(this._mapPane,new t(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");this.createPane("popupPane");this.options.markerZoomAnimation||(i(n.markerPane,"leaflet-zoom-hide"),i(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,i){var u,r;b(this._mapPane,new t(0,0));u=!this._loaded;this._loaded=!0;i=this._limitZoom(i);this.fire("viewprereset");r=this._zoom!==i;this._moveStart(r,!1)._move(n,i)._moveEnd(r);this.fire("viewreset");u&&this.fire("load")},_moveStart:function(n,t){return n&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(n,t,i){t===undefined&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),(r||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return nt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){b(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.");},_initEvents:function(n){this._targets={};this._targets[o(this._container)]=this;var t=n?w:r;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this);this.options.trackResize&&t(window,"resize",this._onResize,this);ut&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){nt(this._resizeRequest);this._resizeRequest=g(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,t){for(var u=[],r,f=t==="mouseout"||t==="mouseover",i=n.target||n.srcElement,e=!1;i;){if(r=this._targets[o(i)],r&&(t==="click"||t==="preclick")&&!n._simulated&&this._draggableMoved(r)){e=!0;break}if(r&&r.listens(t,!0)){if(f&&!nf(i,n))break;if(u.push(r),f)break}if(i===this._container)break;i=i.parentNode}return u.length||e||f||!nf(i,n)||(u=[this]),u},_handleDOMEvent:function(n){if(this._loaded&&!to(n)){var t=n.type;(t==="mousedown"||t==="keypress")&&be(n.target||n.srcElement);this._fireDOMEvent(n,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,t,i){var e,u,r,o,f;if((n.type==="click"&&(e=s({},n),e.type="preclick",this._fireDOMEvent(e,e.type,i)),!n._stopped)&&(i=(i||[]).concat(this._findEventTargets(n,t)),i.length))for(u=i[0],t==="contextmenu"&&u.listens(t,!0)&&ot(n),r={originalEvent:n},n.type!=="keypress"&&(o=u.getLatLng&&(!u._radius||u._radius<=10),r.containerPoint=o?this.latLngToContainerPoint(u.getLatLng()):this.mouseEventToContainerPoint(n),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=o?u.getLatLng():this.layerPointToLatLng(r.layerPoint)),f=0;f<i.length;f++)if(i[f].fire(t,r,!0),r.originalEvent._stopped||i[f].options.bubblingMouseEvents===!1&&ss(this._mouseEvents,t)!==-1)return},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,t=this._handlers.length;n<t;n++)this._handlers[n].disable()},whenReady:function(n,t){if(this._loaded)n.call(t||this,{target:this});else this.on("load",n,t);return this},_getMapPanePos:function(){return oi(this._mapPane)||new t(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,t){var i=n&&t!==undefined?this._getNewPixelOrigin(n,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,t){var i=this.getSize()._divideBy(2);return this.project(n,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,t,i){var r=this._getNewPixelOrigin(i,t);return this.project(n,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(n,t,i){var r=this._getNewPixelOrigin(i,t);return yt([this.project(n.getSouthWest(),t)._subtract(r),this.project(n.getNorthWest(),t)._subtract(r),this.project(n.getSouthEast(),t)._subtract(r),this.project(n.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,t,i){if(!i)return n;var r=this.project(n,t),u=this.getSize().divideBy(2),e=new v(r.subtract(u),r.add(u)),f=this._getBoundsOffset(e,i,t);return f.round().equals([0,0])?n:this.unproject(r.add(f),t)},_limitOffset:function(n,t){if(!t)return n;var i=this.getPixelBounds(),r=new v(i.min.add(n),i.max.add(n));return n.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(n,i,r){var u=yt(this.project(i.getNorthEast(),r),this.project(i.getSouthWest(),r)),f=u.min.subtract(n.min),e=u.max.subtract(n.max),o=this._rebound(f.x,-e.x),s=this._rebound(f.y,-e.y);return new t(o,s)},_rebound:function(n,t){return n+t>0?Math.round(n-t)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(t))},_limitZoom:function(n){var i=this.getMinZoom(),r=this.getMaxZoom(),t=ut?this.options.zoomSnap:1;return t&&(n=Math.round(n/t)*t),Math.max(i,Math.min(r,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){p(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(n,t){var i=this._getCenterOffset(n)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,t),!0)},_createAnimProxy:function(){var n=this._proxy=e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n);this.on("zoomanim",function(n){var t=he,i=this._proxy.style[t];si(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1));i===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this);this.on("load moveend",function(){var t=this.getCenter(),n=this.getZoom();si(this._proxy,this.project(t,n),this.getZoomScale(n,1))},this);this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){a(this._proxy);delete this._proxy},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),u=this._getCenterOffset(n)._divideBy(1-1/r);return i.animate!==!0&&!this.getSize().contains(u)?!1:(g(function(){this._moveStart(!0,!1)._animateZoom(n,t,!0)},this),!0)},_animateZoom:function(n,t,r,u){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=t,i(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:t,noUpdate:u}),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&p(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),g(function(){this._moveEnd(!0)},this))}});st=gt.extend({options:{position:"topright"},initialize:function(n){l(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var t=this._map;return t&&t.removeControl(this),this.options.position=n,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove();this._map=n;var t=this._container=this.onAdd(n),u=this.getPosition(),r=n._controlCorners[u];return i(t,"leaflet-control"),u.indexOf("bottom")!==-1?r.insertBefore(t,r.firstChild):r.appendChild(t),this},remove:function(){if(!this._map)return this;if(a(this._container),this.onRemove)this.onRemove(this._map);return this._map=null,this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}});fr=function(n){return new st(n)};f.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){function n(n,u){var f=t+n+" "+t+u;i[n+u]=e("div",f,r)}var i=this._controlCorners={},t="leaflet-",r=this._controlContainer=e("div",t+"control-container",this._container);n("top","left");n("top","right");n("bottom","left");n("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)a(this._controlCorners[n]);a(this._controlContainer);delete this._controlCorners;delete this._controlContainer}});var vh=st.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,t,i,r){return i<r?-1:r<i?1:0}},initialize:function(n,t,i){l(this,i);this._layerControlInputs=[];this._layers=[];this._lastZIndex=0;this._handlingClick=!1;for(var r in n)this._addLayer(n[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(n){this._initLayout();this._update();this._map=n;n.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return st.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,t){return this._addLayer(n,t),this._map?this._update():this},addOverlay:function(n,t){return this._addLayer(n,t,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var t=this._getLayer(o(n));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){i(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._form.clientHeight?(i(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=n+"px"):p(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return p(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",t=this._container=e("div",n),f=this.options.collapsed,u,i;if(t.setAttribute("aria-haspopup",!0),tu(t),ge(t),u=this._form=e("form",n+"-list"),f){this._map.on("click",this.collapse,this);di||r(t,{mouseenter:this.expand,mouseleave:this.collapse},this)}i=this._layersLink=e("a",n+"-toggle",t);i.href="#";i.title="Layers";pt?(r(i,"click",bt),r(i,"click",this.expand,this)):r(i,"focus",this.expand,this);f||this.expand();this._baseLayersList=e("div",n+"-base",u);this._separator=e("div",n+"-separator",u);this._overlaysList=e("div",n+"-overlays",u);t.appendChild(u)},_getLayer:function(n){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===n)return this._layers[t]},_addLayer:function(n,t,i){if(this._map)n.on("add remove",this._onLayerChange,this);this._layers.push({layer:n,name:t,overlay:i});this.options.sortLayers&&this._layers.sort(c(function(n,t){return this.options.sortFunction(n.layer,t.layer,n.name,t.name)},this));this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex));this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ce(this._baseLayersList);ce(this._overlaysList);this._layerControlInputs=[];for(var n,r,t,u=0,i=0;i<this._layers.length;i++)t=this._layers[i],this._addItem(t),r=r||t.overlay,n=n||!t.overlay,u+=t.overlay?0:1;return this.options.hideSingleBase&&(n=n&&u>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=r&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var t=this._getLayer(o(n.target)),i=t.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(n,t){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=r,i.firstChild},_addItem:function(n){var u=document.createElement("label"),e=this._map.hasLayer(n.layer),t,f,i,s;return n.overlay?(t=document.createElement("input"),t.type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=e):t=this._createRadioElement("leaflet-base-layers",e),this._layerControlInputs.push(t),t.layerId=o(n.layer),r(t,"click",this._onInputClick,this),f=document.createElement("span"),f.innerHTML=" "+n.name,i=document.createElement("div"),u.appendChild(i),i.appendChild(t),i.appendChild(f),s=n.overlay?this._overlaysList:this._baseLayersList,s.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){var f=this._layerControlInputs,t,u,i=[],r=[],n;for(this._handlingClick=!0,n=f.length-1;n>=0;n--)t=f[n],u=this._getLayer(t.layerId).layer,t.checked?i.push(u):t.checked||r.push(u);for(n=0;n<r.length;n++)this._map.hasLayer(r[n])&&this._map.removeLayer(r[n]);for(n=0;n<i.length;n++)this._map.hasLayer(i[n])||this._map.addLayer(i[n]);this._handlingClick=!1;this._refocusOnMap()},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,t,n,u=this._map.getZoom(),i=r.length-1;i>=0;i--)t=r[i],n=this._getLayer(t.layerId).layer,t.disabled=n.options.minZoom!==undefined&&u<n.options.minZoom||n.options.maxZoom!==undefined&&u>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),cl=function(n,t,i){return new vh(n,t,i)},ro=st.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(n){var i="leaflet-control-zoom",r=e("div",i+" leaflet-bar"),t=this.options;this._zoomInButton=this._createButton(t.zoomInText,t.zoomInTitle,i+"-in",r,this._zoomIn);this._zoomOutButton=this._createButton(t.zoomOutText,t.zoomOutTitle,i+"-out",r,this._zoomOut);this._updateDisabled();n.on("zoomend zoomlevelschange",this._updateDisabled,this);return r},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,t,i,u,f){var o=e("a",i,u);return o.innerHTML=n,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),tu(o),r(o,"click",bt),r(o,"click",f,this),r(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var n=this._map,t="leaflet-disabled";p(this._zoomInButton,t);p(this._zoomOutButton,t);(this._disabled||n._zoom===n.getMinZoom())&&i(this._zoomOutButton,t);(this._disabled||n._zoom===n.getMaxZoom())&&i(this._zoomInButton,t)}});f.mergeOptions({zoomControl:!0});f.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ro,this.addControl(this.zoomControl))});var ll=function(n){return new ro(n)},yh=st.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var t="leaflet-control-scale",i=e("div",t),r=this.options;this._addScales(r,t+"-line",i);n.on(r.updateWhenIdle?"moveend":"move",this._update,this);return n.whenReady(this._update,this),i},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,t,i){n.metric&&(this._mScale=e("div",t,i));n.imperial&&(this._iScale=e("div",t,i))},_update:function(){var n=this._map,t=n.getSize().y/2,i=n.distance(n.containerPointToLatLng([0,t]),n.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n);this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var t=this._getRoundNum(n),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/n)},_updateImperial:function(n){var t=n*3.2808399,i,r,u;t>5280?(i=t/5280,r=this._getRoundNum(i),this._updateScale(this._iScale,r+" mi",r/i)):(u=this._getRoundNum(t),this._updateScale(this._iScale,u+" ft",u/t))},_updateScale:function(n,t,i){n.style.width=Math.round(this.options.maxWidth*i)+"px";n.innerHTML=t},_getRoundNum:function(n){var i=Math.pow(10,(Math.floor(n)+"").length-1),t=n/i;return t=t>=10?10:t>=5?5:t>=3?3:t>=2?2:1,i*t}}),al=function(n){return new yh(n)},uo=st.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet<\/a>'},initialize:function(n){l(this,n);this._attributions={}},onAdd:function(n){n.attributionControl=this;this._container=e("div","leaflet-control-attribution");tu(this._container);for(var t in n._layers)n._layers[t].getAttribution&&this.addAttribution(n._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){var n,i,t;if(this._map){n=[];for(i in this._attributions)this._attributions[i]&&n.push(i);t=[];this.options.prefix&&t.push(this.options.prefix);n.length&&t.push(n.join(", "));this._container.innerHTML=t.join(" | ")}}});f.mergeOptions({attributionControl:!0});f.addInitHook(function(){this.options.attributionControl&&(new uo).addTo(this)});ph=function(n){return new uo(n)};st.Layers=vh;st.Zoom=ro;st.Scale=yh;st.Attribution=uo;fr.layers=cl;fr.zoom=ll;fr.scale=al;fr.attribution=ph;lt=gt.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});lt.addTo=function(n,t){return n.addHandler(t,this),this};var vl={Events:tt},wh=pt?"touchstart mousedown":"mousedown",bh={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},fo={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ci=bi.extend({options:{clickTolerance:3},initialize:function(n,t,i,r){l(this,r);this._element=n;this._dragStartTarget=t||n;this._preventOutline=i},enable:function(){this._enabled||(r(this._dragStartTarget,wh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ci._dragging===this&&this.finishDrag(),w(this._dragStartTarget,wh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(!n._simulated&&this._enabled&&(this._moved=!1,!le(this._element,"leaflet-zoom-anim"))&&!ci._dragging&&!n.shiftKey&&(n.which===1||n.button===1||n.touches)&&(ci._dragging=this,this._preventOutline&&be(this._element),ye(),gr(),!this._moving)){this.fire("down");var i=n.touches?n.touches[0]:n,u=oh(this._element);this._startPoint=new t(i.clientX,i.clientY);this._parentScale=ke(u);r(document,fo[n.type],this._onMove,this);r(document,bh[n.type],this._onUp,this)}},_onMove:function(n){if(!n._simulated&&this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var u=n.touches&&n.touches.length===1?n.touches[0]:n,r=new t(u.clientX,u.clientY)._subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,ot(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=oi(this._element).subtract(r),i(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),i(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,nt(this._animRequest),this._lastEvent=n,this._animRequest=g(this._updatePosition,this,!0)))}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n);b(this._element,this._newPos);this.fire("drag",n)},_onUp:function(n){!n._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){p(document.body,"leaflet-dragging");this._lastTarget&&(p(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in fo)w(document,fo[n],this._onMove,this),w(document,bh[n],this._onUp,this);pe();nu();this._moved&&this._moving&&(nt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1;ci._dragging=!1}});ic=(Object.freeze||Object)({simplify:kh,pointToSegmentDistance:dh,closestPointOnSegment:yl,clipSegment:nc,_getEdgeIntersection:tf,_getBitCode:li,_sqClosestPointOnSegment:iu,isFlat:ti,_flat:tc});var kl=(Object.freeze||Object)({clipPolygon:rc}),oo={project:function(n){return new t(n.lng,n.lat)},unproject:function(n){return new h(n.y,n.x)},bounds:new v([-180,-90],[180,90])},so={R:6378137,R_MINOR:6356752.3142451793,bounds:new v([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(n){var u=Math.PI/180,r=this.R,i=n.lat*u,f=this.R_MINOR/r,e=Math.sqrt(1-f*f),o=e*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-o)/(1+o),e/2);return i=-r*Math.log(Math.max(s,1e-10)),new t(n.lng*u*r,i)},unproject:function(n){for(var f=180/Math.PI,r=this.R,e=this.R_MINOR/r,o=Math.sqrt(1-e*e),s=Math.exp(-n.y/r),i=Math.PI/2-2*Math.atan(s),c=0,u=.1,t;c<15&&Math.abs(u)>1e-7;c++)t=o*Math.sin(i),t=Math.pow((1-t)/(1+t),o/2),u=Math.PI/2-2*Math.atan(s*t)-i,i+=u;return new h(i*f,n.x*f/r)}},dl=(Object.freeze||Object)({LonLat:oo,Mercator:so,SphericalMercator:wf}),gl=s({},ui,{code:"EPSG:3395",projection:so,transformation:function(){var n=.5/(Math.PI*so.R);return yr(n,.5,-n,.5)}()}),uc=s({},ui,{code:"EPSG:4326",projection:oo,transformation:yr(1/180,1,-1/180,.5)}),na=s({},ni,{projection:oo,transformation:yr(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,t){var i=t.lng-n.lng,r=t.lat-n.lat;return Math.sqrt(i*i+r*r)},infinite:!0});ni.Earth=ui;ni.EPSG3395=gl;ni.EPSG3857=hu;ni.EPSG900913=ls;ni.EPSG4326=uc;ni.Simple=na;rt=bi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[o(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[o(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var t=n.target,i;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){i=this.getEvents();t.on(i,this);this.once("remove",function(){t.off(i,this)},this)}this.onAdd(t);this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution());this.fire("add");t.fire("layeradd",{layer:this})}}});f.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var t=o(n);return this._layers[t]?this:(this._layers[t]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var t=o(n);if(!this._layers[t])return this;if(this._loaded)n.onRemove(this);return n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this},hasLayer:function(n){return!!n&&o(n)in this._layers},eachLayer:function(n,t){for(var i in this._layers)n.call(t,this._layers[i]);return this},_addLayers:function(n){n=n?ht(n)?n:[n]:[];for(var t=0,i=n.length;t<i;t++)this.addLayer(n[t])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[o(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var t=o(n);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var n=Infinity,t=-Infinity,u=this._getZoomSpan(),r,i;for(r in this._zoomBoundLayers)i=this._zoomBoundLayers[r].options,n=i.minZoom===undefined?n:Math.min(n,i.minZoom),t=i.maxZoom===undefined?t:Math.max(t,i.maxZoom);this._layersMaxZoom=t===-Infinity?undefined:t;this._layersMinZoom=n===Infinity?undefined:n;u!==this._getZoomSpan()&&this.fire("zoomlevelschange");this.options.maxZoom===undefined&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom);this.options.minZoom===undefined&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var er=rt.extend({initialize:function(n,t){l(this,t);this._layers={};var i,r;if(n)for(i=0,r=n.length;i<r;i++)this.addLayer(n[i])},addLayer:function(n){var t=this.getLayerId(n);return this._layers[t]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var t=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(n){return!!n&&(n in this._layers||this.getLayerId(n)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),i,t;for(i in this._layers)t=this._layers[i],t[n]&&t[n].apply(t,r);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,t){for(var i in this._layers)n.call(t,this._layers[i]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return o(n)}}),ta=function(n,t){return new er(n,t)},ai=er.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),er.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),er.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new it,i,n;for(i in this._layers)n=this._layers[i],t.extend(n.getBounds?n.getBounds():n.getLatLng());return t}}),ia=function(n){return new ai(n)},or=gt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(n){l(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,t){var r=this._getIconUrl(n),i;if(!r){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}return i=this._createImg(r,t&&t.tagName==="IMG"?t:null),this._setIconStyles(i,n),i},_setIconStyles:function(n,t){var f=this.options,r=f[t+"Size"],i,e;typeof r=="number"&&(r=[r,r]);i=u(r);e=u(t==="shadow"&&f.shadowAnchor||f.iconAnchor||i&&i.divideBy(2,!0));n.className="leaflet-marker-"+t+" "+(f.className||"");e&&(n.style.marginLeft=-e.x+"px",n.style.marginTop=-e.y+"px");i&&(n.style.width=i.x+"px",n.style.height=i.y+"px")},_createImg:function(n,t){return t=t||document.createElement("img"),t.src=n,t},_getIconUrl:function(n){return ei&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});var ru=or.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return ru.imagePath||(ru.imagePath=this._detectIconPath()),(this.options.imagePath||ru.imagePath)+or.prototype._getIconUrl.call(this,n)},_detectIconPath:function(){var n=e("div","leaflet-default-icon-path",document.body),t=dr(n,"background-image")||dr(n,"backgroundImage");return document.body.removeChild(n),t===null||t.indexOf("url")!==0?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),fc=lt.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new ci(n,n,!0));this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable();i(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable();this._marker._icon&&p(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var e=this._marker,o=e._map,c=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,r=oi(e._icon),i=o.getPixelBounds(),h=o.getPixelOrigin(),t=yt(i.min._subtract(h).add(s),i.max._subtract(h).subtract(s)),f;t.contains(r)||(f=u((Math.max(t.max.x,r.x)-t.max.x)/(i.max.x-t.max.x)-(Math.min(t.min.x,r.x)-t.min.x)/(i.min.x-t.min.x),(Math.max(t.max.y,r.y)-t.max.y)/(i.max.y-t.max.y)-(Math.min(t.min.y,r.y)-t.min.y)/(i.min.y-t.min.y)).multiplyBy(c),o.panBy(f,{animate:!1}),this._draggable._newPos._add(f),this._draggable._startPos._add(f),b(e._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=g(this._adjustPan.bind(this,n)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(nt(this._panRequest),this._panRequest=g(this._adjustPan.bind(this,n)))},_onDrag:function(n){var t=this._marker,i=t._shadow,r=oi(t._icon),u=t._map.layerPointToLatLng(r);i&&b(i,r);t._latlng=u;n.latlng=u;n.oldLatLng=this._oldLatLng;t.fire("move",n).fire("drag",n)},_onDragEnd:function(n){nt(this._panRequest);delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",n)}}),uu=rt.extend({options:{icon:new ru,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,t){l(this,t);this._latlng=y(n)},onAdd:function(n){if(this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated)n.on("zoomanim",this._animateZoom,this);this._initIcon();this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks());delete this.dragging;this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this);this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var t=this._latlng;return this._latlng=y(n),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),t=n.icon.createIcon(this._icon),e=!1,r,u;if(t!==this._icon&&(this._icon&&this._removeIcon(),e=!0,n.title&&(t.title=n.title),t.tagName==="IMG"&&(t.alt=n.alt||"")),i(t,f),n.keyboard&&(t.tabIndex="0"),this._icon=t,n.riseOnHover)this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});r=n.icon.createShadow(this._shadow);u=!1;r!==this._shadow&&(this._removeShadow(),u=!0);r&&(i(r,f),r.alt="");this._shadow=r;n.opacity<1&&this._updateOpacity();e&&this.getPane().appendChild(this._icon);this._initInteraction();r&&u&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex});a(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&a(this._shadow);this._shadow=null},_setPos:function(n){b(this._icon,n);this._shadow&&b(this._shadow,n);this._zIndex=n.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(n){this._icon.style.zIndex=this._zIndex+n},_animateZoom:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(i(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable());this.dragging=new fc(this);n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;ft(this._icon,n);this._shadow&&ft(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});ii=rt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return l(this,n),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}});fu=ii.extend({options:{fill:!0,radius:10},initialize:function(n,t){l(this,t);this._latlng=y(n);this._radius=this.options.radius},setLatLng:function(n){return this._latlng=y(n),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var t=n&&n.radius||this._radius;return ii.prototype.setStyle.call(this,n),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var n=this._radius,r=this._radiusY||n,t=this._clickTolerance(),i=[n+t,r+t];this._pxBounds=new v(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});rf=fu.extend({initialize:function(n,t,i){if(typeof t=="number"&&(t=s({},i,{radius:t})),l(this,t),this._latlng=y(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new it(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,i=this._latlng.lat,n=this._map,o=n.options.crs,c;if(o.distance===ui.distance){var t=Math.PI/180,u=this._mRadius/ui.R/t,h=n.project([i+u,e]),l=n.project([i-u,e]),f=h.add(l).divideBy(2),s=n.unproject(f).lat,r=Math.acos((Math.cos(u*t)-Math.sin(i*t)*Math.sin(s*t))/(Math.cos(i*t)*Math.cos(s*t)))/t;(isNaN(r)||r===0)&&(r=u/Math.cos(Math.PI/180*i));this._point=f.subtract(n.getPixelOrigin());this._radius=isNaN(r)?0:f.x-n.project([s,e-r]).x;this._radiusY=f.y-h.y}else c=o.unproject(o.project(this._latlng).subtract([this._mRadius,0])),this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x;this._updateBounds()}});kt=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,t){l(this,t);this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var r,t,c,s,u=Infinity,i=null,h=iu,f,e,o=0,l=this._parts.length;o<l;o++)for(r=this._parts[o],t=1,c=r.length;t<c;t++)f=r[t-1],e=r[t],s=h(n,f,e,!0),s<u&&(u=s,i=h(n,f,e));return i&&(i.distance=Math.sqrt(u)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var n,r,e,u,f,t,o,i=this._rings[0],s=i.length;if(!s)return null;for(n=0,r=0;n<s-1;n++)r+=i[n].distanceTo(i[n+1])/2;if(r===0)return this._map.layerPointToLatLng(i[0]);for(n=0,u=0;n<s-1;n++)if(f=i[n],t=i[n+1],e=f.distanceTo(t),u+=e,u>r)return o=(u-r)/e,this._map.layerPointToLatLng([t.x-o*(t.x-f.x),t.y-o*(t.y-f.y)])},getBounds:function(){return this._bounds},addLatLng:function(n,t){return t=t||this._defaultShape(),n=y(n),t.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new it;this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return ti(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var i=[],r=ti(n),t=0,u=n.length;t<u;t++)r?(i[t]=y(n[t]),this._bounds.extend(i[t])):i[t]=this._convertLatLngs(n[t]);return i},_project:function(){var n=new v,i,r;this._rings=[];this._projectLatlngs(this._latlngs,this._rings,n);i=this._clickTolerance();r=new t(i,i);this._bounds.isValid()&&n.isValid()&&(n.min._subtract(r),n.max._add(r),this._pxBounds=n)},_projectLatlngs:function(n,t,i){var e=n[0]instanceof h,f=n.length,r,u;if(e){for(u=[],r=0;r<f;r++)u[r]=this._map.latLngToLayerPoint(n[r]),i.extend(u[r]);t.push(u)}else for(r=0;r<f;r++)this._projectLatlngs(n[r],t,i)},_clipPoints:function(){var o=this._renderer._bounds,i,f,n,t,s,e,r,u;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(o)){if(this.options.noClip){this._parts=this._rings;return}for(i=this._parts,f=0,t=0,s=this._rings.length;f<s;f++)for(u=this._rings[f],n=0,e=u.length;n<e-1;n++)(r=nc(u[n],u[n+1],o,n,!0),r)&&(i[t]=i[t]||[],i[t].push(r[0]),(r[1]!==u[n+1]||n===e-2)&&(i[t].push(r[1]),t++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=kh(t[n],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,t){var r,i,f,o,e,u,s=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(r=0,o=this._parts.length;r<o;r++)for(u=this._parts[r],i=0,e=u.length,f=e-1;i<e;f=i++)if((t||i!==0)&&dh(n,u[f],u[i])<=s)return!0;return!1}});kt._flat=tc;vi=kt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var r,e,n,t,u,i,o,s,c,f=this._rings[0],h=f.length;if(!h)return null;for(i=o=s=0,r=0,e=h-1;r<h;e=r++)n=f[r],t=f[e],u=n.y*t.x-t.y*n.x,o+=(n.x+t.x)*u,s+=(n.y+t.y)*u,i+=u*3;return c=i===0?f[0]:[o/i,s/i],this._map.layerPointToLatLng(c)},_convertLatLngs:function(n){var t=kt.prototype._convertLatLngs.call(this,n),i=t.length;return i>=2&&t[0]instanceof h&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(n){kt.prototype._setLatLngs.call(this,n);ti(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ti(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,u=this.options.weight,f=new t(u,u),i,e,r;if(n=new v(n.min.subtract(f),n.max.add(f)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(n)){if(this.options.noClip){this._parts=this._rings;return}for(i=0,e=this._rings.length;i<e;i++)r=rc(this._rings[i],n,!0),r.length&&this._parts.push(r)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var e=!1,i,t,r,u,f,o,h,s;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(u=0,h=this._parts.length;u<h;u++)for(i=this._parts[u],f=0,s=i.length,o=s-1;f<s;o=f++)t=i[f],r=i[o],t.y>n.y!=r.y>n.y&&n.x<(r.x-t.x)*(n.y-t.y)/(r.y-t.y)+t.x&&(e=!e);return e||kt.prototype._containsPoint.call(this,n,!0)}});dt=ai.extend({initialize:function(n,t){l(this,t);this._layers={};n&&this.addData(n)},addData:function(n){var f=ht(n)?n:n.features,u,e,i,r,t;if(f){for(u=0,e=f.length;u<e;u++)i=f[u],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}if((r=this.options,r.filter&&!r.filter(n))||(t=ho(n,r),!t))return this;if(t.feature=ef(n),t.defaultOptions=t.options,this.resetStyle(t),r.onEachFeature)r.onEachFeature(n,t);return this.addLayer(t)},resetStyle:function(n){return n.options=s({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this},setStyle:function(n){return this.eachLayer(function(t){this._setLayerStyle(t,n)},this)},_setLayerStyle:function(n,t){typeof t=="function"&&(t=t(n.feature));n.setStyle&&n.setStyle(t)}});of={toGeoJSON:function(n){return sr(this,{type:"Point",coordinates:lo(this.getLatLng(),n)})}};uu.include(of);rf.include(of);fu.include(of);kt.include({toGeoJSON:function(n){var t=!ti(this._latlngs),i=ff(this._latlngs,t?1:0,!1,n);return sr(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}});vi.include({toGeoJSON:function(n){var t=!ti(this._latlngs),r=t&&!ti(this._latlngs[0]),i=ff(this._latlngs,r?2:t?1:0,!0,n);return t||(i=[i]),sr(this,{type:(r?"Multi":"")+"Polygon",coordinates:i})}});er.include({toMultiPoint:function(n){var t=[];return this.eachLayer(function(i){t.push(i.toGeoJSON(n).geometry.coordinates)}),sr(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(n){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type,i,t;return r==="MultiPoint"?this.toMultiPoint(n):(i=r==="GeometryCollection",t=[],this.eachLayer(function(r){var f,u;r.toGeoJSON&&(f=r.toGeoJSON(n),i?t.push(f.geometry):(u=ef(f),u.type==="FeatureCollection"?t.push.apply(t,u.features):t.push(u)))}),i)?sr(this,{geometries:t,type:"GeometryCollection"}):{type:"FeatureCollection",features:t}}});var ha=ec,ao=rt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,t,i){this._url=n;this._bounds=k(t);l(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity());this.options.interactive&&(i(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image));this.getPane().appendChild(this._image);this._reset()},onRemove:function(){a(this._image);this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&ir(this._image),this},bringToBack:function(){return this._map&&rr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=k(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",n=this._image=t?this._url:e("img");if(i(n,"leaflet-image-layer"),this._zoomAnimated&&i(n,"leaflet-zoom-animated"),this.options.className&&i(n,this.options.className),n.onselectstart=d,n.onmousemove=d,n.onload=c(this.fire,this,"load"),n.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=n.src;return}n.src=this._url;n.alt=this.options.alt},_animateZoom:function(n){var t=this._map.getZoomScale(n.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;si(this._image,i,t)},_reset:function(){var n=this._image,t=new v(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();b(n,t.min);n.style.width=i.x+"px";n.style.height=i.y+"px"},_updateOpacity:function(){ft(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==undefined&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)}}),ca=function(n,t,i){return new ao(n,t,i)},oc=ao.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",n=this._image=s?this._url:e("video"),t,f,r,u,o;if(i(n,"leaflet-image-layer"),this._zoomAnimated&&i(n,"leaflet-zoom-animated"),n.onselectstart=d,n.onmousemove=d,n.onloadeddata=c(this.fire,this,"load"),s){for(t=n.getElementsByTagName("source"),f=[],r=0;r<t.length;r++)f.push(t[r].src);this._url=t.length>0?f:[n.src];return}for(ht(this._url)||(this._url=[this._url]),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,u=0;u<this._url.length;u++)o=e("source"),o.src=this._url[u],n.appendChild(o)}});var ri=rt.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(n,t){l(this,n);this._source=t},onAdd:function(n){this._zoomAnimated=n._zoomAnimated;this._container||this._initLayout();n._fadeAnimated&&ft(this._container,0);clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();n._fadeAnimated&&ft(this._container,1);this.bringToFront()},onRemove:function(n){n._fadeAnimated?(ft(this._container,0),this._removeTimeout=setTimeout(c(a,undefined,this._container),200)):a(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=y(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ir(this._container),this},bringToBack:function(){return this._map&&rr(this._container),this},_updateContent:function(){if(this._content){var n=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")n.innerHTML=t;else{while(n.hasChildNodes())n.removeChild(n.firstChild);n.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){var r,f;if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=u(this.options.offset),i=this._getAnchor();this._zoomAnimated?b(this._container,t.add(i)):n=n.add(t).add(i);r=this._containerBottom=-n.y;f=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=r+"px";this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}}),hr=ri.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n.openPopup(this),this},onAdd:function(n){if(ri.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),!(this._source instanceof ii)))this._source.on("preclick",hi)},onRemove:function(n){ri.prototype.onRemove.call(this,n);n.fire("popupclose",{popup:this});this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",hi))},getEvents:function(){var n=ri.prototype.getEvents.call(this);return(this.options.closeOnClick!==undefined?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",i=this._container=e("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=e("div",n+"-content-wrapper",i),t;this._contentNode=e("div",n+"-content",u);tu(u);ge(this._contentNode);r(u,"contextmenu",hi);this._tipContainer=e("div",n+"-tip-container",i);this._tip=e("div",n+"-tip",this._tipContainer);this.options.closeButton&&(t=this._closeButton=e("a",n+"-close-button",i),t.href="#close",t.innerHTML="&#215;",r(t,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var r=this._contentNode,n=r.style,t;n.width="";n.whiteSpace="nowrap";t=r.offsetWidth;t=Math.min(t,this.options.maxWidth);t=Math.max(t,this.options.minWidth);n.width=t+1+"px";n.whiteSpace="";n.height="";var e=r.offsetHeight,u=this.options.maxHeight,f="leaflet-popup-scrolled";u&&e>u?(n.height=u+"px",i(r,f)):p(r,f);this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),i=this._getAnchor();b(this._container,t.add(i))},_adjustPan:function(){if(this.options.autoPan&&(!this._map._panAnim||!this._map._panAnim._inProgress)){var s=this._map,v=parseInt(dr(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+v,c=this._containerWidth,l=new t(this._containerLeft,-h-this._containerBottom);l._add(oi(this._container));var n=s.layerPointToContainerPoint(l),a=u(this.options.autoPanPadding),f=u(this.options.autoPanPaddingTopLeft||a),e=u(this.options.autoPanPaddingBottomRight||a),o=s.getSize(),i=0,r=0;n.x+c+e.x>o.x&&(i=n.x+c-o.x+e.x);n.x-i-f.x<0&&(i=n.x-f.x);n.y+h+e.y>o.y&&(r=n.y+h-o.y+e.y);n.y-r-f.y<0&&(r=n.y-f.y);(i||r)&&s.fire("autopanstart").panBy([i,r])}},_onCloseButtonClick:function(n){this._close();bt(n)},_getAnchor:function(){return u(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),aa=function(n,t){return new hr(n,t)};f.mergeOptions({closePopupOnClick:!0});f.include({openPopup:function(n,t,i){return(n instanceof hr||(n=new hr(i).setContent(n)),t&&n.setLatLng(t),this.hasLayer(n))?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return n&&n!==this._popup||(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}});rt.include({bindPopup:function(n,t){if(n instanceof hr?(l(n,t),this._popup=n,n._source=this):((!this._popup||t)&&(this._popup=new hr(t,this)),this._popup.setContent(n)),!this._popupHandlersAdded){this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=!0}return this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n,t){if(n instanceof rt||(t=n,n=this),n instanceof ai)for(var i in this._layers){n=this._layers[i];break}return t||(t=n.getCenter?n.getCenter():n.getLatLng()),this._popup&&this._map&&(this._popup._source=n,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(n){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(n)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){var t=n.layer||n.target;if(this._popup&&this._map){if(bt(n),t instanceof ii){this.openPopup(n.layer||n.target,n.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});yi=ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(n){ri.prototype.onAdd.call(this,n);this.setOpacity(this.options.opacity);n.fire("tooltipopen",{tooltip:this});this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(n){ri.prototype.onRemove.call(this,n);n.fire("tooltipclose",{tooltip:this});this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var n=ri.prototype.getEvents.call(this);return pt&&!this.options.permanent&&(n.preclick=this._close),n},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var n="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=e("div",n)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var h=this._map,r=this._container,c=h.latLngToContainerPoint(h.getCenter()),l=h.layerPointToContainerPoint(n),f=this.options.direction,o=r.offsetWidth,s=r.offsetHeight,t=u(this.options.offset),e=this._getAnchor();f==="top"?n=n.add(u(-o/2+t.x,-s+t.y+e.y,!0)):f==="bottom"?n=n.subtract(u(o/2-t.x,-t.y,!0)):f==="center"?n=n.subtract(u(o/2+t.x,s/2-e.y+t.y,!0)):f==="right"||f==="auto"&&l.x<c.x?(f="right",n=n.add(u(t.x+e.x,e.y-s/2+t.y,!0))):(f="left",n=n.subtract(u(o+e.x-t.x,s/2-e.y-t.y,!0)));p(r,"leaflet-tooltip-right");p(r,"leaflet-tooltip-left");p(r,"leaflet-tooltip-top");p(r,"leaflet-tooltip-bottom");i(r,"leaflet-tooltip-"+f);b(r,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n;this._container&&ft(this._container,n)},_animateZoom:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(t)},_getAnchor:function(){return u(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});sc=function(n,t){return new yi(n,t)};f.include({openTooltip:function(n,t,i){return(n instanceof yi||(n=new yi(i).setContent(n)),t&&n.setLatLng(t),this.hasLayer(n))?this:this.addLayer(n)},closeTooltip:function(n){return n&&this.removeLayer(n),this}});rt.include({bindTooltip:function(n,t){return n instanceof yi?(l(n,t),this._tooltip=n,n._source=this):((!this._tooltip||t)&&(this._tooltip=new yi(t,this)),this._tooltip.setContent(n)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(n||!this._tooltipHandlersAdded){var i=n?"off":"on",t={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?t.add=this._openTooltip:(t.mouseover=this._openTooltip,t.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(t.mousemove=this._moveTooltip),pt&&(t.click=this._openTooltip));this[i](t);this._tooltipHandlersAdded=!n}},openTooltip:function(n,t){if(n instanceof rt||(t=n,n=this),n instanceof ai)for(var r in this._layers){n=this._layers[r];break}return t||(t=n.getCenter?n.getCenter():n.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=n,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(i(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(p(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(n){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(n)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_openTooltip:function(n){var t=n.layer||n.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?n.latlng:undefined)},_moveTooltip:function(n){var t=n.latlng,i,r;this._tooltip.options.sticky&&n.originalEvent&&(i=this._map.mouseEventToContainerPoint(n.originalEvent),r=this._map.containerPointToLayerPoint(i),t=this._map.layerPointToLatLng(r));this._tooltip.setLatLng(t)}});vo=or.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var t=n&&n.tagName==="DIV"?n:document.createElement("div"),i=this.options,r;return t.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(r=u(i.bgPos),t.style.backgroundPosition=-r.x+"px "+-r.y+"px"),this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});or.Default=ru;cr=rt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gi,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,maxNativeZoom:undefined,minNativeZoom:undefined,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){l(this,n)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles();a(this._container);n._removeZoomLimit(this);this._container=null;this._tileZoom=undefined},bringToFront:function(){return this._map&&(ir(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=cf(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof t?n:new t(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r=this.getPane().children,t=-n(-Infinity,Infinity),i=0,f=r.length,u;i<f;i++)u=r[i].style.zIndex,r[i]!==this._container&&u&&(t=n(t,+u));isFinite(t)&&(this.options.zIndex=t+n(-1,1),this._updateZIndex())},_updateOpacity:function(){var u,n,t;if(this._map&&!ki){ft(this._container,this.options.opacity);var f=+new Date,i=!1,r=!1;for(u in this._tiles)(n=this._tiles[u],n.current&&n.loaded)&&(t=Math.min(1,(f-n.loaded)/200),ft(n.el,t),t<1?i=!0:(n.active?r=!0:this._onOpaqueTile(n),n.active=!0));r&&!this._noPrune&&this._pruneTiles();i&&(nt(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,u=this.options.maxZoom,t,n,r;if(i===undefined)return undefined;for(t in this._levels)this._levels[t].el.children.length||t===i?(this._levels[t].el.style.zIndex=u-Math.abs(i-t),this._onUpdateLevel(t)):(a(this._levels[t].el),this._removeTilesAtZoom(t),this._onRemoveLevel(t),delete this._levels[t]);return n=this._levels[i],r=this._map,n||(n=this._levels[i]={},n.el=e("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=u,n.origin=r.project(r.unproject(r.getPixelOrigin()),i).round(),n.zoom=i,this._setZoomTransform(n,r.getCenter(),r.getZoom()),d(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){var t,i,r,n;if(this._map){if(r=this._map.getZoom(),r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)i=this._tiles[t],i.current&&!i.active&&(n=i.coords,this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(n){for(var t in this._tiles)this._tiles[t].coords.z===n&&this._removeTile(t)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)a(this._levels[n].el),this._onRemoveLevel(n),delete this._levels[n];this._removeAllTiles();this._tileZoom=undefined},_retainParent:function(n,i,r,u){var o=Math.floor(n/2),s=Math.floor(i/2),e=r-1,h=new t(+o,+s),c,f;return(h.z=+e,c=this._tileCoordsToKey(h),f=this._tiles[c],f&&f.active)?(f.retain=!0,!0):(f&&f.loaded&&(f.retain=!0),e>u)?this._retainParent(o,s,e,u):!1},_retainChildren:function(n,i,r,u){for(var o,s,h,f,e=2*n;e<2*n+2;e++)for(o=2*i;o<2*i+2;o++){if(s=new t(e,o),s.z=r+1,h=this._tileCoordsToKey(s),f=this._tiles[h],f&&f.active){f.retain=!0;continue}else f&&f.loaded&&(f.retain=!0);r+1<u&&this._retainChildren(e,o,r+1,u)}},_resetView:function(n){var t=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var t=this.options;return undefined!==t.minNativeZoom&&n<t.minNativeZoom?t.minNativeZoom:undefined!==t.maxNativeZoom&&t.maxNativeZoom<n?t.maxNativeZoom:n},_setView:function(n,t,i,r){var u=this._clampZoom(Math.round(t)),f;(this.options.maxZoom!==undefined&&u>this.options.maxZoom||this.options.minZoom!==undefined&&u<this.options.minZoom)&&(u=undefined);f=this.options.updateWhenZooming&&u!==this._tileZoom;(!r||f)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==undefined&&this._update(n),i||this._pruneTiles(),this._noPrune=!!i);this._setZoomTransforms(n,t)},_setZoomTransforms:function(n,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],n,t)},_setZoomTransform:function(n,t,i){var r=this._map.getZoomScale(i,n.zoom),u=n.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,i)).round();ut?si(n.el,u,r):b(n.el,u)},_resetGrid:function(){var t=this._map,n=t.options.crs,i=this._tileSize=this.getTileSize(),r=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u));this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],r).x/i.x),Math.ceil(t.project([0,n.wrapLng[1]],r).x/i.y)];this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],r).y/i.x),Math.ceil(t.project([n.wrapLat[1],0],r).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(n){var t=this._map,u=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),f=t.getZoomScale(u,this._tileZoom),i=t.project(n,this._tileZoom).floor(),r=t.getSize().divideBy(f*2);return new v(i.subtract(r),i.add(r))},_update:function(n){var h=this._map,c,l,o,s,r,f,a,y;if(h&&(c=this._clampZoom(h.getZoom()),n===undefined&&(n=h.getCenter()),this._tileZoom!==undefined)){var w=this._getTiledPixelBounds(n),i=this._pxBoundsToTileRange(w),p=i.getCenter(),u=[],e=this.options.keepBuffer,b=new v(i.getBottomLeft().subtract([e,-e]),i.getTopRight().add([e,-e]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(l in this._tiles)o=this._tiles[l].coords,o.z===this._tileZoom&&b.contains(new t(o.x,o.y))||(this._tiles[l].current=!1);if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(s=i.min.y;s<=i.max.y;s++)for(r=i.min.x;r<=i.max.x;r++)(f=new t(r,s),f.z=this._tileZoom,this._isValidTile(f))&&(a=this._tiles[this._tileCoordsToKey(f)],a?a.current=!0:u.push(f));if(u.sort(function(n,t){return n.distanceTo(p)-t.distanceTo(p)}),u.length!==0){for(this._loading||(this._loading=!0,this.fire("loading")),y=document.createDocumentFragment(),r=0;r<u.length;r++)this._addTile(u[r],y);this._level.el.appendChild(y)}}},_isValidTile:function(n){var i=this._map.options.crs,t,r;return!i.infinite&&(t=this._globalTileRange,!i.wrapLng&&(n.x<t.min.x||n.x>t.max.x)||!i.wrapLat&&(n.y<t.min.y||n.y>t.max.y))?!1:this.options.bounds?(r=this._tileCoordsToBounds(n),k(this.options.bounds).overlaps(r)):!0},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var t=this._map,i=this.getTileSize(),r=n.scaleBy(i),u=r.add(i),f=t.unproject(r,n.z),e=t.unproject(u,n.z);return[f,e]},_tileCoordsToBounds:function(n){var i=this._tileCoordsToNwSe(n),t=new it(i[0],i[1]);return this.options.noWrap||(t=this._map.wrapLatLngBounds(t)),t},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var i=n.split(":"),r=new t(+i[0],+i[1]);return r.z=+i[2],r},_removeTile:function(n){var t=this._tiles[n];t&&(a(t.el),delete this._tiles[n],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){i(n,"leaflet-tile");var t=this.getTileSize();n.style.width=t.x+"px";n.style.height=t.y+"px";n.onselectstart=d;n.onmousemove=d;ki&&this.options.opacity<1&&ft(n,this.options.opacity);di&&!wr&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,t){var r=this._getTilePos(n),u=this._tileCoordsToKey(n),i=this.createTile(this._wrapCoords(n),c(this._tileReady,this,n));this._initTile(i);this.createTile.length<2&&g(c(this._tileReady,this,n,null,i));b(i,r);this._tiles[u]={el:i,coords:n,current:!0};t.appendChild(i);this.fire("tileloadstart",{tile:i,coords:n})},_tileReady:function(n,t,r){t&&this.fire("tileerror",{error:t,tile:r,coords:n});var u=this._tileCoordsToKey(n);(r=this._tiles[u],r)&&(r.loaded=+new Date,this._map._fadeAnimated?(ft(r.el,0),nt(this._fadeFrame),this._fadeFrame=g(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),t||(i(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ki||!this._map._fadeAnimated?g(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var i=new t(this._wrapX?ar(n.x,this._wrapX):n.x,this._wrapY?ar(n.y,this._wrapY):n.y);return i.z=n.z,i},_pxBoundsToTileRange:function(n){var t=this.getTileSize();return new v(n.min.unscaleBy(t).floor(),n.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});pi=cr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,t){if(this._url=n,t=l(this,t),t.detectRetina&&ei&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),!di)this.on("tileunload",this._onTileRemove)},setUrl:function(n,t){return this._url=n,t||this.redraw(),this},createTile:function(n,t){var i=document.createElement("img");return r(i,"load",c(this._tileOnLoad,this,t,i)),r(i,"error",c(this._tileOnError,this,t,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(n),i},getTileUrl:function(n){var t={r:ei?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()},i;return this._map&&!this._map.options.crs.infinite&&(i=this._globalTileRange.max.y-n.y,this.options.tms&&(t.y=i),t["-y"]=i),os(this._url,s(t,this.options))},_tileOnLoad:function(n,t){ki?setTimeout(c(n,this,null,t),0):n(null,t)},_tileOnError:function(n,t,i){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r);n(i,t)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,r=this.options.zoomOffset;return i&&(n=t-n),n+r},_getSubdomain:function(n){var t=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,n;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=d,n.onerror=d,n.complete||(n.src=vr,a(n),delete this._tiles[t]))},_removeTile:function(n){var t=this._tiles[n];if(t)return ys||t.el.setAttribute("src",vr),cr.prototype._removeTile.call(this,n)},_tileReady:function(n,t,i){if(this._map&&(!i||i.getAttribute("src")!==vr))return cr.prototype._tileReady.call(this,n,t,i)}});yo=pi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,t){var i,r,u,f;this._url=n;i=s({},this.defaultWmsParams);for(r in t)r in this.options||(i[r]=t[r]);t=l(this,t);u=t.detectRetina&&ei?2:1;f=this.getTileSize();i.width=f.x*u;i.height=f.y*u;this.wmsParams=i},onAdd:function(n){this._crs=this.options.crs||n.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code;pi.prototype.onAdd.call(this,n)},getTileUrl:function(n){var r=this._tileCoordsToNwSe(n),u=this._crs,f=yt(u.project(r[0]),u.project(r[1])),t=f.min,i=f.max,o=(this._wmsVersion>=1.3&&this._crs===uc?[t.y,t.x,i.y,i.x]:[t.x,t.y,i.x,i.y]).join(","),e=pi.prototype.getTileUrl.call(this,n);return e+fs(this.wmsParams,e,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(n,t){return s(this.wmsParams,n),t||this.redraw(),this}});pi.WMS=yo;hc.wms=pa;at=rt.extend({options:{padding:.1,tolerance:0},initialize:function(n){l(this,n);o(this);this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&i(this._container,"leaflet-zoom-animated"));this.getPane().appendChild(this._container);this._update();this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this);this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,t){var i=this._map.getZoomScale(t,this._zoom),f=oi(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),e=this._map.project(this._center,t),o=this._map.project(n,t),s=o.subtract(e),u=r.multiplyBy(-i).add(f).add(r).subtract(s);ut?si(this._container,u,i):b(this._container,u)},_reset:function(){this._update();this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-n)).round();this._bounds=new v(i,i.add(t.multiplyBy(1+n*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}});po=at.extend({getEvents:function(){var n=at.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){at.prototype.onAdd.call(this);this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");r(n,"mousemove",cf(this._onMouseMove,32,this),this);r(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this);r(n,"mouseout",this._handleMouseOut,this);this._ctx=n.getContext("2d")},_destroyContainer:function(){nt(this._redrawRequest);delete this._ctx;a(this._container);w(this._container);delete this._container},_updatePaths:function(){var n,t;if(!this._postponeUpdatePaths){this._redrawBounds=null;for(t in this._layers)n=this._layers[t],n._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={};at.prototype._update.call(this);var t=this._bounds,n=this._container,i=t.getSize(),r=ei?2:1;b(n,t.min);n.width=r*i.x;n.height=r*i.y;n.style.width=i.x+"px";n.style.height=i.y+"px";ei&&this._ctx.scale(2,2);this._ctx.translate(-t.min.x,-t.min.y);this.fire("update")}},_reset:function(){at.prototype._reset.call(this);this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n);this._layers[o(n)]=n;var t=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t);this._drawLast=t;this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var r=n._order,t=r.next,i=r.prev;t?t.prev=i:this._drawLast=i;i?i.next=t:this._drawFirst=t;delete this._drawnLayers[n._leaflet_id];delete n._order;delete this._layers[o(n)];this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n);n._project();n._update();this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n);this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){for(var i=n.options.dashArray.split(/[, ]+/),r=[],t=0;t<i.length;t++)r.push(Number(i[t]));n.options._dashArray=r}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||g(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var t=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new v;this._redrawBounds.extend(n._pxBounds.min.subtract([t,t]));this._redrawBounds.extend(n._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null;this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil());this._clear();this._draw();this._redrawBounds=null},_clear:function(){var n=this._redrawBounds,t;n?(t=n.getSize(),this._ctx.clearRect(n.min.x,n.min.y,t.x,t.y)):this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var i,n=this._redrawBounds,r,t;for(this._ctx.save(),n&&(r=n.getSize(),this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,r.x,r.y),this._ctx.clip()),this._drawing=!0,t=this._drawFirst;t;t=t.next)i=t.layer,(!n||i._pxBounds&&i._pxBounds.intersects(n))&&i._updatePath();this._drawing=!1;this._ctx.restore()},_updatePoly:function(n,t){if(this._drawing){var i,r,o,f,e=n._parts,s=e.length,u=this._ctx;if(s){for(this._drawnLayers[n._leaflet_id]=n,u.beginPath(),i=0;i<s;i++){for(r=0,o=e[i].length;r<o;r++)f=e[i][r],u[r?"lineTo":"moveTo"](f.x,f.y);t&&u.closePath()}this._fillStroke(u,n)}}},_updateCircle:function(n){if(this._drawing&&!n._empty()){var u=n._point,t=this._ctx,r=Math.max(Math.round(n._radius),1),i=(Math.max(Math.round(n._radiusY),1)||r)/r;this._drawnLayers[n._leaflet_id]=n;i!==1&&(t.save(),t.scale(1,i));t.beginPath();t.arc(u.x,u.y/i,r,0,Math.PI*2,!1);i!==1&&t.restore();this._fillStroke(t,n)}},_fillStroke:function(n,t){var i=t.options;i.fill&&(n.globalAlpha=i.fillOpacity,n.fillStyle=i.fillColor||i.color,n.fill(i.fillRule||"evenodd"));i.stroke&&i.weight!==0&&(n.setLineDash&&n.setLineDash(t.options&&t.options._dashArray||[]),n.globalAlpha=i.opacity,n.lineWidth=i.weight,n.strokeStyle=i.color,n.lineCap=i.lineCap,n.lineJoin=i.lineJoin,n.stroke())},_onClick:function(n){for(var u=this._map.mouseEventToLayerPoint(n),t,r,i=this._drawFirst;i;i=i.next)t=i.layer,t.options.interactive&&t._containsPoint(u)&&!this._map._draggableMoved(t)&&(r=t);r&&(no(n),this._fireEvent([r],n))},_onMouseMove:function(n){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,t)}},_handleMouseOut:function(n){var t=this._hoveredLayer;t&&(p(this._container,"leaflet-interactive"),this._fireEvent([t],n,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(n,t){for(var u,r,f=this._drawFirst;f;f=f.next)u=f.layer,u.options.interactive&&u._containsPoint(t)&&(r=u);r!==this._hoveredLayer&&(this._handleMouseOut(n),r&&(i(this._container,"leaflet-interactive"),this._fireEvent([r],n,"mouseover"),this._hoveredLayer=r));this._hoveredLayer&&this._fireEvent([this._hoveredLayer],n)},_fireEvent:function(n,t,i){this._map._fireDOMEvent(t,i||t.type,n)},_bringToFront:function(n){var t=n._order,i=t.next,r=t.prev;if(i)i.prev=r;else return;r?r.next=i:i&&(this._drawFirst=i);t.prev=this._drawLast;this._drawLast.next=t;t.next=null;this._drawLast=t;this._requestRedraw(n)},_bringToBack:function(n){var t=n._order,r=t.next,i=t.prev;if(i)i.next=r;else return;r?r.prev=i:i&&(this._drawLast=i);t.prev=null;t.next=this._drawFirst;this._drawFirst.prev=t;this._drawFirst=t;this._requestRedraw(n)}});var eu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch(n){return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),wa={_initContainer:function(){this._container=e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(at.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var t=n._container=eu("shape");i(t,"leaflet-vml-shape "+(this.options.className||""));t.coordsize="1 1";n._path=eu("path");t.appendChild(n._path);this._updateStyle(n);this._layers[o(n)]=n},_addPath:function(n){var t=n._container;this._container.appendChild(t);n.options.interactive&&n.addInteractiveTarget(t)},_removePath:function(n){var t=n._container;a(t);n.removeInteractiveTarget(t);delete this._layers[o(n)]},_updateStyle:function(n){var i=n._stroke,r=n._fill,t=n.options,u=n._container;u.stroked=!!t.stroke;u.filled=!!t.fill;t.stroke?(i||(i=n._stroke=eu("stroke")),u.appendChild(i),i.weight=t.weight+"px",i.color=t.color,i.opacity=t.opacity,i.dashStyle=t.dashArray?ht(t.dashArray)?t.dashArray.join(" "):t.dashArray.replace(/( *, *)/g," "):"",i.endcap=t.lineCap.replace("butt","flat"),i.joinstyle=t.lineJoin):i&&(u.removeChild(i),n._stroke=null);t.fill?(r||(r=n._fill=eu("fill")),u.appendChild(r),r.color=t.fillColor||t.color,r.opacity=t.fillOpacity):r&&(u.removeChild(r),n._fill=null)},_updateCircle:function(n){var t=n._point.round(),i=Math.round(n._radius),r=Math.round(n._radiusY||i);this._setPath(n,n._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+r+" 0,23592600")},_setPath:function(n,t){n._path.v=t},_bringToFront:function(n){ir(n._container)},_bringToBack:function(n){rr(n._container)}},sf=au?eu:as,ou=at.extend({getEvents:function(){var n=at.prototype.getEvents.call(this);return n.zoomstart=this._onZoomStart,n},_initContainer:function(){this._container=sf("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=sf("g");this._container.appendChild(this._rootGroup)},_destroyContainer:function(){a(this._container);w(this._container);delete this._container;delete this._rootGroup;delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){at.prototype._update.call(this);var t=this._bounds,n=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(n)||(this._svgSize=n,i.setAttribute("width",n.x),i.setAttribute("height",n.y));b(i,t.min);i.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" "));this.fire("update")}},_initPath:function(n){var t=n._path=sf("path");n.options.className&&i(t,n.options.className);n.options.interactive&&i(t,"leaflet-interactive");this._updateStyle(n);this._layers[o(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer();this._rootGroup.appendChild(n._path);n.addInteractiveTarget(n._path)},_removePath:function(n){a(n._path);n.removeInteractiveTarget(n._path);delete this._layers[o(n)]},_updatePath:function(n){n._project();n._update()},_updateStyle:function(n){var t=n._path,i=n.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(n,t){this._setPath(n,vs(n._parts,t))},_updateCircle:function(n){var i=n._point,t=Math.max(Math.round(n._radius),1),u=Math.max(Math.round(n._radiusY),1)||t,r="a"+t+","+u+" 0 1,0 ",f=n._empty()?"M0 0":"M"+(i.x-t)+","+i.y+r+t*2+",0 "+r+-t*2+",0 ";this._setPath(n,f)},_setPath:function(n,t){n._path.setAttribute("d",t)},_bringToFront:function(n){ir(n._path)},_bringToBack:function(n){rr(n._path)}});au&&ou.include(wa);f.include({getRenderer:function(n){var t=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(n){if(n==="overlayPane"||n===undefined)return!1;var t=this._paneRenderers[n];return t===undefined&&(t=this._createRenderer({pane:n}),this._paneRenderers[n]=t),t},_createRenderer:function(n){return this.options.preferCanvas&&cc(n)||lc(n)}});wo=vi.extend({initialize:function(n,t){vi.prototype.initialize.call(this,this._boundsToLatLngs(n),t)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=k(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});ou.create=sf;ou.pointsToPath=vs;dt.geometryToLayer=ho;dt.coordsToLatLng=co;dt.coordsToLatLngs=uf;dt.latLngToCoords=lo;dt.latLngsToCoords=ff;dt.getFeature=sr;dt.asFeature=ef;f.mergeOptions({boxZoom:!0});bo=lt.extend({initialize:function(n){this._map=n;this._container=n._container;this._pane=n._panes.overlayPane;this._resetStateTimeout=0;n.on("unload",this._destroy,this)},addHooks:function(){r(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){w(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){a(this._pane);delete this._pane},_resetState:function(){this._resetStateTimeout=0;this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState();this._resetState();gr();ye();this._startPoint=this._map.mouseEventToContainerPoint(n);r(document,{contextmenu:bt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=e("div","leaflet-zoom-box",this._container),i(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart"));this._point=this._map.mouseEventToContainerPoint(n);var t=new v(this._point,this._startPoint),r=t.getSize();b(this._box,t.min);this._box.style.width=r.x+"px";this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(a(this._box),p(this._container,"leaflet-crosshair"));nu();pe();w(document,{contextmenu:bt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if((n.which===1||n.button===1)&&(this._finish(),this._moved)){this._clearDeferredResetState();this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var t=new it(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});f.addInitHook("addHandler","boxZoom",bo);f.mergeOptions({doubleClickZoom:!0});ko=lt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var t=this._map,i=t.getZoom(),r=t.options.zoomDelta,u=n.originalEvent.shiftKey?i-r:i+r;t.options.doubleClickZoom==="center"?t.setZoom(u):t.setZoomAround(n.containerPoint,u)}});f.addInitHook("addHandler","doubleClickZoom",ko);f.mergeOptions({dragging:!0,inertia:!wr,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});go=lt.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new ci(n._mapPane,n._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);if(n.options.worldCopyJump){this._draggable.on("predrag",this._onPreDragWrap,this);n.on("zoomend",this._onZoomEnd,this);n.whenReady(this._onZoomEnd,this)}}i(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){p(this._map._container,"leaflet-grab");p(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map,t;n._stop();this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=k(this._map.options.maxBounds),this._offsetLimit=yt(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null;n.fire("movestart").fire("dragstart");n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i);this._times.push(t);this._prunePositions(t)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){while(this._positions.length>1&&n-this._times[0]>50)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(n).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,t){return n-(n-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var n=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;n.x<t.min.x&&(n.x=this._viscousLimit(n.x,t.min.x));n.y<t.min.y&&(n.y=this._viscousLimit(n.y,t.min.y));n.x>t.max.x&&(n.x=this._viscousLimit(n.x,t.max.x));n.y>t.max.y&&(n.y=this._viscousLimit(n.y,t.max.y));this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var i=this._worldWidth,t=Math.round(i/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,u=(r-t+n)%i+t-n,f=(r+t+n)%i-t-n,e=Math.abs(u+n)<Math.abs(f+n)?u:f;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=e},_onDragEnd:function(n){var t=this._map,r=t.options,h=!r.inertia||this._times.length<2;if(t.fire("dragend",n),h)t.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),l=(this._lastTime-this._times[0])/1e3,u=r.easeLinearity,f=c.multiplyBy(u/l),e=f.distanceTo([0,0]),o=Math.min(r.inertiaMaxSpeed,e),a=f.multiplyBy(o/e),s=o/(r.inertiaDeceleration*u),i=a.multiplyBy(-s/2).round();i.x||i.y?(i=t._limitOffset(i,t.options.maxBounds),g(function(){t.panBy(i,{duration:s,easeLinearity:u,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});f.addInitHook("addHandler","dragging",go);f.mergeOptions({keyboard:!0,keyboardPanDelta:80});ns=lt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n;this._setPanDelta(n.options.keyboardPanDelta);this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0");r(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();w(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,t=document.documentElement,i=n.scrollTop||t.scrollTop,r=n.scrollLeft||t.scrollLeft;this._map._container.focus();window.scrollTo(r,i)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanDelta:function(n){for(var u=this._panKeys={},i=this.keyCodes,t=0,r=i.left.length;t<r;t++)u[i.left[t]]=[-1*n,0];for(t=0,r=i.right.length;t<r;t++)u[i.right[t]]=[n,0];for(t=0,r=i.down.length;t<r;t++)u[i.down[t]]=[0,n];for(t=0,r=i.up.length;t<r;t++)u[i.up[t]]=[0,-1*n]},_setZoomDelta:function(n){for(var u=this._zoomKeys={},i=this.keyCodes,t=0,r=i.zoomIn.length;t<r;t++)u[i.zoomIn[t]]=n;for(t=0,r=i.zoomOut.length;t<r;t++)u[i.zoomOut[t]]=-n},_addHooks:function(){r(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){w(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!n.altKey&&!n.ctrlKey&&!n.metaKey){var i=n.keyCode,t=this._map,r;if(i in this._panKeys)t._panAnim&&t._panAnim._inProgress||(r=this._panKeys[i],n.shiftKey&&(r=u(r).multiplyBy(3)),t.panBy(r),t.options.maxBounds&&t.panInsideBounds(t.options.maxBounds));else if(i in this._zoomKeys)t.setZoom(t.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&t._popup&&t._popup.options.closeOnEscapeKey)t.closePopup();else return;bt(n)}}});f.addInitHook("addHandler","keyboard",ns);f.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});ts=lt.extend({addHooks:function(){r(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){w(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var i=lh(n),r=this._map.options.wheelDebounceTime,t;this._delta+=i;this._lastMousePos=this._map.mouseEventToContainerPoint(n);this._startTime||(this._startTime=+new Date);t=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(c(this._performZoom,this),t);bt(n)},_performZoom:function(){var n=this._map,t=n.getZoom(),i=this._map.options.zoomSnap||0;n._stop();var e=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(e))))/Math.LN2,f=i?Math.ceil(u/i)*i:u,r=n._limitZoom(t+(this._delta>0?f:-f))-t;(this._delta=0,this._startTime=null,r)&&(n.options.scrollWheelZoom==="center"?n.setZoom(t+r):n.setZoomAround(this._lastMousePos,t+r))}});f.addInitHook("addHandler","scrollWheelZoom",ts);f.mergeOptions({tap:!0,tapTolerance:15});is=lt.extend({addHooks:function(){r(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){w(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(n.touches){if(ot(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1;clearTimeout(this._holdTimeout);return}var u=n.touches[0],f=u.target;this._startPos=this._newPos=new t(u.clientX,u.clientY);f.tagName&&f.tagName.toLowerCase()==="a"&&i(f,"leaflet-active");this._holdTimeout=setTimeout(c(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",u))},this),1e3);this._simulateEvent("mousedown",u);r(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),w(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var i=n.changedTouches[0],t=i.target;t&&t.tagName&&t.tagName.toLowerCase()==="a"&&p(t,"leaflet-active");this._simulateEvent("mouseup",i);this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var i=n.touches[0];this._newPos=new t(i.clientX,i.clientY);this._simulateEvent("mousemove",i)},_simulateEvent:function(n,t){var i=document.createEvent("MouseEvents");i._simulated=!0;t.target._simulatedClick=!0;i.initMouseEvent(n,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null);t.target.dispatchEvent(i)}});pt&&!ct&&f.addInitHook("addHandler","tap",is);f.mergeOptions({touchZoom:pt&&!wr,bounceAtZoomLimits:!0});rs=lt.extend({addHooks:function(){i(this._map._container,"leaflet-touch-zoom");r(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){p(this._map._container,"leaflet-touch-zoom");w(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var t=this._map,i,u;!n.touches||n.touches.length!==2||t._animatingZoom||this._zooming||(i=t.mouseEventToContainerPoint(n.touches[0]),u=t.mouseEventToContainerPoint(n.touches[1]),this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(u)._divideBy(2))),this._startDist=i.distanceTo(u),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),r(document,"touchmove",this._onTouchMove,this),r(document,"touchend",this._onTouchEnd,this),ot(n))},_onTouchMove:function(n){var r,e;if(n.touches&&n.touches.length===2&&this._zooming){var t=this._map,u=t.mouseEventToContainerPoint(n.touches[0]),f=t.mouseEventToContainerPoint(n.touches[1]),i=u.distanceTo(f)/this._startDist;if(this._zoom=t.getScaleZoom(i,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&i<1||this._zoom>t.getMaxZoom()&&i>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,i===1)return}else{if(r=u._add(f)._divideBy(2)._subtract(this._centerPoint),i===1&&r.x===0&&r.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0);nt(this._animRequest);e=c(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=g(e,this,!0);ot(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1;nt(this._animRequest);w(document,"touchmove",this._onTouchMove);w(document,"touchend",this._onTouchEnd);this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});f.addInitHook("addHandler","touchZoom",rs);f.BoxZoom=bo;f.DoubleClickZoom=ko;f.Drag=go;f.Keyboard=ns;f.ScrollWheelZoom=ts;f.Tap=is;f.TouchZoom=rs;Object.freeze=us;n.version="1.3.4";n.Control=st;n.control=fr;n.Browser=kc;n.Evented=bi;n.Mixin=vl;n.Util=cs;n.Class=gt;n.Handler=lt;n.extend=s;n.bind=c;n.stamp=o;n.setOptions=l;n.DomEvent=sl;n.DomUtil=sh;n.PosAnimation=ah;n.Draggable=ci;n.LineUtil=ic;n.PolyUtil=kl;n.Point=t;n.point=u;n.Bounds=v;n.bounds=yt;n.Transformation=bf;n.transformation=yr;n.Projection=dl;n.LatLng=h;n.latLng=y;n.LatLngBounds=it;n.latLngBounds=k;n.CRS=ni;n.GeoJSON=dt;n.geoJSON=ec;n.geoJson=ha;n.Layer=rt;n.LayerGroup=er;n.layerGroup=ta;n.FeatureGroup=ai;n.featureGroup=ia;n.ImageOverlay=ao;n.imageOverlay=ca;n.VideoOverlay=oc;n.videoOverlay=la;n.DivOverlay=ri;n.Popup=hr;n.popup=aa;n.Tooltip=yi;n.tooltip=sc;n.Icon=or;n.icon=ra;n.DivIcon=vo;n.divIcon=va;n.Marker=uu;n.marker=ua;n.TileLayer=pi;n.tileLayer=hc;n.GridLayer=cr;n.gridLayer=ya;n.SVG=ou;n.svg=lc;n.Renderer=at;n.Canvas=po;n.canvas=cc;n.Path=ii;n.CircleMarker=fu;n.circleMarker=fa;n.Circle=rf;n.circle=ea;n.Polyline=kt;n.polyline=oa;n.Polygon=vi;n.polygon=sa;n.Rectangle=wo;n.rectangle=ba;n.Map=f;n.map=hl;ac=window.L;n.noConflict=function(){return window.L=ac,this};window.L=n})},function(n,t,i){"use strict";var r=i(0),u=i(6);t.a=function(n){return Math.abs(n)<r.b?n:n-i.i(u.a)(n)*Math.PI}},function(n,t){"use strict";t.a=function(n){return n<0?-1:1}},function(n,t){"use strict";t.a=function(n){return 1-.25*n*(1+n/16*(3+1.25*n))}},function(n,t){"use strict";t.a=function(n){return.375*n*(1+.25*n*(1+.46875*n))}},function(n,t){"use strict";t.a=function(n){return.05859375*n*n*(1+.75*n)}},function(n,t){"use strict";t.a=function(n){return n*n*n*(35/3072)}},function(n,t){"use strict";t.a=function(n,t,i,r,u){return n*u-t*Math.sin(2*u)+i*Math.sin(4*u)-r*Math.sin(6*u)}},function(n,t,i){"use strict";var r=i(0);t.a=function(n,t){for(var o=.5*n,u,f,i=r.b-2*Math.atan(t),e=0;e<=15;e++)if(u=n*Math.sin(i),f=r.b-2*Math.atan(t*Math.pow((1-u)/(1+u),o))-i,i+=f,Math.abs(f)<=1e-10)return i;return-9999}},function(n,t,i){"use strict";var r=i(0);t.a=function(n,t,i){var u=n*i,f=.5*n;return u=Math.pow((1-u)/(1+u),f),Math.tan(.5*(r.b-t))/u}},function(n,t){"use strict";function r(n,t){if(n[t])return n[t];for(var u=Object.keys(n),o=t.toLowerCase().replace(i,""),f=-1,r,e;++f<u.length;)if(r=u[f],e=r.toLowerCase().replace(i,""),e===o)return n[r]}t.a=r;var i=/[\s_\-\/\(\)]/g},function(n,t,i){"use strict";function r(n,t){var o,y,a;if(!(this instanceof r))return new r(n);if(t=t||function(n){if(n)throw n;},o=i.i(e.a)(n),typeof o!="object"){t(n);return}if(y=r.projections.get(o.projName),!y){t(n);return}o.datumCode&&o.datumCode!=="none"&&(a=i.i(c.a)(s.a,o.datumCode),a&&(o.datum_params=a.towgs84?a.towgs84.split(","):null,o.ellps=a.ellipse,o.datumName=a.datumName?a.datumName:o.datumCode));o.k0=o.k0||1;o.axis=o.axis||"enu";o.ellps=o.ellps||"wgs84";var l=i.i(f.a)(o.a,o.b,o.rf,o.ellps,o.sphere),v=i.i(f.b)(l.a,l.b,l.rf,o.R_A),p=o.datum||i.i(h.a)(o.datumCode,o.datum_params,l.a,l.b,v.es,v.ep2);i.i(u.a)(this,o);i.i(u.a)(this,y);this.a=l.a;this.b=l.b;this.rf=l.rf;this.sphere=l.sphere;this.es=v.es;this.e=v.e;this.ep2=v.ep2;this.datum=p;this.init();t(null,this)}var e=i(66),u=i(63),o=i(67),f=i(62),s=i(54),h=i(59),c=i(14);r.projections=o.a;r.projections.start();t.a=r},function(n,t){"use strict";t.a=function(n,t,i){var r=t*i;return n/Math.sqrt(1-r*r)}},function(n,t){"use strict";t.a=function(n,t,i,r,u){for(var e,f=n/t,o=0;o<15;o++)if(e=(n-(t*f-i*Math.sin(2*f)+r*Math.sin(4*f)-u*Math.sin(6*f)))/(t-2*i*Math.cos(2*f)+4*r*Math.cos(4*f)-6*u*Math.cos(6*f)),f+=e,Math.abs(e)<=1e-10)return f;return NaN}},function(n,t){"use strict";t.a=function(n,t,i,r){return i*=t,t*=t,r[0]*n-i*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}},function(n,t){"use strict";t.a=function(n,t){var i;return n>1e-7?(i=n*t,(1-n*n)*(t/(1-i*i)-.5/n*Math.log((1-i)/(1+i)))):2*t}},function(n,t,i){"use strict";function f(){var i=location.search,r={},u,t,n;if(i.indexOf("?")!=-1)for(u=i.substr(1),t=u.split("&"),n=0;n<t.length;n++)r[t[n].split("=")[0]]=decodeURI(t[n].split("=")[1]);return r}function e(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(i);return t!=null?decodeURI(t[2]):null}function u(n){var s,h;n==null&&(n=o);var t=n.getBounds(),i=t.getSouthWest(),r=t.getNorthEast(),f=haoutil.math.random(i.lng*1e6,r.lng*1e6)/1e6,e=haoutil.math.random(i.lat*1e6,r.lat*1e6)/1e6;try{if(s=turf.point([f,e]),h=turf.inside(s,n.toGeoJSON()),!h)return u(n)}catch(c){}return L.latLng(e,f)}function r(n){var u,f,t,i;if(null==n||"object"!=typeof n)return n;if(n instanceof Date)return t=new Date,t.setTime(n.getTime()),t;if(n instanceof Array){for(t=[],u=0,f=n.length;u<f;++u)t[u]=r(n[u]);return t}if(typeof n=="object"){t={};for(i in n)i!="_layer"&&i!="_layers"&&i!="_parent"&&n.hasOwnProperty(i)&&(t[i]=r(n[i]));return t}return n}function s(n,t){var r,i;if(n==null)return n;for(r in t)i=t[r],(i==null||i=="Null"||i=="Unknown")&&(i=""),n=n.replace(new RegExp("{"+r+"}","gm"),i);return n}function h(n){n=Math.abs(n);var t=Math.floor(n),i=Math.floor((n-t)*60),r=Math.round((n-t)*3600%60);return t+" "+i+"'  "+r+'"'}Object.defineProperty(t,"__esModule",{value:!0});i.d(t,"getRequest",function(){return f});i.d(t,"getRequestByName",function(){return e});i.d(t,"randomLatLng",function(){return u});i.d(t,"clone",function(){return r});i.d(t,"template",function(){return s});i.d(t,"formatDegree",function(){return h});var o=L.geoJSON({type:"Feature",geometry:{type:"Polygon",coordinates:[[[114.02709960937501,22.59372606392931],[113.59313964843751,23.039297747769741],[113.48327636718751,22.253512814974744],[110.24230957031251,21.401933838235188],[107.88574218750001,22.522705703482472],[105.27099609375,23.664650731631625],[104.0625,22.998851594142923],[99.931640625000014,22.471954507739227],[98.854980468750014,25.025884063244828],[99.84375,29.065772888415406],[92.570800781250014,28.652030630362258],[85.539550781250014,29.219302076779456],[80.617675781250014,31.690781806136822],[79.69482421875,34.903952965590065],[75.498046875000014,37.265309955618747],[74.959716796875014,39.453161128073937],[81.826171875000014,42.747012173180671],[81.5185546875,44.253068659281773],[84.045410156250014,46.042735653846506],[87.725830078125014,48.026672195436014],[90.5712890625,45.104546309768729],[96.459960937500014,42.326062444562019],[105.71044921875001,41.195189829489593],[112.0166015625,42.843751326290231],[117.02636718750001,45.736859547360488],[120.60791015625,46.558860303117193],[117.83935546875001,48.922499263758255],[122.65136718750001,53.107216691893427],[127.13378906250001,49.539469007935338],[130.97900390625003,47.368594345213374],[134.45068359375003,48.019324184801185],[131.11083984375003,45.521743896993634],[130.51757812500003,43.197167282501276],[126.46362304687501,41.89409955811395],[121.94824218750001,39.26628442213066],[122.54150390625001,40.55554790286314],[121.70654296875001,41.195189829489593],[119.46533203125001,39.985538414809746],[118.64135742187501,39.206718844918505],[117.52075195312501,39.342794408952386],[117.43286132812501,38.410558250946089],[118.56445312500001,37.596824001083668],[119.080810546875,36.967449464169341],[120.81665039062501,37.326488613342086],[122.40966796875001,37.221580458386491],[120.05859375000001,36.350527005427658],[118.88305664062501,35.101934057246083],[120.47607421875001,33.422272258866045],[120.66284179687501,31.784216884487385],[121.81640625000001,30.996445897426373],[120.36621093750001,30.477082932837682],[121.28906250000001,29.190532832294579],[120.30029296875001,27.313213898568261],[119.102783203125,26.52956523826758],[118.45458984375001,24.9163314045991],[116.71875000000001,23.805449612314625],[115.04882812500001,22.847070687839079],[114.02709960937501,22.59372606392931]]]}}).getLayers()[0]},function(n,t){"use strict";function a(n,t){return t=t||5,g(k({lat:n[1],lon:n[0]}),t)}function b(n){var t=s(w(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function v(n){var t=s(w(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function o(n){return n*(Math.PI/180)}function y(n){return 180*(n/Math.PI)}function k(n){var s=n.lat,r=n.lon,v=6378137,t=.00669438,y=.9996,p,c,l,f,h,i,w,u=o(s),g=o(r),b,e,k,a;return e=Math.floor((r+180)/6)+1,r===180&&(e=60),s>=56&&s<64&&r>=3&&r<12&&(e=32),s>=72&&s<84&&(r>=0&&r<9?e=31:r>=9&&r<21?e=33:r>=21&&r<33?e=35:r>=33&&r<42&&(e=37)),p=(e-1)*6-177,b=o(p),c=t/(1-t),l=v/Math.sqrt(1-t*Math.sin(u)*Math.sin(u)),f=Math.tan(u)*Math.tan(u),h=c*Math.cos(u)*Math.cos(u),i=Math.cos(u)*(g-b),w=v*((1-t/4-3*t*t/64-5*t*t*t/256)*u-(3*t/8+3*t*t/32+45*t*t*t/1024)*Math.sin(2*u)+(15*t*t/256+45*t*t*t/1024)*Math.sin(4*u)-35*t*t*t/3072*Math.sin(6*u)),k=y*l*(i+(1-f+h)*i*i*i/6+(5-18*f+f*f+72*h-58*c)*i*i*i*i*i/120)+5e5,a=y*(w+l*Math.tan(u)*(i*i/2+(5-f+9*h+4*h*h)*i*i*i*i/24+(61-58*f+f*f+600*h-330*c)*i*i*i*i*i*i/720)),s<0&&(a+=1e7),{northing:Math.round(a),easting:Math.round(k),zoneNumber:e,zoneLetter:d(s)}}function s(n){var it=n.northing,rt=n.easting,ut=n.zoneLetter,a=n.zoneNumber,c,l,w,b;if(a<0||a>60)return null;var k=.9996,v=6378137,i=.00669438,o,r=(1-Math.sqrt(1-i))/(1+Math.sqrt(1-i)),p,e,f,d,t,g,nt,h,u,ft=rt-5e5,tt=it;return ut<"N"&&(tt-=1e7),nt=(a-1)*6-177,o=i/(1-i),g=tt/k,h=g/(v*(1-i/4-3*i*i/64-5*i*i*i/256)),u=h+(3*r/2-27*r*r*r/32)*Math.sin(2*h)+(21*r*r/16-55*r*r*r*r/32)*Math.sin(4*h)+151*r*r*r/96*Math.sin(6*h),p=v/Math.sqrt(1-i*Math.sin(u)*Math.sin(u)),e=Math.tan(u)*Math.tan(u),f=o*Math.cos(u)*Math.cos(u),d=v*(1-i)/Math.pow(1-i*Math.sin(u)*Math.sin(u),1.5),t=ft/(p*k),c=u-p*Math.tan(u)/d*(t*t/2-(5+3*e+10*f-4*f*f-9*o)*t*t*t*t/24+(61+90*e+298*f+45*e*e-252*o-3*f*f)*t*t*t*t*t*t/720),c=y(c),l=(t-(1+2*e+f)*t*t*t/6+(5-2*f+28*e-3*f*f+8*o+24*e*e)*t*t*t*t*t/120)/Math.cos(u),l=nt+y(l),n.accuracy?(b=s({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber}),w={top:b.lat,right:b.lon,bottom:c,left:l}):w={lat:c,lon:l},w}function d(n){var t="Z";return 84>=n&&n>=72?t="X":72>n&&n>=64?t="W":64>n&&n>=56?t="V":56>n&&n>=48?t="U":48>n&&n>=40?t="T":40>n&&n>=32?t="S":32>n&&n>=24?t="R":24>n&&n>=16?t="Q":16>n&&n>=8?t="P":8>n&&n>=0?t="N":0>n&&n>=-8?t="M":-8>n&&n>=-16?t="L":-16>n&&n>=-24?t="K":-24>n&&n>=-32?t="J":-32>n&&n>=-40?t="H":-40>n&&n>=-48?t="G":-48>n&&n>=-56?t="F":-56>n&&n>=-64?t="E":-64>n&&n>=-72?t="D":-72>n&&n>=-80&&(t="C"),t}function g(n,t){var i="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+nt(n.easting,n.northing,n.zoneNumber)+i.substr(i.length-5,t)+r.substr(r.length-5,t)}function nt(n,t,i){var r=p(i),u=Math.floor(n/1e5),f=Math.floor(t/1e5)%20;return tt(u,f,r)}function p(n){var t=n%h;return t===0&&(t=h),t}function tt(n,t,o){var p=o-1,v=c.charCodeAt(p),y=l.charCodeAt(p),s=v+n-1,h=y+t,a=!1;return s>e&&(s=s-e+u-1,a=!0),(s===i||v<i&&s>i||(s>i||v<i)&&a)&&s++,(s===r||v<r&&s>r||(s>r||v<r)&&a)&&(s++,s===i&&s++),s>e&&(s=s-e+u-1),h>f?(h=h-f+u-1,a=!0):a=!1,(h===i||y<i&&h>i||(h>i||y<i)&&a)&&h++,(h===r||y<r&&h>r||(h>r||y<r)&&a)&&(h++,h===i&&h++),h>f&&(h=h-f+u-1),String.fromCharCode(s)+String.fromCharCode(h)}function w(n){var e,i,s;if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var h=n.length,f=null,c="",l,t=0;!/[A-Z]/.test(l=n.charAt(t));){if(t>=2)throw"MGRSPoint bad conversion from: "+n;c+=l;t++}if(e=parseInt(c,10),t===0||t+3>h)throw"MGRSPoint bad conversion from: "+n;if(i=n.charAt(t++),i<="A"||i==="B"||i==="Y"||i>="Z"||i==="I"||i==="O")throw"MGRSPoint zone letter "+i+" not handled: "+n;f=n.substring(t,t+=2);for(var a=p(e),g=it(f.charAt(0),a),o=rt(f.charAt(1),a);o<ut(i);)o+=2e6;if(s=h-t,s%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+n;var r=s/2,v=0,y=0,u,w,b,k,d;return r>0&&(u=1e5/Math.pow(10,r),w=n.substring(t,t+r),v=parseFloat(w)*u,b=n.substring(t+r),y=parseFloat(b)*u),k=v+g,d=y+o,{easting:k,northing:d,zoneLetter:i,zoneNumber:e,accuracy:u}}function it(n,t){for(var f=c.charCodeAt(t-1),o=1e5,s=!1;f!==n.charCodeAt(0);){if(f++,f===i&&f++,f===r&&f++,f>e){if(s)throw"Bad character: "+n;f=u;s=!0}o+=1e5}return o}function rt(n,t){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var e=l.charCodeAt(t-1),o=0,s=!1;e!==n.charCodeAt(0);){if(e++,e===i&&e++,e===r&&e++,e>f){if(s)throw"Bad character: "+n;e=u;s=!0}o+=1e5}return o}function ut(n){var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+n;}t.c=a;t.b=v;var h=6,c="AJSAJS",l="AFAFAF",u=65,i=73,r=79,f=86,e=90;t.a={forward:a,inverse:b,toPoint:v}},function(n,t){"use strict";t.a=function(n,t){n=Math.abs(n);t=Math.abs(t);var i=Math.max(n,t),r=Math.min(n,t)/(i?i:1);return i*Math.sqrt(1+Math.pow(r,2))}},function(n,t){"use strict";var f=1,e=.25,i=.046875,r=.01953125,u=.01068115234375,o=.75,s=.46875,h=.013020833333333334,c=.007120768229166667,l=.36458333333333331,a=.005696614583333333,v=.3076171875;t.a=function(n){var t=[],y;return t[0]=f-n*(e+n*(i+n*(r+n*u))),t[1]=n*(o-n*(i+n*(r+n*u))),y=n*n,t[2]=y*(s-n*(h+n*c)),y*=n,t[3]=y*(l-n*a),t[4]=y*n*v,t}},function(n,t,i){"use strict";var r=i(18),u=i(0),f=20;t.a=function(n,t,e){for(var h,s,l=1/(1-t),o=n,c=f;c;--c)if(h=Math.sin(o),s=1-t*h*h,s=(i.i(r.a)(o,h,Math.cos(o),e)-n)*s*Math.sqrt(s)*l,o-=s,Math.abs(s)<u.c)return o;return o}},function(n,t){"use strict";t.a=function(n){var t=Math.exp(n);return(t-1/t)/2}},function(n,t){"use strict";t.a=function(n){var t={x:n[0],y:n[1]};return n.length>2&&(t.z=n[2]),n.length>3&&(t.m=n[3]),t}},function(n,t,i){"use strict";function r(n){var u=this,t;if(arguments.length===2)t=arguments[1],r[n]=typeof t=="string"?t.charAt(0)==="+"?i.i(f.a)(arguments[1]):i.i(e.a)(arguments[1]):t;else if(arguments.length===1){if(Array.isArray(n))return n.map(function(n){Array.isArray(n)?r.apply(u,n):r(n)});if(typeof n=="string"){if(n in r)return r[n]}else"EPSG"in n?r["EPSG:"+n.EPSG]=n:"ESRI"in n?r["ESRI:"+n.ESRI]=n:"IAU2000"in n?r["IAU2000:"+n.IAU2000]=n:console.log(n);return}}var u=i(64),f=i(28),e=i(31);i.i(u.a)(r);t.a=r},function(n,t,i){"use strict";var r=i(0),f=i(56),e=i(57),u=i(14);t.a=function(n){var t={},c=n.split("+").map(function(n){return n.trim()}).filter(function(n){return n}).reduce(function(n,t){var i=t.split("=");return i.push(!0),n[i[0].toLowerCase()]=i[1],n},{}),o,s,h,l={proj:"projName",datum:"datumCode",rf:function(n){t.rf=parseFloat(n)},lat_0:function(n){t.lat0=n*r.d},lat_1:function(n){t.lat1=n*r.d},lat_2:function(n){t.lat2=n*r.d},lat_ts:function(n){t.lat_ts=n*r.d},lon_0:function(n){t.long0=n*r.d},lon_1:function(n){t.long1=n*r.d},lon_2:function(n){t.long2=n*r.d},alpha:function(n){t.alpha=parseFloat(n)*r.d},lonc:function(n){t.longc=n*r.d},x_0:function(n){t.x0=parseFloat(n)},y_0:function(n){t.y0=parseFloat(n)},k_0:function(n){t.k0=parseFloat(n)},k:function(n){t.k0=parseFloat(n)},a:function(n){t.a=parseFloat(n)},b:function(n){t.b=parseFloat(n)},r_a:function(){t.R_A=!0},zone:function(n){t.zone=parseInt(n,10)},south:function(){t.utmSouth=!0},towgs84:function(n){t.datum_params=n.split(",").map(function(n){return parseFloat(n)})},to_meter:function(n){t.to_meter=parseFloat(n)},units:function(n){t.units=n;var r=i.i(u.a)(e.a,n);r&&(t.to_meter=r.to_meter)},from_greenwich:function(n){t.from_greenwich=n*r.d},pm:function(n){var e=i.i(u.a)(f.a,n);t.from_greenwich=(e?e:parseFloat(n))*r.d},nadgrids:function(n){n==="@null"?t.datumCode="none":t.nadgrids=n},axis:function(n){var i="ewnsud";n.length===3&&i.indexOf(n.substr(0,1))!==-1&&i.indexOf(n.substr(1,1))!==-1&&i.indexOf(n.substr(2,1))!==-1&&(t.axis=n)}};for(o in c)s=c[o],o in l?(h=l[o],typeof h=="function"?h(s):t[h]=s):t[o]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}},function(n,t,i){"use strict";function c(){var u;if(this.es===undefined||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.cgb=[];this.cbg=[];this.utg=[];this.gtu=[];var f=this.es/(1+Math.sqrt(1-this.es)),n=f/(2-f),t=n;this.cgb[0]=n*(2+n*(-2/3+n*(-2+n*(116/45+n*(26/45+n*(-2854/675))))));this.cbg[0]=n*(-2+n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725))))));t=t*n;this.cgb[1]=t*(7/3+n*(-8/5+n*(-227/45+n*(2704/315+n*(2323/945)))));this.cbg[1]=t*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945)))));t=t*n;this.cgb[2]=t*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835))));this.cbg[2]=t*(-26/15+n*(34/21+n*(8/5+n*(-12686/2835))));t=t*n;this.cgb[3]=t*(4279/630+n*(-332/35+n*(-399572/14175)));this.cbg[3]=t*(1237/630+n*(-12/5+n*(-24832/14175)));t=t*n;this.cgb[4]=t*(4174/315+n*(-144838/6237));this.cbg[4]=t*(-734/315+n*(109598/31185));t=t*n;this.cgb[5]=t*(601676/22275);this.cbg[5]=t*(444337/155925);t=Math.pow(n,2);this.Qn=this.k0/(1+n)*(1+t*(1/4+t*(1/64+t/256)));this.utg[0]=n*(-.5+n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800))))));this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800))))));this.utg[1]=t*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720)))));this.gtu[1]=t*(13/48+n*(-3/5+n*(557/1440+n*(281/630+n*(-1983433/1935360)))));t=t*n;this.utg[2]=t*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720))));this.gtu[2]=t*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440))));t=t*n;this.utg[3]=t*(-4397/161280+n*(11/504+n*(830251/7257600)));this.gtu[3]=t*(49561/161280+n*(-179/168+n*(6601661/7257600)));t=t*n;this.utg[4]=t*(-4583/161280+n*(108847/3991680));this.gtu[4]=t*(34729/80640+n*(-3418889/1995840));t=t*n;this.utg[5]=t*(-20648693/638668800);this.gtu[5]=t*(212378941/319334400);u=i.i(r.a)(this.cbg,this.lat0);this.Zb=-this.Qn*(u+i.i(h.a)(this.gtu,2*u))}function l(n){var t=i.i(e.a)(n.x-this.long0),o=n.y,c,l,a;o=i.i(r.a)(this.cbg,o);var v=Math.sin(o),h=Math.cos(o),p=Math.sin(t),y=Math.cos(t);return o=Math.atan2(v,y*h),t=Math.atan2(p*h,i.i(u.a)(v,h*y)),t=i.i(s.a)(Math.tan(t)),c=i.i(f.a)(this.gtu,2*o,2*t),o=o+c[0],t=t+c[1],Math.abs(t)<=2.623395162778?(l=this.a*this.Qn*t+this.x0,a=this.a*(this.Qn*o+this.Zb)+this.y0):(l=Infinity,a=Infinity),n.x=l,n.y=a,n}function a(n){var t=(n.x-this.x0)*(1/this.a),s=(n.y-this.y0)*(1/this.a),h,c,l;if(s=(s-this.Zb)/this.Qn,t=t/this.Qn,Math.abs(t)<=2.623395162778){l=i.i(f.a)(this.utg,2*s,2*t);s=s+l[0];t=t+l[1];t=Math.atan(i.i(o.a)(t));var p=Math.sin(s),v=Math.cos(s),y=Math.sin(t),a=Math.cos(t);s=Math.atan2(p*a,i.i(u.a)(y,a*v));t=Math.atan2(y,a*v);h=i.i(e.a)(t+this.long0);c=i.i(r.a)(this.cgb,s)}else h=Infinity,c=Infinity;return n.x=h,n.y=c,n}var o=i(25),u=i(22),s=i(46),r=i(50),h=i(47),f=i(48),e=i(1);t.a={init:c,forward:l,inverse:a,names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]}},function(n,t,i){"use strict";function c(n,t){return(n.datum.datum_type===r.i||n.datum.datum_type===r.j)&&t.datumCode!=="WGS84"||(t.datum.datum_type===r.i||t.datum.datum_type===r.j)&&n.datumCode!=="WGS84"}function f(n,t,l){var a;return(Array.isArray(l)&&(l=i.i(s.a)(l)),i.i(h.a)(l),n.datum&&t.datum&&c(n,t)&&(a=new o.a("WGS84"),l=f(n,a,l),n=a),n.axis!=="enu"&&(l=i.i(u.a)(n,!1,l)),n.projName==="longlat"?l={x:l.x*r.d,y:l.y*r.d}:(n.to_meter&&(l={x:l.x*n.to_meter,y:l.y*n.to_meter}),l=n.inverse(l)),n.from_greenwich&&(l.x+=n.from_greenwich),l=i.i(e.a)(n.datum,t.datum,l),t.from_greenwich&&(l={x:l.x-t.from_greenwich,y:l.y}),t.projName==="longlat"?l={x:l.x*r.a,y:l.y*r.a}:(l=t.forward(l),t.to_meter&&(l={x:l.x/t.to_meter,y:l.y/t.to_meter})),t.axis!=="enu")?i.i(u.a)(t,!0,l):l}t.a=f;var r=i(0),e=i(61),u=i(43),o=i(15),s=i(26),h=i(44)},function(n,t,i){"use strict";function o(n,t){var i=t[0],r=t[1];!(i in n)&&r in n&&(n[i]=n[r],t.length===3&&(n[i]=t[2](n[i])))}function r(n){return n*e}function s(n){function i(t){var i=n.to_meter||1;return t*i}var t,u,f;n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):n.projName=typeof n.PROJECTION=="object"?Object.keys(n.PROJECTION)[0]:n.PROJECTION;n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));t=n.GEOGCS;n.type==="GEOGCS"&&(t=n);t&&(n.datumCode=t.DATUM?t.DATUM.name.toLowerCase():t.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n.datumCode==="new_zealand_geodetic_datum_1949"||n.datumCode==="new_zealand_1949")&&(n.datumCode="nzgd49"),n.datumCode==="wgs_1984"&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode.slice(-6)==="_ferro"&&(n.datumCode=n.datumCode.slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(n.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=t.DATUM.SPHEROID.a,n.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),t.DATUM&&t.DATUM.TOWGS84&&(n.datum_params=t.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93"));n.b&&!isFinite(n.b)&&(n.b=n.a);u=function(t){return o(n,t)};f=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",r],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",r],["lat0","latitude_of_origin",r],["lat0","standard_parallel_1",r],["lat1","standard_parallel_1",r],["lat2","standard_parallel_2",r],["azimuth","Azimuth"],["alpha","azimuth",r],["srsCode","name"]];f.forEach(u);!n.long0&&n.longc&&(n.projName==="Albers_Conic_Equal_Area"||n.projName==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc);!n.lat_ts&&n.lat1&&(n.projName==="Stereographic_South_Pole"||n.projName==="Polar Stereographic (variant B)")&&(n.lat0=r(n.lat1>0?90:-90),n.lat_ts=n.lat1)}var u=i(99),f=i(100),e=.017453292519943295;t.a=function(n){var t=i.i(u.a)(n),e=t.shift(),o=t.shift(),r;return t.unshift(["name",o]),t.unshift(["type",e]),r={},i.i(f.a)(t,r),s(r),r}},function(n,t){var i,u,r;(function(f,e){!(u=[],i=e,r=typeof i=="function"?i.apply(t,u):i,r!==undefined&&(n.exports=r))})(this,function(){var r=3.1415926535897931*3e3/180,n=3.1415926535897931,t=6378245,i=.0066934216229659433,u=function(n){var s=Number(n[0]),h=Number(n[1]),f=3.1415926535897931*3e3/180,t=s-.0065,i=h-.006,e=Math.sqrt(t*t+i*i)-2e-5*Math.sin(i*f),o=Math.atan2(i,t)-3e-6*Math.cos(t*f),r=e*Math.cos(o),u=e*Math.sin(o);return r=Number(r.toFixed(6)),u=Number(u.toFixed(6)),[r,u]},f=function(n){var t=Number(n[0]),i=Number(n[1]),e=Math.sqrt(t*t+i*i)+2e-5*Math.sin(i*r),o=Math.atan2(i,t)+3e-6*Math.cos(t*r),u=e*Math.cos(o)+.0065,f=e*Math.sin(o)+.006;return u=Number(u.toFixed(6)),f=Number(f.toFixed(6)),[u,f]},e=function(r){var f=Number(r[0]),u=Number(r[1]),y,o,l;if(c(f,u))return[f,u];var a=s(f-105,u-35),v=h(f-105,u-35),p=u/180*n,e=Math.sin(p);return e=1-i*e*e,y=Math.sqrt(e),a=a*180/(t*(1-i)/(e*y)*n),v=v*180/(t/y*Math.cos(p)*n),o=u+a,l=f+v,l=Number(l.toFixed(6)),o=Number(o.toFixed(6)),[l,o]},o=function(r){var f=Number(r[0]),u=Number(r[1]),y,o,l;if(c(f,u))return[f,u];var a=s(f-105,u-35),v=h(f-105,u-35),p=u/180*n,e=Math.sin(p);return e=1-i*e*e,y=Math.sqrt(e),a=a*180/(t*(1-i)/(e*y)*n),v=v*180/(t/y*Math.cos(p)*n),mglat=u+a,mglng=f+v,o=f*2-mglng,l=u*2-mglat,o=Number(o.toFixed(6)),l=Number(l.toFixed(6)),[o,l]},l=function(n){return o(u(n))},a=function(n){return f(e(n))},s=function(t,i){var r=-100+2*t+3*i+.2*i*i+.1*t*i+.2*Math.sqrt(Math.abs(t));return r+=(20*Math.sin(6*t*n)+20*Math.sin(2*t*n))*2/3,r+=(20*Math.sin(i*n)+40*Math.sin(i/3*n))*2/3,r+(160*Math.sin(i/12*n)+320*Math.sin(i*n/30))*2/3},h=function(t,i){var r=300+t+2*i+.1*t*t+.1*t*i+.1*Math.sqrt(Math.abs(t));return r+=(20*Math.sin(6*t*n)+20*Math.sin(2*t*n))*2/3,r+=(20*Math.sin(t*n)+40*Math.sin(t/3*n))*2/3,r+(150*Math.sin(t/12*n)+300*Math.sin(t/30*n))*2/3},c=function(n,t){return n<72.004||n>137.8347||t<.8293||t>55.8271||!1},v=function(t){var u=Number(t[0]),f=Number(t[1]),r=u*20037508.34/180,i=Math.log(Math.tan((90+f)*n/360))/(n/180);return i=i*20037508.34/180,r=Number(r.toFixed(2)),i=Number(i.toFixed(2)),[r,i]},y=function(t){var u=Number(t[0]),f=Number(t[1]),r=u/20037508.34*180,i=f/20037508.34*180;return i=180/n*(2*Math.atan(Math.exp(i*n/180))-n/2),r=Number(r.toFixed(6)),i=Number(i.toFixed(6)),[r,i]};return{jwd2mct:v,mct2jwd:y,bd2gcj:u,gcj2bd:f,bd2wgs:l,wgs2bd:a,wgs2gcj:e,gcj2wgs:o}})},function(n,t,i){var u=i(4),r,f;i(101);i(102);i(103);i(114);i(107);i(106);i(105);i(108);i(104);i(39);i(116);i(35);i(110);i(111);i(38);i(37);i(113);i(36);i(112);i(115);i(34);i(109);i(117);i(119);i(118);i(40);r=u;r.mars=i(121);i(127);i(41);r.widget=i(128).default;r.widget.BaseWidget=i(126).default;f=typeof window!="undefined"?window:typeof self!="undefined"?self:{};f.L=r;console.log("Leaflet"+u.version+"  MarsGIS"+r.mars.version)},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(n,t,i){"use strict";function r(n,t,i){if(!(this instanceof r))return new r(n,t,i);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof t=="undefined"){var u=n.split(",");this.x=parseFloat(u[0],10);this.y=parseFloat(u[1],10);this.z=parseFloat(u[2],10)||0}else this.x=n,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var u=i(21);r.fromMGRS=function(n){return new r(i.i(u.b)(n))};r.prototype.toMGRS=function(n){return i.i(u.c)([this.x,this.y],n)};t.a=r},function(n,t){"use strict";t.a=function(n,t,i){for(var o=i.x,s=i.y,h=i.z||0,r,u,e={},f=0;f<3;f++)if(!t||f!==2||i.z!==undefined){f===0?(r=o,u="x"):f===1?(r=s,u="y"):(r=h,u="z");switch(n.axis[f]){case"e":e[u]=r;break;case"w":e[u]=-r;break;case"n":e[u]=r;break;case"s":e[u]=-r;break;case"u":i[u]!==undefined&&(e.z=r);break;case"d":i[u]!==undefined&&(e.z=-r);break;default:return null}}return e}},function(n,t){"use strict";function i(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers");}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers");}t.a=function(n){i(n.x);i(n.y)}},function(n,t,i){"use strict";var r=i(1);t.a=function(n,t){if(n===undefined){if(n=Math.floor((i.i(r.a)(t)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}},function(n,t,i){"use strict";var r=i(22),u=i(52);t.a=function(n){var t=Math.abs(n);return t=i.i(u.a)(t*(1+t/(i.i(r.a)(1,t)+1))),n<0?-t:t}},function(n,t){"use strict";t.a=function(n,t){for(var e=2*Math.cos(t),i=n.length-1,r=n[i],f=0,u;--i>=0;)u=-f+e*r+n[i],f=r,r=u;return Math.sin(t)*u}},function(n,t,i){"use strict";var r=i(25),u=i(49);t.a=function(n,t,f){for(var v=Math.sin(t),y=Math.cos(t),p=i.i(r.a)(f),w=i.i(u.a)(f),e=2*y*w,o=-2*v*p,a=n.length-1,s=n[a],h=0,c=0,l=0,b,k;--a>=0;)b=c,k=h,c=s,h=l,s=-b+e*c-o*h+n[a],l=-k+o*c+e*h;return e=v*w,o=y*p,[e*s-o*l,e*l+o*s]}},function(n,t){"use strict";t.a=function(n){var t=Math.exp(n);return(t+1/t)/2}},function(n,t){"use strict";t.a=function(n,t){for(var e=2*Math.cos(2*t),i=n.length-1,r=n[i],f=0,u;--i>=0;)u=-f+e*r+n[i],f=r,r=u;return t+u*Math.sin(2*t)}},function(n,t,i){"use strict";var r=i(0);t.a=function(n,t){var h=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n)),u,f,e,s,i,o;if(Math.abs(Math.abs(t)-h)<1e-6)return t<0?-1*r.b:r.b;for(u=Math.asin(.5*t),o=0;o<30;o++)if(e=Math.sin(u),s=Math.cos(u),i=n*e,f=Math.pow(1-i*i,2)/(2*s)*(t/(1-n*n)-e/(1-i*i)+.5/n*Math.log((1-i)/(1+i))),u+=f,Math.abs(f)<=1e-10)return u;return NaN}},function(n,t){"use strict";t.a=function(n){var t=1+n,i=t-1;return i===0?n:n*Math.log(t)/i}},function(n,t){"use strict";t.a=function(n,t){return Math.pow((1-n)/(1+n),t)}},function(n,t,i){"use strict";i.d(t,"a",function(){return r});var r={};r.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};r.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};r.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};r.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};r.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};r.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};r.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};r.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};r.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};r.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};r.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};r.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};r.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};r.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};r.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};r.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};r.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function(n,t,i){"use strict";var r,u;i.d(t,"a",function(){return r});i.d(t,"b",function(){return u});r={};r.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};r.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};r.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};r.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};r.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};r.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};r.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};r.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};r.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};r.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};r.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};r.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};r.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};r.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};r.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};r.clrk58={a:6378293.6452087592,rf:294.26067636926541,ellipseName:"Clarke 1858"};r.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};r.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};r.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};r.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};r.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};r.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};r.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};r.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};r.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};r.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};r.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};r.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};r.hough={a:6378270,rf:297,ellipseName:"Hough"};r.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};r.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};r.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};r.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};r.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};r.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};r.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};r.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};r.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};r.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};r.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};r.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};u=r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(n,t,i){"use strict";i.d(t,"a",function(){return r});var r={};r.greenwich=0;r.lisbon=-9.131906111111;r.paris=2.337229166667;r.bogota=-74.080916666667;r.madrid=-3.687938888889;r.rome=12.452333333333;r.bern=7.439583333333;r.jakarta=106.807719444444;r.ferro=-17.666666666667;r.brussels=4.367975;r.stockholm=18.058277777778;r.athens=23.7163375;r.oslo=10.722916666667},function(n,t){"use strict";t.a={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}},function(n,t,i){"use strict";function u(n,t,r){var u,e,o;return Array.isArray(r)?(u=i.i(f.a)(n,t,r),r.length===3?[u.x,u.y,u.z]:[u.x,u.y]):(e=i.i(f.a)(n,t,r),o=Object.keys(r),o.length===2)?e:(o.forEach(function(n){n!=="x"&&n!=="y"&&(e[n]=r[n])}),e)}function o(n){return n instanceof r.a?n:n.oProj?n.oProj:i.i(r.a)(n)}function s(n,t,i){n=o(n);var r=!1,f;return typeof t=="undefined"?(t=n,n=e,r=!0):(typeof t.x!="undefined"||Array.isArray(t))&&(i=t,t=n,n=e,r=!0),t=o(t),i?u(n,t,i):(f={forward:function(i){return u(n,t,i)},inverse:function(i){return u(t,n,i)}},r&&(f.oProj=t),f)}var r=i(15),f=i(30),e=i.i(r.a)("WGS84");t.a=s},function(n,t,i){"use strict";function u(n,t,i,u,f,e){var o={};return o.datum_type=n===undefined||n==="none"?r.k:r.l,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=r.i),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=r.j,o.datum_params[3]*=r.h,o.datum_params[4]*=r.h,o.datum_params[5]*=r.h,o.datum_params[6]=o.datum_params[6]/1e6+1)),o.a=i,o.b=u,o.es=f,o.ep2=e,o}var r=i(0);t.a=u},function(n,t,i){"use strict";function u(n,t){return n.datum_type!==t.datum_type?!1:n.a!==t.a||Math.abs(n.es-t.es)>5e-11?!1:n.datum_type===r.i?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]:n.datum_type===r.j?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]&&n.datum_params[3]===t.datum_params[3]&&n.datum_params[4]===t.datum_params[4]&&n.datum_params[5]===t.datum_params[5]&&n.datum_params[6]===t.datum_params[6]:!0}function f(n,t,i){var f=n.x,u=n.y,s=n.z?n.z:0,e,o,c,h;if(u<-r.b&&u>-1.001*r.b)u=-r.b;else if(u>r.b&&u<1.001*r.b)u=r.b;else{if(u<-r.b)return{x:-Infinity,y:-Infinity,z:n.z};if(u>r.b)return{x:Infinity,y:Infinity,z:n.z}}return f>Math.PI&&(f-=2*Math.PI),o=Math.sin(u),h=Math.cos(u),c=o*o,e=i/Math.sqrt(1-t*c),{x:(e+s)*h*Math.cos(f),y:(e+s)*h*Math.sin(f),z:(e*(1-t)+s)*o}}function e(n,t,i,u){var c=1e-12,ut=c*c,l,a,g,e,o,v,y,p,f,w,b,nt,tt,s=n.x,h=n.y,k=n.z?n.z:0,it,rt,d;if(l=Math.sqrt(s*s+h*h),a=Math.sqrt(s*s+h*h+k*k),l/i<c){if(it=0,a/i<c)return rt=r.b,d=-u,{x:n.x,y:n.y,z:n.z}}else it=Math.atan2(h,s);g=k/a;e=l/a;o=1/Math.sqrt(1-t*(2-t)*e*e);p=e*(1-t)*o;f=g*o;tt=0;do tt++,y=i/Math.sqrt(1-t*f*f),d=l*p+k*f-y*(1-t*f*f),v=t*y/(y+d),o=1/Math.sqrt(1-v*(2-v)*e*e),w=e*(1-v)*o,b=g*o,nt=b*p-w*f,p=w,f=b;while(nt*nt>ut&&tt<30);return rt=Math.atan(b/Math.abs(w)),{x:it,y:rt,z:d}}function o(n,t,i){if(t===r.i)return{x:n.x+i[0],y:n.y+i[1],z:n.z+i[2]};if(t===r.j){var s=i[0],h=i[1],c=i[2],f=i[3],e=i[4],o=i[5],u=i[6];return{x:u*(n.x-o*n.y+e*n.z)+s,y:u*(o*n.x+n.y-f*n.z)+h,z:u*(-e*n.x+f*n.y+n.z)+c}}}function s(n,t,i){if(t===r.i)return{x:n.x-i[0],y:n.y-i[1],z:n.z-i[2]};if(t===r.j){var l=i[0],a=i[1],v=i[2],s=i[3],h=i[4],c=i[5],u=i[6],f=(n.x-l)/u,e=(n.y-a)/u,o=(n.z-v)/u;return{x:f+c*e-h*o,y:-c*f+e+s*o,z:h*f-s*e+o}}}t.a=u;t.b=f;t.e=e;t.c=o;t.d=s;var r=i(0)},function(n,t,i){"use strict";function f(n){return n===u.i||n===u.j}var u=i(0),r=i(60);t.a=function(n,t,e){return i.i(r.a)(n,t)?e:n.datum_type===u.k||t.datum_type===u.k?e:n.es===t.es&&n.a===t.a&&!f(n.datum_type)&&!f(t.datum_type)?e:(e=i.i(r.b)(e,n.es,n.a),f(n.datum_type)&&(e=i.i(r.c)(e,n.datum_type,n.datum_params)),f(t.datum_type)&&(e=i.i(r.d)(e,t.datum_type,t.datum_params)),i.i(r.e)(e,t.es,t.a,t.b))}},function(n,t,i){"use strict";function e(n,t,i,u){var e=n*n,o=t*t,f=(e-o)/e,s=0,h;return u?(n*=1-f*(r.m+f*(r.n+f*r.o)),e=n*n,f=0):s=Math.sqrt(f),h=(e-o)/o,{es:f,e:s,ep2:h}}function o(n,t,e,o,s){if(!n){var h=i.i(f.a)(u.a,o);h||(h=u.b);n=h.a;t=h.b;e=h.rf}return e&&!t&&(t=(1-1/e)*n),(e===0||Math.abs(n-t)<r.c)&&(s=!0,t=n),{a:n,b:t,rf:e,sphere:s}}t.b=e;t.a=o;var r=i(0),u=i(55),f=i(14)},function(n,t){"use strict";t.a=function(n,t){n=n||{};var i,r;if(!t)return n;for(r in t)i=t[r],i!==undefined&&(n[r]=i);return n}},function(n,t){"use strict";t.a=function(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");n.WGS84=n["EPSG:4326"];n["EPSG:3785"]=n["EPSG:3857"];n.GOOGLE=n["EPSG:3857"];n["EPSG:900913"]=n["EPSG:3857"];n["EPSG:102113"]=n["EPSG:3857"]}},function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(58),u=i(15),f=i(42),e=i(26),o=i(27),s=i(30),h=i(21),c=i(96),l=i(98);r.a.defaultDatum="WGS84";r.a.Proj=u.a;r.a.WGS84=new r.a.Proj("WGS84");r.a.Point=f.a;r.a.toPoint=e.a;r.a.defs=o.a;r.a.transform=s.a;r.a.mgrs=h.a;r.a.version=c.a;i.i(l.a)(r.a);t["default"]=r.a},function(n,t,i){"use strict";function o(n){return typeof n=="string"}function s(n){return n in u.a}function c(n){return h.some(function(t){return n.indexOf(t)>-1})}function a(n){var u=i.i(r.a)(n,"authority"),t;if(u)return t=i.i(r.a)(u,"epsg"),t&&l.indexOf(t)>-1}function v(n){var t=i.i(r.a)(n,"extension");if(t)return i.i(r.a)(t,"proj4")}function y(n){return n[0]==="+"}function p(n){var t,r;if(o(n)){if(s(n))return u.a[n];if(c(n))return(t=i.i(e.a)(n),a(t))?u.a["EPSG:3857"]:(r=v(t),r)?i.i(f.a)(r):t;if(y(n))return i.i(f.a)(n)}else return n}var u=i(27),e=i(31),f=i(28),r=i(14),h=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],l=["3857","900913","3785","102113"];t.a=p},function(n,t,i){"use strict";function f(n,t){var i=u.length;return n.names?(u[i]=n,n.names.forEach(function(n){r[n.toLowerCase()]=i}),this):(console.log(t),!0)}function h(n){if(!n)return!1;var t=n.toLowerCase();if(typeof r[t]!="undefined"&&u[r[t]])return u[r[t]]}function c(){s.forEach(f)}var e=i(80),o=i(79),s=[e.a,o.a],r={},u=[];t.a={start:c,add:f,get:h}},function(n,t,i){"use strict";function s(){Math.abs(this.lat1+this.lat2)<u.c||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=i.i(f.a)(this.e3,this.sin_po,this.cos_po),this.qs1=i.i(r.a)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=i.i(f.a)(this.e3,this.sin_po,this.cos_po),this.qs2=i.i(r.a)(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=i.i(r.a)(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>u.c?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function h(n){var o=n.x,t=n.y;this.sin_phi=Math.sin(t);this.cos_phi=Math.cos(t);var s=i.i(r.a)(this.e3,this.sin_phi,this.cos_phi),u=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,f=this.ns0*i.i(e.a)(o-this.long0),h=u*Math.sin(f)+this.x0,c=this.rh-u*Math.cos(f)+this.y0;return n.x=h,n.y=c,n}function c(n){var r,o,t,u,s,f;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(r=Math.sqrt(n.x*n.x+n.y*n.y),t=1):(r=-Math.sqrt(n.x*n.x+n.y*n.y),t=-1),u=0,r!==0&&(u=Math.atan2(t*n.x,t*n.y)),t=r*this.ns0/this.a,this.sphere?f=Math.asin((this.c-t*t)/(2*this.ns0)):(o=(this.c-t*t)/this.ns0,f=this.phi1z(this.e3,o)),s=i.i(e.a)(u/this.ns0+this.long0),n.x=s,n.y=f,n}function l(n,t){var s,l,f,e,h,r=i.i(o.a)(.5*t),a,c;if(n<u.c)return r;for(a=n*n,c=1;c<=25;c++)if(s=Math.sin(r),l=Math.cos(r),f=n*s,e=1-f*f,h=.5*e*e/l*(t/(1-a)-s/e+.5/n*Math.log((1-f)/(1+f))),r=r+h,Math.abs(h)<=1e-7)return r;return null}var f=i(3),r=i(19),e=i(1),o=i(2),u=i(0);t.a={init:s,forward:h,inverse:c,names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:l}},function(n,t,i){"use strict";function v(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)}function y(n){var wt=n.x,p=n.y,rt=Math.sin(n.y),d=Math.cos(n.y),t=i.i(u.a)(wt-this.long0),g,nt,tt,it,w,b,at,et,vt,l,a,ut,ft,ot,v,k,st,yt,y,ht,ct,lt,pt;return this.sphere?Math.abs(this.sin_p12-1)<=r.c?(n.x=this.x0+this.a*(r.b-p)*Math.sin(t),n.y=this.y0-this.a*(r.b-p)*Math.cos(t),n):Math.abs(this.sin_p12+1)<=r.c?(n.x=this.x0+this.a*(r.b+p)*Math.sin(t),n.y=this.y0+this.a*(r.b+p)*Math.cos(t),n):(yt=this.sin_p12*rt+this.cos_p12*d*Math.cos(t),k=Math.acos(yt),st=k/Math.sin(k),n.x=this.x0+this.a*st*d*Math.sin(t),n.y=this.y0+this.a*st*(this.cos_p12*rt-this.sin_p12*d*Math.cos(t)),n):(g=i.i(o.a)(this.es),nt=i.i(s.a)(this.es),tt=i.i(h.a)(this.es),it=i.i(c.a)(this.es),Math.abs(this.sin_p12-1)<=r.c?(w=this.a*i.i(f.a)(g,nt,tt,it,r.b),b=this.a*i.i(f.a)(g,nt,tt,it,p),n.x=this.x0+(w-b)*Math.sin(t),n.y=this.y0-(w-b)*Math.cos(t),n):Math.abs(this.sin_p12+1)<=r.c?(w=this.a*i.i(f.a)(g,nt,tt,it,r.b),b=this.a*i.i(f.a)(g,nt,tt,it,p),n.x=this.x0+(w+b)*Math.sin(t),n.y=this.y0+(w+b)*Math.cos(t),n):(at=rt/d,et=i.i(e.a)(this.a,this.e,this.sin_p12),vt=i.i(e.a)(this.a,this.e,rt),l=Math.atan((1-this.es)*at+this.es*et*this.sin_p12/(vt*d)),a=Math.atan2(Math.sin(t),this.cos_p12*Math.tan(l)-this.sin_p12*Math.cos(t)),y=a===0?Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.abs(Math.abs(a)-Math.PI)<=r.c?-Math.asin(this.cos_p12*Math.sin(l)-this.sin_p12*Math.cos(l)):Math.asin(Math.sin(t)*Math.cos(l)/Math.sin(a)),ut=this.e*this.sin_p12/Math.sqrt(1-this.es),ft=this.e*this.cos_p12*Math.cos(a)/Math.sqrt(1-this.es),ot=ut*ft,v=ft*ft,ht=y*y,ct=ht*y,lt=ct*y,pt=lt*y,k=et*y*(1-ht*v*(1-v)/6+ct/8*ot*(1-2*v)+lt/120*(v*(4-7*v)-3*ut*ut*(1-7*v))-pt/48*ot),n.x=this.x0+k*Math.sin(a),n.y=this.y0+k*Math.cos(a),n))}function p(n){n.x-=this.x0;n.y-=this.y0;var t,et,tt,ot,v,y,ct,b,k,d,g,it,rt,lt,ut,st,ft,ht,w,at,nt,p,vt;return this.sphere?(t=Math.sqrt(n.x*n.x+n.y*n.y),t>2*r.b*this.a)?void 0:(et=t/this.a,tt=Math.sin(et),ot=Math.cos(et),v=this.long0,Math.abs(t)<=r.c?y=this.lat0:(y=i.i(a.a)(ot*this.sin_p12+n.y*tt*this.cos_p12/t),ct=Math.abs(this.lat0)-r.b,v=Math.abs(ct)<=r.c?this.lat0>=0?i.i(u.a)(this.long0+Math.atan2(n.x,-n.y)):i.i(u.a)(this.long0-Math.atan2(-n.x,n.y)):i.i(u.a)(this.long0+Math.atan2(n.x*tt,t*this.cos_p12*ot-n.y*this.sin_p12*tt))),n.x=v,n.y=y,n):(b=i.i(o.a)(this.es),k=i.i(s.a)(this.es),d=i.i(h.a)(this.es),g=i.i(c.a)(this.es),Math.abs(this.sin_p12-1)<=r.c?(it=this.a*i.i(f.a)(b,k,d,g,r.b),t=Math.sqrt(n.x*n.x+n.y*n.y),rt=it-t,y=i.i(l.a)(rt/this.a,b,k,d,g),v=i.i(u.a)(this.long0+Math.atan2(n.x,-1*n.y)),n.x=v,n.y=y,n):Math.abs(this.sin_p12+1)<=r.c?(it=this.a*i.i(f.a)(b,k,d,g,r.b),t=Math.sqrt(n.x*n.x+n.y*n.y),rt=t-it,y=i.i(l.a)(rt/this.a,b,k,d,g),v=i.i(u.a)(this.long0+Math.atan2(n.x,n.y)),n.x=v,n.y=y,n):(t=Math.sqrt(n.x*n.x+n.y*n.y),st=Math.atan2(n.x,n.y),lt=i.i(e.a)(this.a,this.e,this.sin_p12),ft=Math.cos(st),ht=this.e*this.cos_p12*ft,w=-ht*ht/(1-this.es),at=3*this.es*(1-w)*this.sin_p12*this.cos_p12*ft/(1-this.es),nt=t/lt,p=nt-w*(1+w)*Math.pow(nt,3)/6-at*(1+3*w)*Math.pow(nt,4)/24,vt=1-w*p*p/2-nt*p*p*p/6,ut=Math.asin(this.sin_p12*Math.cos(p)+this.cos_p12*Math.sin(p)*ft),v=i.i(u.a)(this.long0+Math.asin(Math.sin(st)*Math.sin(p)/Math.cos(ut))),y=Math.atan((1-this.es*vt*this.sin_p12/Math.sin(ut))*Math.tan(ut)/(1-this.es)),n.x=v,n.y=y,n))}var u=i(1),r=i(0),f=i(11),o=i(7),s=i(8),h=i(9),c=i(10),e=i(16),a=i(2),l=i(17);t.a={init:v,forward:y,inverse:p,names:["Azimuthal_Equidistant","aeqd"]}},function(n,t,i){"use strict";function v(){this.sphere||(this.e0=i.i(o.a)(this.es),this.e1=i.i(s.a)(this.es),this.e2=i.i(h.a)(this.es),this.e3=i.i(c.a)(this.es),this.ml0=this.a*i.i(u.a)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function y(n){var s,h,r=n.x,t=n.y;if(r=i.i(e.a)(r-this.long0),this.sphere)s=this.a*Math.asin(Math.cos(t)*Math.sin(r)),h=this.a*(Math.atan2(Math.tan(t),Math.cos(r))-this.lat0);else{var v=Math.sin(t),c=Math.cos(t),y=i.i(f.a)(this.a,this.e,v),l=Math.tan(t)*Math.tan(t),a=r*Math.cos(t),o=a*a,p=this.es*c*c/(1-this.es),w=this.a*i.i(u.a)(this.e0,this.e1,this.e2,this.e3,t);s=y*a*(1-o*l*(1/6-(8-l+8*p)*o/120));h=w-this.ml0+y*v/c*o*(.5+(5-l+6*p)*o/24)}return n.x=s+this.x0,n.y=h+this.y0,n}function p(n){var s,h,v,y,p,w,t;if(n.x-=this.x0,n.y-=this.y0,s=n.x/this.a,h=n.y/this.a,this.sphere)p=h+this.lat0,v=Math.asin(Math.sin(p)*Math.cos(s)),y=Math.atan2(Math.tan(s),Math.cos(p));else{if(w=this.ml0/this.a+h,t=i.i(a.a)(w,this.e0,this.e1,this.e2,this.e3),Math.abs(Math.abs(t)-r.b)<=r.c)return n.x=this.long0,n.y=r.b,h<0&&(n.y*=-1),n;var o=i.i(f.a)(this.a,this.e,Math.sin(t)),k=o*o*o/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(t),2),u=s*this.a/o,b=u*u;v=t-o*Math.tan(t)/k*u*u*(.5-(1+3*c)*u*u/24);y=u*(1-b*(c/3+(1+3*c)*c*b/15))/Math.cos(t)}return n.x=i.i(e.a)(y+this.long0),n.y=i.i(l.a)(v),n}var u=i(11),o=i(7),s=i(8),h=i(9),c=i(10),f=i(16),e=i(1),l=i(5),a=i(17),r=i(0);t.a={init:v,forward:y,inverse:p,names:["Cassini","Cassini_Soldner","cass"]}},function(n,t,i){"use strict";function o(){this.sphere||(this.k0=i.i(f.a)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function s(n){var h=n.x,e=n.y,t,f,o=i.i(r.a)(h-this.long0),s;return this.sphere?(t=this.x0+this.a*o*Math.cos(this.lat_ts),f=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts)):(s=i.i(u.a)(this.e,Math.sin(e)),t=this.x0+this.a*this.k0*o,f=this.y0+this.a*s*.5/this.k0),n.x=t,n.y=f,n}function h(n){n.x-=this.x0;n.y-=this.y0;var t,u;return this.sphere?(t=i.i(r.a)(this.long0+n.x/this.a/Math.cos(this.lat_ts)),u=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(u=i.i(e.a)(this.e,2*n.y*this.k0/this.a),t=i.i(r.a)(this.long0+n.x/(this.a*this.k0))),n.x=t,n.y=u,n}var r=i(1),u=i(19),f=i(3),e=i(51);t.a={init:o,forward:s,inverse:h,names:["cea"]}},function(n,t,i){"use strict";function f(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)}function e(n){var t=n.x,f=n.y,e=i.i(r.a)(t-this.long0),o=i.i(u.a)(f-this.lat0);return n.x=this.x0+this.a*e*this.rc,n.y=this.y0+this.a*o,n}function o(n){var t=n.x,f=n.y;return n.x=i.i(r.a)(this.long0+(t-this.x0)/(this.a*this.rc)),n.y=i.i(u.a)(this.lat0+(f-this.y0)/this.a),n}var r=i(1),u=i(5);t.a={init:f,forward:e,inverse:o,names:["Equirectangular","Equidistant_Cylindrical","eqc"]}},function(n,t,i){"use strict";function v(){Math.abs(this.lat1+this.lat2)<e.c||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i.i(o.a)(this.es),this.e1=i.i(s.a)(this.es),this.e2=i.i(h.a)(this.es),this.e3=i.i(c.a)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=i.i(f.a)(this.e,this.sinphi,this.cosphi),this.ml1=i.i(r.a)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<e.c?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=i.i(f.a)(this.e,this.sinphi,this.cosphi),this.ml2=i.i(r.a)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i.i(r.a)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function y(n){var s=n.x,f=n.y,t,e;this.sphere?t=this.a*(this.g-f):(e=i.i(r.a)(this.e0,this.e1,this.e2,this.e3,f),t=this.a*(this.g-e));var o=this.ns*i.i(u.a)(s-this.long0),h=this.x0+t*Math.sin(o),c=this.y0+this.rh-t*Math.cos(o);return n.x=h,n.y=c,n}function p(n){var r,t,f,e,o,s;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),o=0,t!==0&&(o=Math.atan2(r*n.x,r*n.y)),this.sphere?(e=i.i(u.a)(this.long0+o/this.ns),f=i.i(l.a)(this.g-t/this.a),n.x=e,n.y=f,n):(s=this.g-t/this.a,f=i.i(a.a)(s,this.e0,this.e1,this.e2,this.e3),e=i.i(u.a)(this.long0+o/this.ns),n.x=e,n.y=f,n)}var o=i(7),s=i(8),h=i(9),c=i(10),f=i(3),r=i(11),u=i(1),l=i(5),a=i(17),e=i(0);t.a={init:v,forward:y,inverse:p,names:["Equidistant_Conic","eqdc"]}},function(n,t,i){"use strict";function e(){var n=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t;this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n);this.C=Math.sqrt(1+this.es*t*t/(1-this.es));this.phic0=Math.asin(n/this.C);this.ratexp=.5*this.C*this.e;this.K=Math.tan(.5*this.phic0+r.g)/(Math.pow(Math.tan(.5*this.lat0+r.g),this.C)*i.i(u.a)(this.e*n,this.ratexp))}function o(n){var f=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+r.g),this.C)*i.i(u.a)(this.e*Math.sin(t),this.ratexp))-r.b,n.x=this.C*f,n}function s(n){for(var o=n.x/this.C,t=n.y,s=Math.pow(Math.tan(.5*t+r.g)/this.K,1/this.C),e=f;e>0;--e){if(t=2*Math.atan(s*i.i(u.a)(this.e*Math.sin(n.y),-.5*this.e))-r.b,Math.abs(t-n.y)<1e-14)break;n.y=t}return e?(n.x=o,n.y=t,n):null}var u=i(53),r=i(0),f=20;t.a={init:e,forward:o,inverse:s,names:["gauss"]}},function(n,t,i){"use strict";function e(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1e3*this.a;this.rc=1}function o(n){var e,t,o,s,h,u,c,l,v=n.x,a=n.y;return o=i.i(r.a)(v-this.long0),e=Math.sin(a),t=Math.cos(a),s=Math.cos(o),u=this.sin_p14*e+this.cos_p14*t*s,h=1,u>0||Math.abs(u)<=f.c?(c=this.x0+this.a*h*t*Math.sin(o)/u,l=this.y0+this.a*h*(this.cos_p14*e-this.sin_p14*t*s)/u):(c=this.x0+this.infinity_dist*t*Math.sin(o),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*s)),n.x=c,n.y=l,n}function s(n){var f,e,o,s,t,h;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(f=Math.sqrt(n.x*n.x+n.y*n.y))?(s=Math.atan2(f,this.rc),e=Math.sin(s),o=Math.cos(s),h=i.i(u.a)(o*this.sin_p14+n.y*e*this.cos_p14/f),t=Math.atan2(n.x*e,f*this.cos_p14*o-n.y*this.sin_p14*e),t=i.i(r.a)(this.long0+t)):(h=this.phic0,t=0),n.x=t,n.y=h,n}var r=i(1),u=i(2),f=i(0);t.a={init:e,forward:o,inverse:s,names:["gnom"]}},function(n,t,i){"use strict";function u(){this.a=6377397.155;this.es=.006674372230614;this.e=Math.sqrt(this.es);this.lat0||(this.lat0=.863937979737193);this.long0||(this.long0=.74176493209759009-.308341501185665);this.k0||(this.k0=.9999);this.s45=.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq}function f(n){var h,t,u,f,c,e,o,l=n.x,s=n.y,a=i.i(r.a)(l-this.long0);return h=Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(s/2+this.s45),this.alfa)/h)-this.s45),u=-a*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(u)),c=Math.asin(Math.cos(t)*Math.sin(u)/Math.cos(f)),e=this.n*c,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),n.y=o*Math.cos(e)/1,n.x=o*Math.sin(e)/1,this.czech||(n.y*=-1,n.x*=-1),n}function e(n){var i,o,r,f,s,h,t,e,c=n.x,u;n.x=n.y;n.y=c;this.czech||(n.y*=-1,n.x*=-1);h=Math.sqrt(n.x*n.x+n.y*n.y);s=Math.atan2(n.y,n.x);f=s/Math.sin(this.s0);r=2*(Math.atan(Math.pow(this.ro0/h,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);i=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(f));o=Math.asin(Math.cos(r)*Math.sin(f)/Math.cos(i));n.x=this.long0-o/this.alfa;t=i;e=0;u=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(t))/(1-this.e*Math.sin(t)),this.e/2))-this.s45),Math.abs(t-n.y)<1e-10&&(e=1),t=n.y,u+=1;while(e===0&&u<15);return u>=15?null:n}var r=i(1);t.a={init:u,forward:f,inverse:e,names:["Krovak","krovak"]}},function(n,t,i){"use strict";function e(){var t=Math.abs(this.lat0),n;if(this.mode=Math.abs(t-r.b)<r.c?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<r.c?this.EQUIT:this.OBLIQ,this.es>0){this.qp=i.i(u.a)(this.e,1);this.mmf=.5/(1-this.es);this.apa=p(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp);n=Math.sin(this.lat0);this.sinb1=i.i(u.a)(this.e,n)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function o(n){var v,t,o,w,y,s,h,c,e,p,l=n.x,a=n.y;if(l=i.i(f.a)(l-this.long0),this.sphere){if(y=Math.sin(a),p=Math.cos(a),o=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+p*o:1+this.sinph0*y+this.cosph0*p*o,t<=r.c)return null;t=Math.sqrt(2/t);v=t*p*Math.sin(l);t*=this.mode===this.EQUIT?y:this.cosph0*y-this.sinph0*p*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(a+this.phi0)<r.c)return null;t=r.g-a*.5;t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t));v=t*Math.sin(l);t*=o}}else{h=0;c=0;e=0;o=Math.cos(l);w=Math.sin(l);y=Math.sin(a);s=i.i(u.a)(this.e,y);(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=s/this.qp,c=Math.sqrt(1-h*h));switch(this.mode){case this.OBLIQ:e=1+this.sinb1*h+this.cosb1*c*o;break;case this.EQUIT:e=1+c*o;break;case this.N_POLE:e=r.b+a;s=this.qp-s;break;case this.S_POLE:e=a-r.b;s=this.qp+s}if(Math.abs(e)<r.c)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:e=Math.sqrt(2/e);t=this.mode===this.OBLIQ?this.ymf*e*(this.cosb1*h-this.sinb1*c*o):(e=Math.sqrt(2/(1+c*o)))*h*this.ymf;v=this.xmf*e*c*w;break;case this.N_POLE:case this.S_POLE:s>=0?(v=(e=Math.sqrt(s))*w,t=o*(this.mode===this.S_POLE?e:-e)):v=t=0}}return n.x=this.a*v+this.x0,n.y=this.a*t+this.y0,n}function s(n){var e,t,p,u,y,h,a,c,o,v,s,l;if(n.x-=this.x0,n.y-=this.y0,e=n.x/this.a,t=n.y/this.a,this.sphere){if(v=0,l=0,s=Math.sqrt(e*e+t*t),u=s*.5,u>1)return null;u=2*Math.asin(u);(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=Math.sin(u),v=Math.cos(u));switch(this.mode){case this.EQUIT:u=Math.abs(s)<=r.c?0:Math.asin(t*l/s);e*=l;t=v*s;break;case this.OBLIQ:u=Math.abs(s)<=r.c?this.phi0:Math.asin(v*this.sinph0+t*l*this.cosph0/s);e*=l*this.cosph0;t=(v-Math.sin(u)*this.sinph0)*s;break;case this.N_POLE:t=-t;u=r.b-u;break;case this.S_POLE:u-=r.b}p=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,c=Math.sqrt(e*e+t*t),c<r.c)return n.x=0,n.y=this.phi0,n;h=2*Math.asin(.5*c/this.rq);y=Math.cos(h);e*=h=Math.sin(h);this.mode===this.OBLIQ?(o=y*this.sinb1+t*h*this.cosb1/c,a=this.qp*o,t=c*this.cosb1*y-t*this.sinb1*h):(o=t*h/c,a=this.qp*o,t=c*y)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return n.x=0,n.y=this.phi0,n;o=1-a/this.qp;this.mode===this.S_POLE&&(o=-o)}p=Math.atan2(e,t);u=w(Math.asin(o),this.apa)}return n.x=i.i(f.a)(this.long0+p),n.y=u,n}function p(n){var t,i=[];return i[0]=n*h,t=n*n,i[0]+=t*c,i[1]=t*a,t*=n,i[0]+=t*l,i[1]+=t*v,i[2]=t*y,i}function w(n,t){var i=n+n;return n+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var r=i(0),u=i(19),f=i(1),h=.33333333333333331,c=.17222222222222222,l=.10257936507936508,a=.063888888888888884,v=.0664021164021164,y=.016415012942191543;t.a={init:e,forward:o,inverse:s,names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}},function(n,t,i){"use strict";function h(){var t;if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<r.c)){t=this.b/this.a;this.e=Math.sqrt(1-t*t);var n=Math.sin(this.lat1),h=Math.cos(this.lat1),e=i.i(f.a)(this.e,n,h),o=i.i(u.a)(this.e,this.lat1,n),s=Math.sin(this.lat2),c=Math.cos(this.lat2),l=i.i(f.a)(this.e,s,c),a=i.i(u.a)(this.e,this.lat2,s),v=i.i(u.a)(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>r.c?Math.log(e/l)/Math.log(o/a):n;isNaN(this.ns)&&(this.ns=n);this.f0=e/(this.ns*Math.pow(o,this.ns));this.rh=this.a*this.f0*Math.pow(v,this.ns);this.title||(this.title="Lambert Conformal Conic")}}function c(n){var l=n.x,t=n.y,f,c,s,h;if(Math.abs(2*Math.abs(t)-Math.PI)<=r.c&&(t=i.i(o.a)(t)*(r.b-2*r.c)),f=Math.abs(Math.abs(t)-r.b),f>r.c)c=i.i(u.a)(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(c,this.ns);else{if(f=t*this.ns,f<=0)return null;s=0}return h=this.ns*i.i(e.a)(l-this.long0),n.x=this.k0*s*Math.sin(h)+this.x0,n.y=this.k0*(this.rh-s*Math.cos(h))+this.y0,n}function l(n){var u,t,l,h,a,f=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0,c;if(this.ns>0?(u=Math.sqrt(f*f+o*o),t=1):(u=-Math.sqrt(f*f+o*o),t=-1),c=0,u!==0&&(c=Math.atan2(t*f,t*o)),u!==0||this.ns>0){if(t=1/this.ns,l=Math.pow(u/(this.a*this.f0),t),h=i.i(s.a)(this.e,l),h===-9999)return null}else h=-r.b;return a=i.i(e.a)(c/this.ns+this.long0),n.x=a,n.y=h,n}var f=i(3),u=i(13),o=i(6),e=i(1),s=i(12),r=i(0);t.a={init:h,forward:c,inverse:l,names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]}},function(n,t){"use strict";function r(){}function i(n){return n}t.a={init:r,forward:i,inverse:i,names:["longlat","identity"]}},function(n,t,i){"use strict";function s(){var n=this.b/this.a;this.es=1-n*n;"x0"in this||(this.x0=0);"y0"in this||(this.y0=0);this.e=Math.sqrt(this.es);this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):i.i(f.a)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)}function h(n){var f=n.x,t=n.y,o,s,h,c;return t*r.a>90&&t*r.a<-90&&f*r.a>180&&f*r.a<-180?null:Math.abs(Math.abs(t)-r.b)<=r.c?null:(this.sphere?(o=this.x0+this.a*this.k0*i.i(u.a)(f-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(r.g+.5*t))):(h=Math.sin(t),c=i.i(e.a)(this.e,t,h),o=this.x0+this.a*this.k0*i.i(u.a)(f-this.long0),s=this.y0-this.a*this.k0*Math.log(c)),n.x=o,n.y=s,n)}function c(n){var h=n.x-this.x0,f=n.y-this.y0,e,t,s;if(this.sphere)t=r.b-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else if(s=Math.exp(-f/(this.a*this.k0)),t=i.i(o.a)(this.e,s),t===-9999)return null;return e=i.i(u.a)(this.long0+h/(this.a*this.k0)),n.x=e,n.y=t,n}var f=i(3),u=i(1),e=i(13),o=i(12),r=i(0);t.a={init:s,forward:h,inverse:c,names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}},function(n,t,i){"use strict";function u(){}function f(n){var t=n.x,u=n.y,f=i.i(r.a)(t-this.long0),e=this.x0+this.a*f,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+u/2.5))*1.25;return n.x=e,n.y=o,n}function e(n){n.x-=this.x0;n.y-=this.y0;var t=i.i(r.a)(this.long0+n.x/this.a),u=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=t,n.y=u,n}var r=i(1);t.a={init:u,forward:f,inverse:e,names:["Miller_Cylindrical","mill"]}},function(n,t,i){"use strict";function f(){}function e(n){for(var c=n.x,f=n.y,o=i.i(r.a)(c-this.long0),t=f,l=Math.PI*Math.sin(f),e,s,h;;)if(e=-(t+Math.sin(t)-l)/(1+Math.cos(t)),t+=e,Math.abs(e)<u.c)break;return t/=2,Math.PI/2-Math.abs(f)<u.c&&(o=0),s=.900316316158*this.a*o*Math.cos(t)+this.x0,h=1.4142135623731*this.a*Math.sin(t)+this.y0,n.x=s,n.y=h,n}function o(n){var f,t,u,e;return n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),f=Math.asin(t),u=i.i(r.a)(this.long0+n.x/(.900316316158*this.a*Math.cos(f))),u<-Math.PI&&(u=-Math.PI),u>Math.PI&&(u=Math.PI),t=(2*f+Math.sin(2*f))/Math.PI,Math.abs(t)>1&&(t=1),e=Math.asin(t),n.x=u,n.y=e,n}var r=i(1),u=i(0);t.a={init:f,forward:e,inverse:o,names:["Mollweide","moll"]}},function(n,t,i){"use strict";function u(){this.A=[];this.A[1]=.6399175073;this.A[2]=-.1358797613;this.A[3]=.063294409;this.A[4]=-.02526853;this.A[5]=.0117879;this.A[6]=-.0055161;this.A[7]=.0026906;this.A[8]=-.001333;this.A[9]=.00067;this.A[10]=-.00034;this.B_re=[];this.B_im=[];this.B_re[1]=.7557853228;this.B_im[1]=0;this.B_re[2]=.249204646;this.B_im[2]=.003371507;this.B_re[3]=-.001541739;this.B_im[3]=.04105856;this.B_re[4]=-.10162907;this.B_im[4]=.01727609;this.B_re[5]=-.26623489;this.B_im[5]=-.36249218;this.B_re[6]=-.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-.577245789;this.C_im[2]=-.007809598;this.C_re[3]=.508307513;this.C_im[3]=-.112208952;this.C_re[4]=-.15094762;this.C_im[4]=.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=.5185406398;this.D[3]=-.03333098;this.D[4]=-.1052906;this.D[5]=-.0368594;this.D[6]=.007317;this.D[7]=.0122;this.D[8]=.00394;this.D[9]=-.0013}function f(n){for(var v=n.x,y=n.y,p=y-this.lat0,w=v-this.long0,b=p/r.h*1e-5,k=w,f=1,e=0,t=1;t<=10;t++)f=f*b,e=e+this.A[t]*f;var h=e,c=k,i=1,u=0,l,a,o=0,s=0;for(t=1;t<=6;t++)l=i*h-u*c,a=u*h+i*c,i=l,u=a,o=o+this.B_re[t]*i-this.B_im[t]*u,s=s+this.B_im[t]*i+this.B_re[t]*u;return n.x=s*this.a+this.x0,n.y=o*this.a+this.y0,n}function e(n){for(var ut=n.x,ft=n.y,et=ut-this.x0,ot=ft-this.y0,p=ot/this.a,w=et/this.a,h=1,c=0,nt,tt,f=0,e=0,b,o,s,k,it,rt,t=1;t<=6;t++)nt=h*p-c*w,tt=c*p+h*w,h=nt,c=tt,f=f+this.C_re[t]*h-this.C_im[t]*c,e=e+this.C_im[t]*h+this.C_re[t]*c;for(b=0;b<this.iterations;b++){var i=f,u=e,l,a,v=p,y=w;for(t=2;t<=6;t++)l=i*f-u*e,a=u*f+i*e,i=l,u=a,v=v+(t-1)*(this.B_re[t]*i-this.B_im[t]*u),y=y+(t-1)*(this.B_im[t]*i+this.B_re[t]*u);for(i=1,u=0,o=this.B_re[1],s=this.B_im[1],t=2;t<=6;t++)l=i*f-u*e,a=u*f+i*e,i=l,u=a,o=o+t*(this.B_re[t]*i-this.B_im[t]*u),s=s+t*(this.B_im[t]*i+this.B_re[t]*u);k=o*o+s*s;f=(v*o+y*s)/k;e=(y*o-v*s)/k}var st=f,ht=e,d=1,g=0;for(t=1;t<=9;t++)d=d*st,g=g+this.D[t]*d;return it=this.lat0+g*r.h*1e5,rt=this.long0+ht,n.x=rt,n.y=it,n}var r=i(0);t.a={init:u,forward:f,inverse:e,names:["New_Zealand_Map_Grid","nzmg"]}},function(n,t,i){"use strict";function o(){var s,n,t,h,a,v,r,e,y;this.no_off=this.no_off||!1;this.no_rot=this.no_rot||!1;isNaN(this.k0)&&(this.k0=1);var c=Math.sin(this.lat0),l=Math.cos(this.lat0),o=this.e*c;if(this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(l,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-o*o),s=i.i(f.a)(this.e,this.lat0,c),n=this.bl/l*Math.sqrt((1-this.es)/(1-o*o)),n*n<1&&(n=1),isNaN(this.longc)){a=i.i(f.a)(this.e,this.lat1,Math.sin(this.lat1));v=i.i(f.a)(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(n+Math.sqrt(n*n-1))*Math.pow(s,this.bl):(n-Math.sqrt(n*n-1))*Math.pow(s,this.bl);r=Math.pow(a,this.bl);e=Math.pow(v,this.bl);t=this.el/r;h=.5*(t-1/t);var p=(this.el*this.el-e*r)/(this.el*this.el+e*r),w=(e-r)/(e+r),b=i.i(u.a)(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*b)/w)/this.bl;this.long0=i.i(u.a)(this.long0);y=i.i(u.a)(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/h);this.alpha=Math.asin(n*Math.sin(this.gamma0))}else t=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=t*Math.pow(s,this.bl),h=.5*(t-1/t),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function s(n){var y=n.x,o=n.y,s=i.i(u.a)(y-this.long0),t,e,c;if(Math.abs(Math.abs(o)-r.b)<=r.c)c=o>0?-1:1,e=this.al/this.bl*Math.log(Math.tan(r.g+c*this.gamma0*.5)),t=-1*c*r.b*this.al/this.bl;else{var p=i.i(f.a)(this.e,o,Math.sin(o)),h=this.el/Math.pow(p,this.bl),a=.5*(h-1/h),w=.5*(h+1/h),v=Math.sin(this.bl*s),l=(a*Math.sin(this.gamma0)-v*Math.cos(this.gamma0))/w;e=Math.abs(Math.abs(l)-1)<=r.c?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-l)/(1+l))/this.bl;t=Math.abs(Math.cos(this.bl*s))<=r.c?this.al*this.bl*s:this.al*Math.atan2(a*Math.cos(this.gamma0)+v*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(n.x=this.x0+t,n.y=this.y0+e):(t-=this.uc,n.x=this.x0+e*Math.cos(this.alpha)+t*Math.sin(this.alpha),n.y=this.y0+t*Math.cos(this.alpha)-e*Math.sin(this.alpha)),n}function h(n){var t,s;this.no_rot?(s=n.y-this.y0,t=n.x-this.x0):(s=(n.x-this.x0)*Math.cos(this.alpha)-(n.y-this.y0)*Math.sin(this.alpha),t=(n.y-this.y0)*Math.cos(this.alpha)+(n.x-this.x0)*Math.sin(this.alpha)+this.uc);var f=Math.exp(-1*this.bl*s/this.al),h=.5*(f-1/f),l=.5*(f+1/f),c=Math.sin(this.bl*t/this.al),o=(c*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/l,a=Math.pow(this.el/Math.sqrt((1+o)/(1-o)),1/this.bl);return Math.abs(o-1)<r.c?(n.x=this.long0,n.y=r.b):Math.abs(o+1)<r.c?(n.x=this.long0,n.y=-1*r.b):(n.y=i.i(e.a)(this.e,a),n.x=i.i(u.a)(this.long0-Math.atan2(h*Math.cos(this.gamma0)-c*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),n}var f=i(13),u=i(1),e=i(12),r=i(0);t.a={init:o,forward:s,inverse:h,names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]}},function(n,t,i){"use strict";function e(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)}function o(n){var f,t,e,o,s,h,c,l,v=n.x,a=n.y;return e=i.i(r.a)(v-this.long0),f=Math.sin(a),t=Math.cos(a),o=Math.cos(e),h=this.sin_p14*f+this.cos_p14*t*o,s=1,(h>0||Math.abs(h)<=u.c)&&(c=this.a*s*t*Math.sin(e),l=this.y0+this.a*s*(this.cos_p14*f-this.sin_p14*t*o)),n.x=c,n.y=l,n}function s(n){var e,h,s,c,l,t,o;return(n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),h=i.i(f.a)(e/this.a),s=Math.sin(h),c=Math.cos(h),t=this.long0,Math.abs(e)<=u.c)?(o=this.lat0,n.x=t,n.y=o,n):(o=i.i(f.a)(c*this.sin_p14+n.y*s*this.cos_p14/e),l=Math.abs(this.lat0)-u.b,Math.abs(l)<=u.c)?(t=this.lat0>=0?i.i(r.a)(this.long0+Math.atan2(n.x,-n.y)):i.i(r.a)(this.long0-Math.atan2(-n.x,n.y)),n.x=t,n.y=o,n):(t=i.i(r.a)(this.long0+Math.atan2(n.x*s,e*this.cos_p14*c-n.y*this.sin_p14*s)),n.x=t,n.y=o,n)}var r=i(1),f=i(2),u=i(0);t.a={init:e,forward:o,inverse:s,names:["ortho"]}},function(n,t,i){"use strict";function v(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=i.i(o.a)(this.es);this.e1=i.i(s.a)(this.es);this.e2=i.i(h.a)(this.es);this.e3=i.i(c.a)(this.es);this.ml0=this.a*i.i(f.a)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function y(n){var v=n.x,t=n.y,e,o,s,h=i.i(u.a)(v-this.long0),c;return s=h*Math.sin(t),this.sphere?Math.abs(t)<=r.c?(e=this.a*h,o=-1*this.a*this.lat0):(e=this.a*Math.sin(s)/Math.tan(t),o=this.a*(i.i(l.a)(t-this.lat0)+(1-Math.cos(s))/Math.tan(t))):Math.abs(t)<=r.c?(e=this.a*h,o=-1*this.ml0):(c=i.i(a.a)(this.a,this.e,Math.sin(t))/Math.tan(t),e=c*Math.sin(s),o=this.a*i.i(f.a)(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+c*(1-Math.cos(s))),n.x=e+this.x0,n.y=o+this.y0,n}function p(n){var y,s,h,p,a,o,w,t,v,b,l,g,k,c,d;if(h=n.x-this.x0,p=n.y-this.y0,this.sphere)if(Math.abs(p+this.a*this.lat0)<=r.c)y=i.i(u.a)(h/this.a+this.long0),s=0;else{for(o=this.lat0+p/this.a,w=h*h/this.a/this.a+o*o,t=o,a=e;a;--a)if(b=Math.tan(t),v=-1*(o*(t*b+1)-t-.5*(t*t+w)*b)/((t-o)/b-1),t+=v,Math.abs(v)<=r.c){s=t;break}y=i.i(u.a)(this.long0+Math.asin(h*Math.tan(t)/this.a)/Math.sin(s))}else if(Math.abs(p+this.ml0)<=r.c)s=0,y=i.i(u.a)(this.long0+h/this.a);else{for(o=(this.ml0+p)/this.a,w=h*h/this.a/this.a+o*o,t=o,a=e;a;--a)if(d=this.e*Math.sin(t),l=Math.sqrt(1-d*d)*Math.tan(t),g=this.a*i.i(f.a)(this.e0,this.e1,this.e2,this.e3,t),k=this.e0-2*this.e1*Math.cos(2*t)+4*this.e2*Math.cos(4*t)-6*this.e3*Math.cos(6*t),c=g/this.a,v=(o*(l*c+1)-c-.5*l*(c*c+w))/(this.es*Math.sin(2*t)*(c*c+w-2*o*c)/(4*l)+(o-c)*(l*k-2/Math.sin(2*t))-k),t-=v,Math.abs(v)<=r.c){s=t;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(s),2))*Math.tan(s);y=i.i(u.a)(this.long0+Math.asin(h*l/this.a)/Math.sin(s))}return n.x=y,n.y=s,n}var o=i(7),s=i(8),h=i(9),c=i(10),u=i(1),l=i(5),f=i(11),r=i(0),a=i(16),e=20;t.a={init:v,forward:y,inverse:p,names:["Polyconic","poly"]}},function(n,t,i){"use strict";function s(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Quadrilateralized Spherical Cube";this.face=this.lat0>=r.b-r.g/2?f.TOP:this.lat0<=-(r.b-r.g/2)?f.BOTTOM:Math.abs(this.long0)<=r.g?f.FRONT:Math.abs(this.long0)<=r.b+r.g?this.long0>0?f.RIGHT:f.LEFT:f.BACK;this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function h(n){var c={x:0,y:0},a,t,i,h,w,l,s={value:0},v,y,p,k,b,d,g;return n.x-=this.long0,a=this.es!==0?Math.atan(this.one_minus_f_squared*Math.tan(n.y)):n.y,t=n.x,this.face===f.TOP?(h=r.b-a,t>=r.g&&t<=r.b+r.g?(s.value=u.AREA_0,i=t-r.b):t>r.b+r.g||t<=-(r.b+r.g)?(s.value=u.AREA_1,i=t>0?t-r.e:t+r.e):t>-(r.b+r.g)&&t<=-r.g?(s.value=u.AREA_2,i=t+r.b):(s.value=u.AREA_3,i=t)):this.face===f.BOTTOM?(h=r.b+a,t>=r.g&&t<=r.b+r.g?(s.value=u.AREA_0,i=-t+r.b):t<r.g&&t>=-r.g?(s.value=u.AREA_1,i=-t):t<-r.g&&t>=-(r.b+r.g)?(s.value=u.AREA_2,i=-t-r.b):(s.value=u.AREA_3,i=t>0?-t+r.e:-t-r.e)):(this.face===f.RIGHT?t=e(t,+r.b):this.face===f.BACK?t=e(t,+r.e):this.face===f.LEFT&&(t=e(t,-r.b)),k=Math.sin(a),b=Math.cos(a),d=Math.sin(t),g=Math.cos(t),v=b*g,y=b*d,p=k,this.face===f.FRONT?(h=Math.acos(v),i=o(h,p,y,s)):this.face===f.RIGHT?(h=Math.acos(y),i=o(h,p,-v,s)):this.face===f.BACK?(h=Math.acos(-v),i=o(h,p,-y,s)):this.face===f.LEFT?(h=Math.acos(-y),i=o(h,p,v,s)):(h=i=0,s.value=u.AREA_0)),l=Math.atan(12/r.e*(i+Math.acos(Math.sin(i)*Math.cos(r.g))-r.b)),w=Math.sqrt((1-Math.cos(h))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(i))))),s.value===u.AREA_1?l+=r.b:s.value===u.AREA_2?l+=r.e:s.value===u.AREA_3&&(l+=1.5*r.e),c.x=w*Math.cos(l),c.y=w*Math.sin(l),c.x=c.x*this.a+this.x0,c.y=c.y*this.a+this.y0,n.x=c.x,n.y=c.y,n}function c(n){var t={lam:0,phi:0},a,d,w,b,g,o,v,y,i,h={value:0},c,s,l,nt,k,p;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,d=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),a=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?h.value=u.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(h.value=u.AREA_1,a-=r.b):n.x<0&&-n.x>=Math.abs(n.y)?(h.value=u.AREA_2,a=a<0?a+r.e:a-r.e):(h.value=u.AREA_3,a+=r.b),i=r.e/12*Math.tan(a),g=Math.sin(i)/(Math.cos(i)-1/Math.sqrt(2)),o=Math.atan(g),w=Math.cos(a),b=Math.tan(d),v=1-w*w*b*b*(1-Math.cos(Math.atan(1/Math.cos(o)))),v<-1?v=-1:v>1&&(v=1),this.face===f.TOP?(y=Math.acos(v),t.phi=r.b-y,t.lam=h.value===u.AREA_0?o+r.b:h.value===u.AREA_1?o<0?o+r.e:o-r.e:h.value===u.AREA_2?o-r.b:o):this.face===f.BOTTOM?(y=Math.acos(v),t.phi=y-r.b,t.lam=h.value===u.AREA_0?-o+r.b:h.value===u.AREA_1?-o:h.value===u.AREA_2?-o-r.b:o<0?-o-r.e:-o+r.e):(c=v,i=c*c,l=i>=1?0:Math.sqrt(1-i)*Math.sin(o),i+=l*l,s=i>=1?0:Math.sqrt(1-i),h.value===u.AREA_1?(i=s,s=-l,l=i):h.value===u.AREA_2?(s=-s,l=-l):h.value===u.AREA_3&&(i=s,s=l,l=-i),this.face===f.RIGHT?(i=c,c=-s,s=i):this.face===f.BACK?(c=-c,s=-s):this.face===f.LEFT&&(i=c,c=s,s=-i),t.phi=Math.acos(-l)-r.b,t.lam=Math.atan2(s,c),this.face===f.RIGHT?t.lam=e(t.lam,-r.b):this.face===f.BACK?t.lam=e(t.lam,-r.e):this.face===f.LEFT&&(t.lam=e(t.lam,+r.b))),this.es!==0&&(nt=t.phi<0?1:0,k=Math.tan(t.phi),p=this.b/Math.sqrt(k*k+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),nt&&(t.phi=-t.phi)),t.lam+=this.long0,n.x=t.lam,n.y=t.phi,n}function o(n,t,i,f){var e;return n<r.c?(f.value=u.AREA_0,e=0):(e=Math.atan2(t,i),Math.abs(e)<=r.g?f.value=u.AREA_0:e>r.g&&e<=r.b+r.g?(f.value=u.AREA_1,e-=r.b):e>r.b+r.g||e<=-(r.b+r.g)?(f.value=u.AREA_2,e=e>=0?e-r.e:e+r.e):(f.value=u.AREA_3,e+=r.b)),e}function e(n,t){var i=n+t;return i<-r.e?i+=r.f:i>+r.e&&(i-=r.f),i}var r=i(0),f={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},u={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};t.a={init:s,forward:h,inverse:c,names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]}},function(n,t,i){"use strict";function y(n,t,i,r){for(var u=t,f;r;--r)if(f=n(u),u-=f,Math.abs(f)<i)break;return u}function p(){this.x0=this.x0||0;this.y0=this.y0||0;this.long0=this.long0||0;this.es=0;this.title=this.title||"Robinson"}function w(n){var p=i.i(s.a)(n.x-this.long0),y=Math.abs(n.y),v=Math.floor(y*l),t;return v<0?v=0:v>=u&&(v=u-1),y=r.a*(y-a*v),t={x:e(o[v],y)*p,y:e(f[v],y)},n.y<0&&(t.y=-t.y),t.x=t.x*this.a*h+this.x0,t.y=t.y*this.a*c+this.y0,t}function b(n){var t={x:(n.x-this.x0)/(this.a*h),y:Math.abs(n.y-this.y0)/(this.a*c)},l,a,p;if(t.y>=1)t.x/=o[u][0],t.y=n.y<0?-r.b:r.b;else{for(l=Math.floor(t.y*u),l<0?l=0:l>=u&&(l=u-1);;)if(f[l][0]>t.y)--l;else if(f[l+1][0]<=t.y)++l;else break;a=f[l];p=5*(t.y-a[0])/(f[l+1][0]-a[0]);p=y(function(n){return(e(a,n)-t.y)/v(a,n)},p,r.c,100);t.x/=e(o[l],p);t.y=(5*l+p)*r.d;n.y<0&&(t.y=-t.y)}return t.x=i.i(s.a)(t.x+this.long0),t}var r=i(0),s=i(1),o=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-.000482243,-24897e-9,-13309e-10],[.9954,-.00083103,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-.00010457,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-.000113898,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-.000199569,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,.000182,624051e-11],[.5322,-.00677797,.000275608,624051e-11]],f=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-.000192841,-42106e-10],[.9761,.00616527,-.000256,-42106e-10],[1,.00328947,-.000319159,-42106e-10]],h=.8487,c=1.3523,l=r.a/5,a=1/l,u=18,e=function(n,t){return n[0]+t*(n[1]+t*(n[2]+t*n[3]))},v=function(n,t){return n[1]+t*(2*n[2]+t*3*n[3])};t.a={init:p,forward:w,inverse:b,names:["Robinson","robin"]}},function(n,t,i){"use strict";function l(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=i.i(o.a)(this.es)}function a(n){var o,h,f=n.x,t=n.y,y,l,a,e,v;if(f=i.i(u.a)(f-this.long0),this.sphere){if(this.m){for(y=this.n*Math.sin(t),l=c;l;--l)if(a=(this.m*t+Math.sin(t)-y)/(this.m+Math.cos(t)),t-=a,Math.abs(a)<r.c)break}else t=this.n!==1?Math.asin(this.n*Math.sin(t)):t;o=this.a*this.C_x*f*(this.m+Math.cos(t));h=this.a*this.C_y*t}else e=Math.sin(t),v=Math.cos(t),h=this.a*i.i(s.a)(t,e,v,this.en),o=this.a*f*v/Math.sqrt(1-this.es*e*e);return n.x=o,n.y=h,n}function v(n){var t,c,o,s;return n.x-=this.x0,o=n.x/this.a,n.y-=this.y0,t=n.y/this.a,this.sphere?(t/=this.C_y,o=o/(this.C_x*(this.m+Math.cos(t))),this.m?t=i.i(f.a)((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=i.i(f.a)(Math.sin(t)/this.n)),o=i.i(u.a)(o+this.long0),t=i.i(e.a)(t)):(t=i.i(h.a)(n.y/this.a,this.es,this.en),s=Math.abs(t),s<r.b?(s=Math.sin(t),c=this.long0+n.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),o=i.i(u.a)(c)):s-r.c<r.b&&(o=this.long0)),n.x=o,n.y=t,n}var u=i(1),e=i(5),o=i(23),s=i(18),h=i(24),r=i(0),f=i(2),c=20;t.a={init:l,forward:a,inverse:v,names:["Sinusoidal","sinu"]}},function(n,t){"use strict";function i(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),f=this.a,e=this.rf,u=1/e,n=2*u-Math.pow(u,2),r=this.e=Math.sqrt(n);this.R=this.k0*f*Math.sqrt(1-n)/(1-n*Math.pow(t,2));this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(i),4));this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+i/2)),h=Math.log((1+r*t)/(1-r*t));this.K=o-this.alpha*s+this.alpha*r/2*h}function r(n){var u=Math.log(Math.tan(Math.PI/4-n.y/2)),f=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),e=-this.alpha*(u+f)+this.K,t=2*(Math.atan(Math.exp(e))-Math.PI/4),i=this.alpha*(n.x-this.lambda0),o=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(t)+Math.cos(this.b0)*Math.cos(i))),r=Math.asin(Math.cos(this.b0)*Math.sin(t)-Math.sin(this.b0)*Math.cos(t)*Math.cos(i));return n.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,n.x=this.R*o+this.x0,n}function u(n){for(var o=n.x-this.x0,s=n.y-this.y0,i=o/this.R,r=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),h=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),c=this.lambda0+h/this.alpha,f=0,t=u,e=-1e3,l=0;Math.abs(t-e)>1e-7;){if(++l>20)return;f=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(t))/2));e=t;t=2*Math.atan(Math.exp(f))-Math.PI/2}return n.x=c,n.y=t,n}t.a={init:i,forward:r,inverse:u,names:["somerc"]}},function(n,t,i){"use strict";function h(n,t,i){return t*=i,Math.tan(.5*(r.b+n))*Math.pow((1-t)/(1+t),.5*i)}function c(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.c&&(this.k0=.5*(1+i.i(s.a)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r.c&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.c&&(this.k0=.5*this.cons*i.i(f.a)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/i.i(e.a)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=i.i(f.a)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r.b,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function l(n){var h=n.x,o=n.y,c=Math.sin(o),a=Math.cos(o),t,v,l,s,p,y,f=i.i(u.a)(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=r.c&&Math.abs(o+this.lat0)<=r.c?(n.x=NaN,n.y=NaN,n):this.sphere?(t=2*this.k0/(1+this.sinlat0*c+this.coslat0*a*Math.cos(f)),n.x=this.a*t*a*Math.sin(f)+this.x0,n.y=this.a*t*(this.coslat0*c-this.sinlat0*a*Math.cos(f))+this.y0,n):(v=2*Math.atan(this.ssfn_(o,c,this.e))-r.b,s=Math.cos(v),l=Math.sin(v),Math.abs(this.coslat0)<=r.c)?(p=i.i(e.a)(this.e,o*this.con,this.con*c),y=2*this.a*this.k0*p/this.cons,n.x=this.x0+y*Math.sin(h-this.long0),n.y=this.y0-this.con*y*Math.cos(h-this.long0),n):(Math.abs(this.sinlat0)<r.c?(t=2*this.a*this.k0/(1+s*Math.cos(f)),n.y=t*l):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*s*Math.cos(f))),n.y=t*(this.cosX0*l-this.sinX0*s*Math.cos(f))+this.y0),n.x=t*s*Math.sin(f)+this.x0,n)}function a(n){var f,e,l,s,c,t,h;if(n.x-=this.x0,n.y-=this.y0,t=Math.sqrt(n.x*n.x+n.y*n.y),this.sphere)return(h=2*Math.atan(t/(2*this.a*this.k0)),f=this.long0,e=this.lat0,t<=r.c)?(n.x=f,n.y=e,n):(e=Math.asin(Math.cos(h)*this.sinlat0+n.y*Math.sin(h)*this.coslat0/t),f=Math.abs(this.coslat0)<r.c?this.lat0>0?i.i(u.a)(this.long0+Math.atan2(n.x,-1*n.y)):i.i(u.a)(this.long0+Math.atan2(n.x,n.y)):i.i(u.a)(this.long0+Math.atan2(n.x*Math.sin(h),t*this.coslat0*Math.cos(h)-n.y*this.sinlat0*Math.sin(h))),n.x=f,n.y=e,n);if(Math.abs(this.coslat0)<=r.c){if(t<=r.c)return e=this.lat0,f=this.long0,n.x=f,n.y=e,n;n.x*=this.con;n.y*=this.con;l=t*this.cons/(2*this.a*this.k0);e=this.con*i.i(o.a)(this.e,l);f=this.con*i.i(u.a)(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else s=2*Math.atan(t*this.cosX0/(2*this.a*this.k0*this.ms1)),f=this.long0,t<=r.c?c=this.X0:(c=Math.asin(Math.cos(s)*this.sinX0+n.y*Math.sin(s)*this.cosX0/t),f=i.i(u.a)(this.long0+Math.atan2(n.x*Math.sin(s),t*this.cosX0*Math.cos(s)-n.y*this.sinX0*Math.sin(s)))),e=-1*i.i(o.a)(this.e,Math.tan(.5*(r.b+c)));return n.x=f,n.y=e,n}var r=i(0),s=i(6),f=i(3),e=i(13),o=i(12),u=i(1);t.a={init:c,forward:l,inverse:a,names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:h}},function(n,t,i){"use strict";function f(){(r.a.init.apply(this),this.rc)&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function e(n){var f,t,e,o;return n.x=i.i(u.a)(n.x-this.long0),r.a.forward.apply(this,[n]),f=Math.sin(n.y),t=Math.cos(n.y),e=Math.cos(n.x),o=this.k0*this.R2/(1+this.sinc0*f+this.cosc0*t*e),n.x=o*t*Math.sin(n.x),n.y=o*(this.cosc0*f-this.sinc0*t*e),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function o(n){var t,e,o,s,f,h;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(f=Math.sqrt(n.x*n.x+n.y*n.y))?(h=2*Math.atan2(f,this.R2),t=Math.sin(h),e=Math.cos(h),s=Math.asin(e*this.sinc0+n.y*t*this.cosc0/f),o=Math.atan2(n.x*t,f*this.cosc0*e-n.y*this.sinc0*t)):(s=this.phic0,o=0),n.x=o,n.y=s,r.a.inverse.apply(this,[n]),n.x=i.i(u.a)(n.x+this.long0),n}var r=i(74),u=i(1);t.a={init:f,forward:e,inverse:o,names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]}},function(n,t,i){"use strict";function h(){this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.es&&(this.en=i.i(e.a)(this.es),this.ml0=i.i(f.a)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function c(n){var d=n.x,a=n.y,y=i.i(u.a)(d-this.long0),b,p,t,w=Math.sin(a),h=Math.cos(a),o,k;if(this.es){var v=h*y,c=Math.pow(v,2),s=this.ep2*Math.pow(h,2),g=Math.pow(s,2),nt=Math.abs(h)>r.c?Math.tan(a):0,e=Math.pow(nt,2),l=Math.pow(e,2);b=1-this.es*Math.pow(w,2);v=v/Math.sqrt(b);k=i.i(f.a)(a,w,h,this.en);p=this.a*this.k0*v*(1+c/6*(1-e+s+c/20*(5-18*e+l+14*s-58*e*s+c/42*(61+179*l-l*e-479*e))))+this.x0;t=this.a*this.k0*(k-this.ml0+w*y*v/2*(1+c/12*(5-e+9*s+4*g+c/30*(61+l-58*e+270*s-330*e*s+c/56*(1385+543*l-l*e-3111*e)))))+this.y0}else{if(o=h*Math.sin(y),Math.abs(Math.abs(o)-1)<r.c)return 93;if(p=.5*this.a*this.k0*Math.log((1+o)/(1-o))+this.x0,t=h*Math.cos(y)/Math.sqrt(1-Math.pow(o,2)),o=Math.abs(t),o>=1){if(o-1>r.c)return 93;t=0}else t=Math.acos(t);a<0&&(t=-t);t=this.a*this.k0*(t-this.lat0)+this.y0}return n.x=p,n.y=t,n}function l(n){var f,c,l,v,d=(n.x-this.x0)*(1/this.a),y=(n.y-this.y0)*(1/this.a),k,h;if(this.es)if(f=this.ml0+y/this.k0,c=i.i(o.a)(f,this.es,this.en),Math.abs(c)<r.b){var it=Math.sin(c),b=Math.cos(c),nt=Math.abs(b)>r.c?Math.tan(c):0,e=this.ep2*Math.pow(b,2),rt=Math.pow(e,2),t=Math.pow(nt,2),a=Math.pow(t,2);f=1-this.es*Math.pow(it,2);k=d*Math.sqrt(f)/this.k0;h=Math.pow(k,2);f=f*nt;l=c-f*h/(1-this.es)*.5*(1-h/12*(5+3*t-9*e*t+e-4*rt-h/30*(61+90*t-252*e*t+45*a+46*e-h/56*(1385+3633*t+4095*a+1574*a*t))));v=i.i(u.a)(this.long0+k*(1-h/6*(1+2*t+e-h/20*(5+28*t+24*a+8*e*t+6*e-h/42*(61+662*t+1320*a+720*a*t))))/b)}else l=r.b*i.i(s.a)(y),v=0;else{var g=Math.exp(d/this.k0),p=.5*(g-1/g),tt=this.lat0+y/this.k0,w=Math.cos(tt);f=Math.sqrt((1-Math.pow(w,2))/(1+Math.pow(p,2)));l=Math.asin(f);y<0&&(l=-l);v=p===0&&w===0?0:i.i(u.a)(Math.atan2(p,w)+this.long0)}return n.x=v,n.y=l,n}var e=i(23),f=i(18),o=i(24),u=i(1),r=i(0),s=i(6);t.a={init:h,forward:c,inverse:l,names:["Transverse_Mercator","Transverse Mercator","tmerc"]}},function(n,t,i){"use strict";function e(){var n=i.i(u.a)(this.zone,this.long0);if(n===undefined)throw new Error("unknown utm zone");this.lat0=0;this.long0=(6*Math.abs(n)-183)*f.d;this.x0=5e5;this.y0=this.utmSouth?1e7:0;this.k0=.9996;r.a.init.apply(this);this.forward=r.a.forward;this.inverse=r.a.inverse}var u=i(45),r=i(29),f=i(0);t.a={init:e,names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"}},function(n,t,i){"use strict";function e(){this.R=this.a}function o(n){var d=n.x,h=n.y,c=i.i(u.a)(d-this.long0),a,v,l,p;Math.abs(h)<=r.c&&(a=this.x0+this.R*c,v=this.y0);l=i.i(f.a)(2*Math.abs(h/Math.PI));(Math.abs(c)<=r.c||Math.abs(Math.abs(h)-r.b)<=r.c)&&(a=this.x0,v=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var y=.5*Math.abs(Math.PI/c-c/Math.PI),e=y*y,b=Math.sin(l),k=Math.cos(l),o=k/(b+k-1),g=o*o,w=o*(2/b-1),t=w*w,s=Math.PI*this.R*(y*(o-t)+Math.sqrt(e*(o-t)*(o-t)-(t+e)*(g-t)))/(t+e);return c<0&&(s=-s),a=this.x0+s,p=e+o,s=Math.PI*this.R*(w*p-y*Math.sqrt((t+e)*(e+1)-p*p))/(t+e),v=h>=0?this.y0+s:this.y0-s,n.x=a,n.y=v,n}function s(n){var y,p,e,t,h,c,o,f,a,l,s,v,w;return n.x-=this.x0,n.y-=this.y0,s=Math.PI*this.R,e=n.x/s,t=n.y/s,h=e*e+t*t,c=-Math.abs(t)*(1+h),o=c-2*t*t+e*e,f=-2*c+1+2*t*t+h*h,w=t*t/f+(2*o*o*o/f/f/f-9*c*o/f/f)/27,a=(c-o*o/3/f)/f,l=2*Math.sqrt(-a/3),s=3*w/a/l,Math.abs(s)>1&&(s=s>=0?1:-1),v=Math.acos(s)/3,p=n.y>=0?(-l*Math.cos(v+Math.PI/3)-o/3/f)*Math.PI:-(-l*Math.cos(v+Math.PI/3)-o/3/f)*Math.PI,y=Math.abs(e)<r.c?this.long0:i.i(u.a)(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(e*e-t*t)+h*h))/2/e),n.x=y,n.y=p,n}var u=i(1),r=i(0),f=i(2);t.a={init:e,forward:o,inverse:s,names:["Van_der_Grinten_I","VanDerGrinten","vandg"]}},function(n,t,i){"use strict";var r=i(97),u=i.n(r);i.o(r,"version")&&i.d(t,"a",function(){return r.version})},function(n){n.exports={name:"proj4",version:"2.5.0",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"dist/proj4-src.js",module:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{build:"grunt","build:tmerc":"grunt build:tmerc",test:"npm run build && istanbul test _mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",devDependencies:{chai:"~4.1.2","curl-amd":"github:cujojs/curl",grunt:"^1.0.1","grunt-cli":"~1.2.0","grunt-contrib-connect":"~1.0.2","grunt-contrib-jshint":"~1.1.0","grunt-contrib-uglify":"~3.1.0","grunt-mocha-phantomjs":"~4.0.0","grunt-rollup":"^6.0.0",istanbul:"~0.4.5",mocha:"~4.0.0",rollup:"^0.50.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.0",tin:"~0.5.0"},dependencies:{mgrs:"1.0.0","wkt-parser":"^1.2.0"},__npminstall_done:"Wed Oct 24 2018 16:51:24 GMT+0800 (GMT+08:00)",_from:"proj4@2.5.0",_resolved:"http://registry.npm.taobao.org/proj4/download/proj4-2.5.0.tgz"}},function(n,t,i){"use strict";var r=i(93),u=i(29),f=i(94),e=i(92),o=i(91),s=i(90),h=i(84),c=i(78),l=i(76),a=i(70),v=i(77),y=i(68),p=i(75),w=i(71),b=i(72),k=i(86),d=i(83),g=i(81),nt=i(89),tt=i(82),it=i(73),rt=i(95),ut=i(69),ft=i(85),et=i(87),ot=i(88);t.a=function(n){n.Proj.projections.add(r.a);n.Proj.projections.add(u.a);n.Proj.projections.add(f.a);n.Proj.projections.add(e.a);n.Proj.projections.add(o.a);n.Proj.projections.add(s.a);n.Proj.projections.add(h.a);n.Proj.projections.add(c.a);n.Proj.projections.add(l.a);n.Proj.projections.add(a.a);n.Proj.projections.add(v.a);n.Proj.projections.add(y.a);n.Proj.projections.add(p.a);n.Proj.projections.add(w.a);n.Proj.projections.add(b.a);n.Proj.projections.add(k.a);n.Proj.projections.add(d.a);n.Proj.projections.add(g.a);n.Proj.projections.add(nt.a);n.Proj.projections.add(tt.a);n.Proj.projections.add(it.a);n.Proj.projections.add(rt.a);n.Proj.projections.add(ut.a);n.Proj.projections.add(ft.a);n.Proj.projections.add(et.a);n.Proj.projections.add(ot.a)}},function(n,t){"use strict";function i(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim();this.level=0;this.place=0;this.root=null;this.stack=[];this.currentObject=null;this.state=r}function y(n){var t=new i(n);return t.output()}t.a=y;var r=1,o=2,s=3,u=4,h=5,e=-1,l=/\s/,a=/[A-Za-z]/,v=/[A-Za-z84]/,f=/[,\]]/,c=/[\d\.E\-\+]/;i.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==u)while(l.test(n)){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case r:return this.neutral(n);case o:return this.keyword(n);case u:return this.quoted(n);case h:return this.afterquote(n);case s:return this.number(n);case e:return}};i.prototype.afterquote=function(n){if(n==='"'){this.word+='"';this.state=u;return}if(f.test(n)){this.word=this.word.trim();this.afterItem(n);return}throw new Error("havn't handled \""+n+'" in afterquote yet, index '+this.place);};i.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word);this.word=null;this.state=r;return}if(n==="]"){this.level--;this.word!==null&&(this.currentObject.push(this.word),this.word=null);this.state=r;this.currentObject=this.stack.pop();this.currentObject||(this.state=e);return}};i.prototype.number=function(n){if(c.test(n)){this.word+=n;return}if(f.test(n)){this.word=parseFloat(this.word);this.afterItem(n);return}throw new Error("havn't handled \""+n+'" in number yet, index '+this.place);};i.prototype.quoted=function(n){if(n==='"'){this.state=h;return}this.word+=n;return};i.prototype.keyword=function(n){if(v.test(n)){this.word+=n;return}if(n==="["){var t=[];t.push(this.word);this.level++;this.root===null?this.root=t:this.currentObject.push(t);this.stack.push(this.currentObject);this.currentObject=t;this.state=r;return}if(f.test(n)){this.afterItem(n);return}throw new Error("havn't handled \""+n+'" in keyword yet, index '+this.place);};i.prototype.neutral=function(n){if(a.test(n)){this.word=n;this.state=o;return}if(n==='"'){this.word="";this.state=u;return}if(c.test(n)){this.word=n;this.state=s;return}if(f.test(n)){this.afterItem(n);return}throw new Error("havn't handled \""+n+'" in neutral yet, index '+this.place);};i.prototype.output=function(){while(this.place<this.text.length)this.readCharicter();if(this.state===e)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state);}},function(n,t){"use strict";function r(n,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var u=t?{}:n,f=r.reduce(function(n,t){return i(t,n),n},u);t&&(n[t]=f)}function i(n,t){var u,f;if(!Array.isArray(n)){t[n]=!0;return}if(u=n.shift(),u==="PARAMETER"&&(u=n.shift()),n.length===1){if(Array.isArray(n[0])){t[u]={};i(n[0],t[u]);return}t[u]=n[0];return}if(!n.length){t[u]=!0;return}if(u==="TOWGS84"){t[u]=n;return}Array.isArray(u)||(t[u]={});switch(u){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[u]={name:n[0].toLowerCase(),convert:n[1]};n.length===3&&i(n[2],t[u]);return;case"SPHEROID":case"ELLIPSOID":t[u]={name:n[0],a:n[1],rf:n[2]};n.length===4&&i(n[3],t[u]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":n[0]=["name",n[0]];r(t,u,n);return;default:for(f=-1;++f<n.length;)if(!Array.isArray(n[f]))return i(n,t[u]);return r(t,u,n)}}t.a=i},function(n,t,i){var r=i(32),u=i(20);L.Map.include({setConvertType:function(n){this.options.pointconvertType=n},getConvertType:function(){return this.options.pointconvertType},hasConvert:function(){var n=this.options.pointconvertType;return n=="gcj"||n=="bd"},convert2map:function(n){var t,i,u;return n.lng&&n.lat?(t=n.lng,i=n.lat):(t=n[1],i=n[0]),this.options.pointconvertType=="gcj"?(u=r.wgs2gcj([t,i]),t=u[0],i=u[1]):this.options.pointconvertType=="bd"&&(u=r.wgs2bd([t,i]),t=u[0],i=u[1]),[i,t]},convert2wgs:function(n){var t,i,u;return n.lng&&n.lat?(t=n.lng,i=n.lat):(t=n[1],i=n[0]),this.options.pointconvertType=="gcj"?(u=r.gcj2wgs([t,i]),t=u[0],i=u[1]):this.options.pointconvertType=="bd"&&(u=r.bd2wgs([t,i]),t=u[0],i=u[1]),[i,t]},centerAt:function(n,t){var r=this.getZoom(),i;return this.gisdata&&this.gisdata.config&&this.gisdata.config.centerAutoLevel&&(i=this.gisdata.config.centerAutoLevel,r<i&&this.getMaxZoom()>=i&&(r=i)),this.stop(),this.setView(n,r,t),this},centerAtByWgs:function(n,t){return n=this.convert2map(n),this.centerAt(n,t),this},centerAtLayer:function(n){return n instanceof L.Marker?this.centerAt(n.getLatLng()):n instanceof L.CircleMarker?this.centerAt(n.getLatLng()):n instanceof L.Circle?this.fitBounds(n.getBounds()):n instanceof L.Rectangle?this.fitBounds(n.getBounds()):n instanceof L.Polygon?this.fitBounds(n.getBounds()):n instanceof L.Polyline?this.fitBounds(n.getBounds()):n instanceof L.LayerGroup?this.fitBounds(n.getBounds()):n instanceof L.FeatureGroup?this.fitBounds(n.getBounds()):n.getLatLng?this.centerAt(n.getLatLng()):n.getBounds&&this.fitBounds(n.getBounds()),this},goHomeExtent:function(){if(this.gisdata!=null&&this.gisdata.config!=null&&this.gisdata.config.center!=null)return this.setView(this.gisdata.config.center,this.gisdata.config.zoom),this},changeBaseMap:function(n){var u,i,r,t;if(this.gisdata!=null&&this.gisdata.config!=null&&this.gisdata.config.basemaps!=null){for(r=0;r<this.gisdata.config.basemaps.length;r++)(t=this.gisdata.config.basemaps[r],t.name!=null&&t.name!=""&&t._layer!=null)&&(i==null&&(i=t._layer),(n==r||t.name==n)&&(u=t._layer),this.hasLayer(t._layer)&&this.removeLayer(t._layer));return u!=null?($(".leaflet-container").css({background:u.config.background||"#fff"}),this.addLayer(u)):i!=null&&($(".leaflet-container").css({background:i.config.background||"#fff"}),this.addLayer(i)),this}},getLayer:function(n,t){var i=this.getLayers(n,t);return i.length==0?null:i[0]},getLayers:function(n,t){var f=[],i,r,u;if(t==null&&(t="name"),i=this.gisdata.config.basemaps,i&&i.length>0)for(r=0;r<i.length;r++)(u=i[r],u!=null&&u[t]==n)&&f.push(u._layer);if(i=this.gisdata.config.operationallayers,i&&i.length>0)for(r=0;r<i.length;r++)(u=i[r],u!=null&&u[t]==n)&&f.push(u._layer);return f},getConfig:function(){return u.clone(this.gisdata.config)}})},function(){var n=L.Marker.prototype._initIcon,t=L.Marker.prototype._setPos,i=L.DomUtil.TRANSFORM==="msTransform";L.Marker.addInitHook(function(){var t=this.options.icon&&this.options.icon.options,n=t&&this.options.icon.options.iconAnchor;n&&(n=n[0]+"px "+n[1]+"px");this.options.rotationOrigin=this.options.rotationOrigin||n||"center bottom";this.options.rotationAngle=this.options.rotationAngle||0;this.on("drag",function(n){n.target._applyRotation()})});L.Marker.include({_initIcon:function(){n.call(this)},_setPos:function(n){t.call(this,n);this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(n){return this.options.rotationAngle=n,this.update(),this},setRotationOrigin:function(n){return this.options.rotationOrigin=n,this.update(),this}})},function(){L.TileLayer.prototype.getTileUrl=function(n){var t={r:L.Browser.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()},i;return this._map&&!this._map.options.crs.infinite&&(i=this._globalTileRange.max.y-n.y,this.options.tms&&(t.y=i),t["-y"]=i),this.options.zOffset&&(t.z=t.z+Number(this.options.zOffset)),L.Util.template(this._url||"",L.extend(t,this.options))}},function(){L.VirtualGrid=L.Layer.extend({options:{cellSize:512,updateInterval:150},initialize:function(n){n=L.setOptions(this,n);this._zooming=!1},onAdd:function(n){this._map=n;this._update=L.Util.throttle(this._update,this.options.updateInterval,this);this._reset();this._update()},onRemove:function(){this._map.removeEventListener(this.getEvents(),this);this._removeCells()},getEvents:function(){return{moveend:this._update,zoomstart:this._zoomstart,zoomend:this._reset}},addTo:function(n){return n.addLayer(this),this},removeFrom:function(n){return n.removeLayer(this),this},_zoomstart:function(){this._zooming=!0},_reset:function(){this._removeCells();this._cells={};this._activeCells={};this._cellsToLoad=0;this._cellsTotal=0;this._cellNumBounds=this._getCellNumBounds();this._resetWrap();this._zooming=!1},_resetWrap:function(){var t=this._map,n=t.options.crs,i;n.infinite||(i=this._getCellSize(),n.wrapLng&&(this._wrapLng=[Math.floor(t.project([0,n.wrapLng[0]]).x/i),Math.ceil(t.project([0,n.wrapLng[1]]).x/i)]),n.wrapLat&&(this._wrapLat=[Math.floor(t.project([n.wrapLat[0],0]).y/i),Math.ceil(t.project([n.wrapLat[1],0]).y/i)]))},_getCellSize:function(){return this.options.cellSize},_update:function(){if(this._map){var n=this._map.getPixelBounds(),t=this._getCellSize(),i=L.bounds(n.min.divideBy(t).floor(),n.max.divideBy(t).floor());this._removeOtherCells(i);this._addCells(i);this.fire("cellsupdated")}},_addCells:function(n){for(var r=[],e=n.getCenter(),o=this._map.getZoom(),t,f,i,u=n.min.y;u<=n.max.y;u++)for(t=n.min.x;t<=n.max.x;t++)f=L.point(t,u),f.z=o,this._isValidCell(f)&&r.push(f);if(i=r.length,i!==0)for(this._cellsToLoad+=i,this._cellsTotal+=i,r.sort(function(n,t){return n.distanceTo(e)-t.distanceTo(e)}),t=0;t<i;t++)this._addCell(r[t])},_isValidCell:function(n){var i=this._map.options.crs,t,r;return!i.infinite&&(t=this._cellNumBounds,!i.wrapLng&&(n.x<t.min.x||n.x>t.max.x)||!i.wrapLat&&(n.y<t.min.y||n.y>t.max.y))?!1:this.options.bounds?(r=this._cellCoordsToBounds(n),L.latLngBounds(this.options.bounds).intersects(r)):!0},_cellCoordsToBounds:function(n){var t=this._map,i=this.options.cellSize,r=n.multiplyBy(i),u=r.add([i,i]),f=t.wrapLatLng(t.unproject(r,n.z)),e=t.wrapLatLng(t.unproject(u,n.z));return L.latLngBounds(f,e)},_cellCoordsToKey:function(n){return n.x+":"+n.y},_keyToCellCoords:function(n){var t=n.split(":"),i=parseInt(t[0],10),r=parseInt(t[1],10);return L.point(i,r)},_removeOtherCells:function(n){for(var t in this._cells)n.contains(this._keyToCellCoords(t))||this._removeCell(t)},_removeCell:function(n){var t=this._activeCells[n];t&&(delete this._activeCells[n],this.cellLeave&&this.cellLeave(t.bounds,t.coords),this.fire("cellleave",{bounds:t.bounds,coords:t.coords}))},_removeCells:function(){var n,t,i;for(n in this._cells)t=this._cells[n].bounds,i=this._cells[n].coords,this.cellLeave&&this.cellLeave(t,i),this.fire("cellleave",{bounds:t,coords:i})},_addCell:function(n){this._wrapCoords(n);var i=this._cellCoordsToKey(n),t=this._cells[i];t&&!this._activeCells[i]&&(this.cellEnter&&this.cellEnter(t.bounds,n),this.fire("cellenter",{bounds:t.bounds,coords:n}),this._activeCells[i]=t);t||(t={coords:n,bounds:this._cellCoordsToBounds(n)},this._cells[i]=t,this._activeCells[i]=t,this.createCell&&this.createCell(t.bounds,n),this.fire("cellcreate",{bounds:t.bounds,coords:n}))},_wrapCoords:function(n){n.x=this._wrapLng?L.Util.wrapNum(n.x,this._wrapLng):n.x;n.y=this._wrapLat?L.Util.wrapNum(n.y,this._wrapLat):n.y},_getCellNumBounds:function(){var n=this._map.getPixelWorldBounds(),t=this._getCellSize();return n?L.bounds(n.min.divideBy(t).floor(),n.max.divideBy(t).ceil().subtract([1,1])):null}})},function(){L.TileLayer.ArcGISTile=L.TileLayer.extend({isUpper:!0,imgType:"",_url:"",initialize:function(n,t){t==null&&(t={});t.hasOwnProperty("isUpper")&&(this.isUpper=t.isUpper);this.imgType=t.imgType||".jpg";this._url=n+"/_alllayers/";L.setOptions(this,t)},onAdd:function(n){L.TileLayer.prototype.onAdd.call(this,n)},getTileUrl:function(n){var t=n.z;this.options.zOffset&&(t=t+Number(this.options.zOffset));var i="L"+this.padLeft0(t.toString(),2),r="R"+this.padLeft0(n.y.toString(16),8),u="C"+this.padLeft0(n.x.toString(16),8);return this.isUpper&&(i=i.toUpperCase(),r=r.toUpperCase(),u=u.toUpperCase()),this._url+i+"/"+r+"/"+u+this.imgType},padLeft0:function(n,t){n=String(n);for(var i=n.length;i<t;)n="0"+n,i++;return n}});L.tileLayer.arcGISTile=function(n,t){return new L.TileLayer.ArcGISTile(n,t)}},function(){L.CRS.Baidu=new L.Proj.CRS("EPSG:900913","+proj=merc +a=6378206 +b=6356584.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",{resolutions:function(){var t,n;for(level=19,t=[],t[0]=Math.pow(2,18),n=1;n<level;n++)t[n]=Math.pow(2,18-n);return t}(),origin:[0,0],bounds:L.bounds([20037508.342789244,0],[0,20037508.342789244])});L.tileLayer.baidu=function(n){var t,i,r;n=n||{};i="0123456789";switch(n.layer){case"vec":default:t=L.tileLayer("http://online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles="+(n.bigfont?"ph":"pl")+"&scaler=1&p=1",{name:n.name,subdomains:i,tms:!0});break;case"img_d":t=L.tileLayer("http://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46",{name:n.name,subdomains:i,tms:!0});break;case"img_z":t=L.tileLayer("http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles="+(n.bigfont?"sh":"sl")+"&v=020",{name:n.name,subdomains:i,tms:!0});break;case"custom":n.customid=n.customid||"midnight";t=L.tileLayer("http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid="+n.customid,{name:n.name,subdomains:"012",tms:!0});break;case"time":r=(new Date).getTime();t=L.tileLayer("http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&time="+r+"&label=web2D&v=017",{name:n.name,subdomains:i,tms:!0});break;case"img":t=L.layerGroup([L.tileLayer.baidu({name:"",layer:"img_d",bigfont:n.bigfont}),L.tileLayer.baidu({name:"",layer:"img_z",bigfont:n.bigfont})])}return t}},function(){L.CRS.EPSG4490=new L.Proj.CRS("EPSG:4490","+proj=longlat +ellps=GRS80 +no_defs",{resolutions:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.00068664552062088911,.00034332276031044456,.00017166138015522228,85830690077611139e-21,4291534503880557e-20,21457672519402785e-21,10728836259701392e-21,53644181298506962e-22,2682209064925349e-21,13411045324626745e-22,6705522537e-16],origin:[-180,90],bounds:L.bounds([-180,-90],[180,90])});L.TileLayer.TDT=L.TileLayer.extend({layername:"vec",initialize:function(n,t){t=t||{};this.layername=t.layer||this.layername;L.setOptions(this,t)},getTileUrl:function(n){var t=n.y,i=n.x,r=n.z,u=parseInt(Math.random()*7),f="http://t"+u+".tianditu.com/"+this.layername+"_c/wmts";return f+"?Service=WMTS&Request=GetTile&Version=1.0.0&Style=Default&Format=tiles&serviceMode=KVP&layer="+this.layername+"&TileMatrixSet=c&TileMatrix="+r+"&TileRow="+t+"&TileCol="+i+"&tk=c6b38ec0b71ad168e94541ebeccb45b8"}});L.tileLayer.tdt=function(n){return new L.TileLayer.TDT(null,n)};L.TileLayer.TDTMercator=L.TileLayer.extend({layername:"vec",initialize:function(n,t){t=t||{};this.layername=t.layer||this.layername;L.setOptions(this,t)},getTileUrl:function(n){var t=n.y,i=n.x,r=n.z,u=parseInt(Math.random()*7),f="http://t"+u+".tianditu.com/"+this.layername+"_w/wmts";return f+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+this.layername+"&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL="+i+"&TILEROW="+t+"&TILEMATRIX="+r+"&tk=c6b38ec0b71ad168e94541ebeccb45b8"}});L.tileLayer.tdtMercator=function(n){return new L.TileLayer.TDTMercator(null,n)}},function(){L.TileLayer.WMTS=L.TileLayer.extend({options:{version:"1.0.0",style:"default",tilematrixSet:"",format:"image/png",tileSize:256,layer:""},initialize:function(n,t){this._url=n;L.setOptions(this,t)},getParamString:function(n,t,i){var u=[];for(var r in n)u.push((i?r.toUpperCase():r)+"="+n[r]);return(!t||t.indexOf("?")===-1?"?":"&")+u.join("&")},getTileUrl:function(n){var t=this._getZoomForUrl(),r,i,u;return this.options.zOffset&&(t=t+this.options.zOffset),r=this.options.matrixIds?this.options.matrixIds[t]:this.options.tilematrixBefore?this.options.tilematrixBefore+t:t,i=L.Util.template(this._url,{s:this._getSubdomain(n)}),u={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:r,tilerow:n.y,tilecol:n.x},i+this.getParamString(u,i)}});L.tileLayer.wmts=function(n,t){return new L.TileLayer.WMTS(n,t)}},function(n,t,i){var r,f,u;(function(e){var o;if(1)!(f=[i(4)],r=e,u=typeof r=="function"?r.apply(t,f):r,u!==undefined&&(n.exports=u));else if(typeof n=="object"&&typeof n.exports=="object")o=require("leaflet"),n.exports=e(o);else{if(typeof window.L=="undefined")throw new Error("Leaflet must be loaded first");e(window.L)}})(function(n){n.Map.mergeOptions({contextmenuItems:[]});n.Map.ContextMenu=n.Handler.extend({_touchstart:n.Browser.msPointer?"MSPointerDown":n.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(t){n.Handler.prototype.initialize.call(this,t);this._items=[];this._visible=!1;var i=this._container=n.DomUtil.create("div",n.Map.ContextMenu.BASE_CLS,t._container);i.style.zIndex=1e4;i.style.position="absolute";t.options.contextmenuWidth&&(i.style.width=t.options.contextmenuWidth+"px");this._createItems();n.DomEvent.on(i,"click",n.DomEvent.stop).on(i,"mousedown",n.DomEvent.stop).on(i,"dblclick",n.DomEvent.stop).on(i,"contextmenu",n.DomEvent.stop)},addHooks:function(){var t=this._map.getContainer();n.DomEvent.on(t,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this);if(n.Browser.touch)n.DomEvent.on(document,this._touchstart,this._hide,this);this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var t=this._map.getContainer();n.DomEvent.off(t,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this);n.Browser.touch&&n.DomEvent.off(document,this._touchstart,this._hide,this);this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(t,i){t instanceof n.LatLng&&(t=this._map.latLngToContainerPoint(t));this._showAtPoint(t,i)},hide:function(){this._hide()},addItem:function(n){return this.insertItem(n)},insertItem:function(n,t){t=t!==undefined?t:this._items.length;var i=this._createItem(this._container,n,t);return this._items.push(i),this._sizeChanged=!0,this._map.fire("contextmenu.additem",{contextmenu:this,el:i.el,index:t}),i.el},removeItem:function(t){var i=this._container;return(isNaN(t)||(t=i.children[t]),t)?(this._removeItem(n.Util.stamp(t)),this._sizeChanged=!0,this._map.fire("contextmenu.removeitem",{contextmenu:this,el:t}),t):null},removeAllItems:function(){for(var t=this._container.children,i;t.length;)i=t[0],this._removeItem(n.Util.stamp(i));return t},hideAllItems:function(){for(var t,n=0,i=this._items.length;n<i;n++)t=this._items[n],t.el.style.display="none"},showAllItems:function(){for(var t,n=0,i=this._items.length;n<i;n++)t=this._items[n],t.el.style.display=""},setDisabled:function(t,i){var u=this._container,r=n.Map.ContextMenu.BASE_CLS+"-item";isNaN(t)||(t=u.children[t]);t&&n.DomUtil.hasClass(t,r)&&(i?(n.DomUtil.addClass(t,r+"-disabled"),this._map.fire("contextmenu.disableitem",{contextmenu:this,el:t})):(n.DomUtil.removeClass(t,r+"-disabled"),this._map.fire("contextmenu.enableitem",{contextmenu:this,el:t})))},isVisible:function(){return this._visible},_createItems:function(){for(var t=this._map.options.contextmenuItems,n=0,i=t.length;n<i;n++)this._items.push(this._createItem(this._container,t[n]))},_createItem:function(t,i,r){if(i.separator||i==="-")return this._createSeparator(t,r);var f=n.Map.ContextMenu.BASE_CLS+"-item",c=i.disabled?f+" "+f+"-disabled":f,u=this._insertElementAt("a",c,t,r),o=this._createEventHandler(u,i.callback,i.context,i.hideOnSelect),s=this._getIcon(i),h=this._getIconCls(i),e="";s?e='<img class="'+n.Map.ContextMenu.BASE_CLS+'-icon" src="'+s+'"/>':h&&(e='<span class="'+n.Map.ContextMenu.BASE_CLS+"-icon "+h+'"><\/span>');u.innerHTML=e+i.text;u.href="#";n.DomEvent.on(u,"mouseover",this._onItemMouseOver,this).on(u,"mouseout",this._onItemMouseOut,this).on(u,"mousedown",n.DomEvent.stopPropagation).on(u,"click",o);if(n.Browser.touch)n.DomEvent.on(u,this._touchstart,n.DomEvent.stopPropagation);if(!n.Browser.pointer)n.DomEvent.on(u,"click",this._onItemMouseOut,this);return{id:n.Util.stamp(u),el:u,callback:o}},_removeItem:function(t){for(var r,i,f,u=0,e=this._items.length;u<e;u++)if(r=this._items[u],r.id===t){if(i=r.el,f=r.callback,f&&(n.DomEvent.off(i,"mouseover",this._onItemMouseOver,this).off(i,"mouseover",this._onItemMouseOut,this).off(i,"mousedown",n.DomEvent.stopPropagation).off(i,"click",f),n.Browser.touch&&n.DomEvent.off(i,this._touchstart,n.DomEvent.stopPropagation),!n.Browser.pointer))n.DomEvent.on(i,"click",this._onItemMouseOut,this);return this._container.removeChild(i),this._items.splice(u,1),r}return null},_createSeparator:function(t,i){var r=this._insertElementAt("div",n.Map.ContextMenu.BASE_CLS+"-separator",t,i);return{id:n.Util.stamp(r),el:r}},_createEventHandler:function(t,i,r,u){var f=this,e=this._map,o=n.Map.ContextMenu.BASE_CLS+"-item-disabled",u=u!==undefined?u:!0;return function(){n.DomUtil.hasClass(t,o)||(u&&f._hide(),i&&i.call(r||e,f._showLocation),f._map.fire("contextmenu.select",{contextmenu:f,el:t}))}},_insertElementAt:function(n,t,i,r){var f,u=document.createElement(n);return u.className=t,r!==undefined&&(f=i.children[r]),f?i.insertBefore(u,f):i.appendChild(u),u},_show:function(n){this._showAtPoint(n.containerPoint,n)},_showAtPoint:function(t,i){if(this._items.length){var r=this._map,u=r.containerPointToLayerPoint(t),f=r.layerPointToLatLng(u),e=n.extend(i||{},{contextmenu:this});this._showLocation={latlng:f,layerPoint:u,containerPoint:t};i&&i.relatedTarget&&(this._showLocation.relatedTarget=i.relatedTarget);this._setPosition(t);this._visible||(this._container.style.display="block",this._visible=!0);this._map.fire("contextmenu.show",e)}},_hide:function(){this._visible&&(this._visible=!1,this._container.style.display="none",this._map.fire("contextmenu.hide",{contextmenu:this}))},_getIcon:function(t){return n.Browser.retina&&t.retinaIcon||t.icon},_getIconCls:function(t){return n.Browser.retina&&t.retinaIconCls||t.iconCls},_setPosition:function(t){var r=this._map.getSize(),i=this._container,u=this._getElementSize(i),f;this._map.options.contextmenuAnchor&&(f=n.point(this._map.options.contextmenuAnchor),t=t.add(f));i._leaflet_pos=t;t.x+u.x>r.x?(i.style.left="auto",i.style.right=Math.min(Math.max(r.x-t.x,0),r.x-u.x-1)+"px"):(i.style.left=Math.max(t.x,0)+"px",i.style.right="auto");t.y+u.y>r.y?(i.style.top="auto",i.style.bottom=Math.min(Math.max(r.y-t.y,0),r.y-u.y-1)+"px"):(i.style.top=Math.max(t.y,0)+"px",i.style.bottom="auto")},_getElementSize:function(n){var t=this._size,i=n.style.display;return(!t||this._sizeChanged)&&(t={},n.style.left="-999999px",n.style.right="auto",n.style.display="block",t.x=n.offsetWidth,t.y=n.offsetHeight,n.style.left="auto",n.style.display=i,this._sizeChanged=!1),t},_onKeyDown:function(n){var t=n.keyCode;t===27&&this._hide()},_onItemMouseOver:function(t){n.DomUtil.addClass(t.target||t.srcElement,"over")},_onItemMouseOut:function(t){n.DomUtil.removeClass(t.target||t.srcElement,"over")}});n.Map.addInitHook("addHandler","contextmenu",n.Map.ContextMenu);n.Mixin.ContextMenu={bindContextMenu:function(t){return n.setOptions(this,t),this._initContextMenu(),this},unbindContextMenu:function(){return this.off("contextmenu",this._showContextMenu,this),this},addContextMenuItem:function(n){this.options.contextmenuItems.push(n)},removeContextMenuItemWithIndex:function(n){for(var i,r=[],t=0;t<this.options.contextmenuItems.length;t++)this.options.contextmenuItems[t].index==n&&r.push(t);for(i=r.pop();i!==undefined;)this.options.contextmenuItems.splice(i,1),i=r.pop()},replaceContextMenuItem:function(n){this.removeContextMenuItemWithIndex(n.index);this.addContextMenuItem(n)},_initContextMenu:function(){this._items=[];this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(t){var r,u,f,i,e;if(this._map.contextmenu){for(u=n.extend({relatedTarget:this},t),f=this._map.mouseEventToContainerPoint(t.originalEvent),this.options.contextmenuInheritItems||this._map.contextmenu.hideAllItems(),i=0,e=this.options.contextmenuItems.length;i<e;i++)r=this.options.contextmenuItems[i],this._items.push(this._map.contextmenu.insertItem(r,r.index));this._map.once("contextmenu.hide",this._hideContextMenu,this);this._map.contextmenu.showAt(f,u)}},_hideContextMenu:function(){for(var n=0,t=this._items.length;n<t;n++)this._map.contextmenu.removeItem(this._items[n]);this._items.length=0;this.options.contextmenuInheritItems||this._map.contextmenu.showAllItems()}};for(var r=[n.Marker,n.Path],u={contextmenu:!1,contextmenuItems:[],contextmenuInheritItems:!0},t,i=0,f=r.length;i<f;i++)t=r[i],t.prototype.options?t.mergeOptions(u):t.prototype.options=u,t.addInitHook(function(){this.options.contextmenu&&this._initContextMenu()}),t.include(n.Mixin.ContextMenu);return n.Map.ContextMenu})},function(){(function(n,t){function i(n,t){while((n=n.parentElement)&&!n.classList.contains(t));return n}L.drawVersion="1.0.2";L.Draw={};L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:<\/strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}};L.Draw.Event={};L.Draw.Event.CREATED="draw:created";L.Draw.Event.EDITED="draw:edited";L.Draw.Event.DELETED="draw:deleted";L.Draw.Event.DRAWSTART="draw:drawstart";L.Draw.Event.DRAWSTOP="draw:drawstop";L.Draw.Event.DRAWVERTEX="draw:drawvertex";L.Draw.Event.EDITSTART="draw:editstart";L.Draw.Event.EDITMOVE="draw:editmove";L.Draw.Event.EDITRESIZE="draw:editresize";L.Draw.Event.EDITVERTEX="draw:editvertex";L.Draw.Event.EDITSTOP="draw:editstop";L.Draw.Event.DELETESTART="draw:deletestart";L.Draw.Event.DELETESTOP="draw:deletestop";L.Draw.Event.TOOLBAROPENED="draw:toolbaropened";L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed";L.Draw.Event.MARKERCONTEXT="draw:markercontext";L.Draw=L.Draw||{};L.Draw.Feature=L.Handler.extend({initialize:function(n,t){this._map=n;this._container=n._container;this._overlayPane=n._panes.overlayPane;this._popupPane=n._panes.popupPane;t&&t.shapeOptions&&(t.shapeOptions=L.Util.extend({},this.options.shapeOptions,t.shapeOptions));L.setOptions(this,t);var i=L.version.split(".");parseInt(i[0],10)===1&&parseInt(i[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;if(n){L.DomUtil.disableTextSelection();n.getContainer().focus();this._tooltip=new L.Draw.Tooltip(this._map);L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this)}},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(n){L.setOptions(this,n)},_fireCreatedEvent:function(n){this._map.fire(L.Draw.Event.CREATED,{layer:n,layerType:this.type})},_cancelDrawing:function(n){n.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}});L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(15,15),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(n,t){L.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error;t&&t.drawError&&(t.drawError=L.Util.extend({},this.options.drawError,t.drawError));this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,n,t)},addHooks:function(){if(L.Draw.Feature.prototype.addHooks.call(this),this._map){this._markers=[];this._markerGroup=new L.LayerGroup;this._map.addLayer(this._markerGroup);this._poly=new L.Polyline([],this.options.shapeOptions);this._tooltip.updateContent(this._getTooltipText());this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset}));this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map);this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this).on("dblclick",this._onDblclickHndler,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this).off("dblclick",this._onDblclickHndler,this)},_onDblclickHndler:function(n){L.DomEvent.stopPropagation(n);this._finishShape()},deleteLastVertex:function(){if(!(this._markers.length<=1)){var i=this._markers.pop(),n=this._poly,t=n.getLatLngs(),r=t.splice(-1,1)[0];this._poly.setLatLngs(t);this._markerGroup.removeLayer(i);n.getLatLngs().length<2&&this._map.removeLayer(n);this._vertexChanged(r,!1)}},addVertex:function(n){var t=this._markers.length;if(t>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(n)){this._showErrorTooltip();return}this._errorShown&&this._hideErrorTooltip();this._markers.push(this._createMarker(n));this._poly.addLatLng(n);this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly);this._vertexChanged(n,!0)},completeShape:function(){this._markers.length<=1||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var n=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),t=this._poly.newLatLngIntersects(n[n.length-1]);if(!this.options.allowIntersection&&t||!this._shapeIsValid()){this._showErrorTooltip();return}this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(n){var i=this._map.mouseEventToLayerPoint(n.originalEvent),t=this._map.layerPointToLatLng(i);this._currentLatLng=t;this._updateTooltip(t);this._updateGuide(i);this._mouseMarker.setLatLng(t);L.DomEvent.preventDefault(n.originalEvent)},_vertexChanged:function(n,t){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(n,t);this._clearGuides();this._updateTooltip()},_onMouseDown:function(n){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(n);this._clickHandled=!0;this._disableNewMarkers();var t=n.originalEvent,i=t.clientX,r=t.clientY;this._startPoint.call(this,i,r)}},_startPoint:function(n,t){this._mouseDownOrigin=L.point(n,t)},_onMouseUp:function(n){var t=n.originalEvent,i=t.clientX,r=t.clientY;this._endPoint.call(this,i,r,n);this._clickHandled=null},_endPoint:function(t,i,r){if(this._mouseDownOrigin){var u=L.point(t,i).distanceTo(this._mouseDownOrigin),f=this._calculateFinishDistance(r.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(r.latlng),this._finishShape()):f<10&&L.Browser.touch?this._finishShape():Math.abs(u)<9*(n.devicePixelRatio||1)&&this.addVertex(r.latlng);this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(n){var t=n.originalEvent,i,r;!t.touches||!t.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(i=t.touches[0].clientX,r=t.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,i,r),this._endPoint.call(this,i,r,n),this._touchHandled=null);this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(n){var t,i;if(this._markers.length>0){if(this.type===L.Draw.Polyline.TYPE)i=this._markers[this._markers.length-1];else if(this.type===L.Draw.Polygon.TYPE)i=this._markers[0];else return Infinity;var r=this._map.latLngToContainerPoint(i.getLatLng()),u=new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset*2}),f=this._map.latLngToContainerPoint(u.getLatLng());t=r.distanceTo(f)}else t=Infinity;return t},_updateFinishHandler:function(){var n=this._markers.length;if(n>1)this._markers[n-1].on("click",this._finishShape,this);n>2&&this._markers[n-2].off("click",this._finishShape,this)},_createMarker:function(n){var t=new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset*2});return this._markerGroup.addLayer(t),t},_updateGuide:function(n){var t=this._markers?this._markers.length:0;t>0&&(n=n||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[t-1].getLatLng()),n))},_updateTooltip:function(n){var t=this._getTooltipText();n&&this._tooltip.updatePosition(n);this._errorShown||this._tooltip.updateContent(t)},_drawGuide:function(n,t){var r=Math.floor(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))),s=this.options.guidelineDistance,e=this.options.maxGuideLineLength,u=r>e?r-e:s,i,o,f;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));u<r;u+=this.options.guidelineDistance)i=u/r,o={x:Math.floor(n.x*(1-i)+i*t.x),y:Math.floor(n.y*(1-i)+i*t.y)},f=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),f.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(f,o)},_updateGuideColor:function(n){if(this._guidesContainer)for(var t=0,i=this._guidesContainer.childNodes.length;t<i;t++)this._guidesContainer.childNodes[t].style.backgroundColor=n},_clearGuides:function(){if(this._guidesContainer)while(this._guidesContainer.firstChild)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var i=this.options.showLength,n,t;return this._markers.length===0?n={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(t=i?this._getMeasurementString():"",n=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:t}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:t}),n},_updateRunningMeasure:function(n,t){var u=this._markers.length,i,r;this._markers.length===1?this._measurementRunningTotal=0:(i=u-(t?2:1),r=L.GeometryUtil.isVersion07x()?n.distanceTo(this._markers[i].getLatLng())*(this.options.factor||1):this._map.distance(n,this._markers[i].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=r*(t?1:-1))},_getMeasurementString:function(){var n=this._currentLatLng,t=this._markers[this._markers.length-1].getLatLng(),i;return i=L.GeometryUtil.isVersion07x()?t&&n&&n.distanceTo?this._measurementRunningTotal+n.distanceTo(t)*(this.options.factor||1):this._measurementRunningTotal||0:t&&n?this._measurementRunningTotal+this._map.distance(n,t)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(i,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var n=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}});L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(n,t){L.Draw.Polyline.prototype.initialize.call(this,n,t);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var n=this._markers.length;if(n===1)this._markers[0].on("click",this._finishShape,this);if(n>2){this._markers[n-1].on("dblclick",this._finishShape,this);n>3&&this._markers[n-2].off("dblclick",this._finishShape,this)}},_getTooltipText:function(){var n,t;return this._markers.length===0?n=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(n=L.drawLocal.draw.handlers.polygon.tooltip.cont,t=this._getMeasurementString()):(n=L.drawLocal.draw.handlers.polygon.tooltip.end,t=this._getMeasurementString()),{text:n,subtext:t}},_getMeasurementString:function(){var n=this._area,t="";return!n&&!this.options.showLength?null:(this.options.showLength&&(t=L.Draw.Polyline.prototype._getMeasurementString.call(this)),n&&(t+="<br>"+L.GeometryUtil.readableArea(n,this.options.metric,this.options.precision)),t)},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(n,t){var i;!this.options.allowIntersection&&this.options.showArea&&(i=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(i));L.Draw.Polyline.prototype._vertexChanged.call(this,n,t)},_cleanUpShape:function(){var n=this._markers.length;n>0&&(this._markers[0].off("click",this._finishShape,this),n>2&&this._markers[n-1].off("dblclick",this._finishShape,this))}});L.SimpleShape={};L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(n,t){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end;L.Draw.Feature.prototype.initialize.call(this,n,t)},addHooks:function(){if(L.Draw.Feature.prototype.addHooks.call(this),this._map){this._mapDraggable=this._map.dragging.enabled();this._mapDraggable&&this._map.dragging.disable();this._container.style.cursor="crosshair";this._tooltip.updateContent({text:this._initialLabelText});this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this);t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1})}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape));this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(n){this._isDrawing=!0;this._startLatLng=n.latlng;L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(n.originalEvent)},_onMouseMove:function(n){var t=n.latlng;this._tooltip.updatePosition(t);this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(t))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()}});L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,showArea:!0,clickable:!0},metric:!0},initialize:function(n,t){this.type=L.Draw.Rectangle.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,n,t)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(n){if(!this._shape&&!this._isCurrentlyTwoClickDrawing){this._isCurrentlyTwoClickDrawing=!0;return}(!this._isCurrentlyTwoClickDrawing||i(n.target,"leaflet-pane"))&&L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,n),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_getTooltipText:function(){var r=L.Draw.SimpleShape.prototype._getTooltipText.call(this),u=this._shape,f=this.options.showArea,n,t,i;return u&&(n=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),t=L.GeometryUtil.geodesicArea(n),i=f?L.GeometryUtil.readableArea(t,this.options.metric):""),{text:r.text,subtext:i}}});L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(n,t){this.type=L.Draw.Marker.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start;L.Draw.Feature.prototype.initialize.call(this,n,t)},addHooks:function(){if(L.Draw.Feature.prototype.addHooks.call(this),this._map){this._tooltip.updateContent({text:this._initialLabelText});this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset}));this._mouseMarker.on("click",this._onClick,this).addTo(this._map);this._map.on("mousemove",this._onMouseMove,this);this._map.on("click",this._onTouch,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(n){var t=n.latlng;if(this._tooltip.updatePosition(t),this._mouseMarker.setLatLng(t),this._marker)t=this._mouseMarker.getLatLng(),this._marker.setLatLng(t);else{this._marker=this._createMarker(t);this._marker.on("click",this._onClick,this);this._map.on("click",this._onClick,this).addLayer(this._marker)}},_createMarker:function(n){return new L.Marker(n,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_onTouch:function(n){this._onMouseMove(n);this._onClick()},_fireCreatedEvent:function(){var n=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}});L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(n,t){this.type=L.Draw.CircleMarker.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start;L.Draw.Feature.prototype.initialize.call(this,n,t)},_fireCreatedEvent:function(){var n=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)},_createMarker:function(n){return new L.CircleMarker(n,this.options)}});L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(n,t){this.type=L.Draw.Circle.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,n,t)},_drawShape:function(n){var t;t=L.GeometryUtil.isVersion07x()?this._startLatLng.distanceTo(n):this._map.distance(this._startLatLng,n);this._shape?this._shape.setRadius(t):(this._shape=new L.Circle(this._startLatLng,t,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)},_onMouseMove:function(n){var i=n.latlng,u=this.options.showRadius,f=this.options.metric,r,t;this._tooltip.updatePosition(i);this._isDrawing&&(this._drawShape(i),r=this._shape.getRadius().toFixed(1),t="",u&&(t=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(r,f,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:t}))}});L.Edit=L.Edit||{};L.Edit.Marker=L.Handler.extend({initialize:function(n,t){this._marker=n;L.setOptions(this,t)},addHooks:function(){var n=this._marker;n.dragging&&n.dragging.enable();n.on("dragend",this._onDragEnd,n);this._toggleMarkerHighlight()},removeHooks:function(){var n=this._marker;n.dragging&&n.dragging.disable();n.off("dragend",this._onDragEnd,n);this._toggleMarkerHighlight()},_onDragEnd:function(n){var t=n.target;t.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:t})},_toggleMarkerHighlight:function(){var n=this._marker._icon;n&&(n.style.display="none",L.DomUtil.hasClass(n,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,-4)):(L.DomUtil.addClass(n,"leaflet-edit-marker-selected"),this._offsetMarker(n,4)),n.style.display="")},_offsetMarker:function(n,t){var i=parseInt(n.style.marginTop,10)-t,r=parseInt(n.style.marginLeft,10)-t;n.style.marginTop=i+"px";n.style.marginLeft=r+"px"}});L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({initialize:function(n){this.latlngs=[n._latlngs];n._holes&&(this.latlngs=this.latlngs.concat(n._holes));this._poly=n;this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.LineUtil.isFlat?L.LineUtil.isFlat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(n){for(var t=0;t<this._verticesHandlers.length;t++)n(this._verticesHandlers[t])},addHooks:function(){this._initHandlers();this._eachVertexHandler(function(n){n.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(n){n.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(n){n.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var n=0;n<this.latlngs.length;n++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[n],this._poly.options.poly))},_updateLatLngs:function(n){this.latlngs=[n.layer._latlngs];n.layer._holes&&(this.latlngs=this.latlngs.concat(n.layer._holes))}});L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(15,15),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(n,t,i){L.Browser.touch&&(this.options.icon=this.options.touchIcon);this._poly=n;i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError));this._latlngs=t;L.setOptions(this,i)},_defaultShape:function(){return L.LineUtil.isFlat?L.LineUtil.isFlat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var n=this._poly,t=n._path;n.options.editing==null&&n.editing&&(n.options.editing=n.editing);n instanceof L.Polygon||(n.options.fill=!1,n.options.editing&&(n.options.editing.fill=!1));t&&n.options.editing.className&&(n.options.original.className&&n.options.original.className.split(" ").forEach(function(n){L.DomUtil.removeClass(t,n)}),n.options.editing.className.split(" ").forEach(function(n){L.DomUtil.addClass(t,n)}));n.setStyle(n.options.editing);this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var n=this._poly,t=n._path;t&&n.editing.className&&(n.editing.className.split(" ").forEach(function(n){L.DomUtil.removeClass(t,n)}),n.options.original.className&&n.options.original.className.split(" ").forEach(function(n){L.DomUtil.addClass(t,n)}));n.setStyle(n.options.original);n._map&&(n._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){var r,n,u,t,i,f,e;for(this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[],r=this._defaultShape(),n=0,t=r.length;n<t;n++){i=this._createMarker(r[n],n);i.on("click",this._onMarkerClick,this);i.on("contextmenu",this._onContextMenu,this);this._markers.push(i)}for(n=0,u=t-1;n<t;u=n++)(n!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(f=this._markers[u],e=this._markers[n],this._createMiddleMarker(f,e),this._updatePrevNext(f,e))},_createMarker:function(n,t){var i=new L.Marker.Touch(n,{draggable:!0,icon:this.options.icon});i._origLatLng=n;i._index=t;i.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this);return this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var n=this._defaultShape(),t=[].splice.apply(n,arguments);return this._poly._convertLatLngs(n,!0),this._poly.redraw(),t},_removeMarker:function(n){var t=n._index;this._markerGroup.removeLayer(n);this._markers.splice(t,1);this._spliceLatLngs(t,1);this._updateIndexes(t,-1);n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire("edit");this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(n){var t=n.target,i=this._poly,r,u,f;L.extend(t._origLatLng,t._latlng);t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t));t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next));i.options.poly&&(r=i._map._editTooltip,!i.options.poly.allowIntersection&&i.intersects()&&(u=i.options.color,i.setStyle({color:this.options.drawError.color}),L.version.indexOf("0.7")!==0&&t.dragging._draggable._onUp(n),this._onMarkerClick(n),r&&r.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){i.setStyle({color:u});r&&r.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)));this._poly._bounds._southWest=L.latLng(Infinity,Infinity);this._poly._bounds._northEast=L.latLng(-Infinity,-Infinity);f=this._poly.getLatLngs();this._poly._convertLatLngs(f,!0);this._poly.redraw();this._poly.fire("editdrag");this._map&&this._map.fire("draw:editing",{layer:this._poly})},_onMarkerClick:function(n){var i=L.Polygon&&this._poly instanceof L.Polygon?4:3,t=n.target;this._defaultShape().length<i||(this._removeMarker(t),this._updatePrevNext(t._prev,t._next),t._middleLeft&&this._markerGroup.removeLayer(t._middleLeft),t._middleRight&&this._markerGroup.removeLayer(t._middleRight),t._prev&&t._next?this._createMiddleMarker(t._prev,t._next):t._prev?t._next||(t._prev._middleRight=null):t._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(n){var t=n.target,i=this._poly;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:t,layers:this._markerGroup,poly:this._poly});L.DomEvent.stopPropagation},_onTouchMove:function(n){var i=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),r=this._map.layerPointToLatLng(i),t=n.target;L.extend(t._origLatLng,r);t._middleLeft&&t._middleLeft.setLatLng(this._getMiddleLatLng(t._prev,t));t._middleRight&&t._middleRight.setLatLng(this._getMiddleLatLng(t,t._next));this._poly.redraw();this.updateMarkers()},_updateIndexes:function(n,t){this._markerGroup.eachLayer(function(i){i._index>n&&(i._index+=t)})},_createMiddleMarker:function(n,t){var u=this._getMiddleLatLng(n,t),i=this._createMarker(u),e,r,f;i.setOpacity(.6);n._middleRight=t._middleLeft=i;r=function(){i.off("touchmove",r,this);var f=t._index;i._index=f;i.off("click",e,this).on("click",this._onMarkerClick,this);u.lat=i.getLatLng().lat;u.lng=i.getLatLng().lng;this._spliceLatLngs(f,0,u);this._markers.splice(f,0,i);i.setOpacity(1);this._updateIndexes(f,1);t._index++;this._updatePrevNext(n,i);this._updatePrevNext(i,t);this._poly.fire("editstart")};f=function(){i.off("dragstart",r,this);i.off("dragend",f,this);i.off("touchmove",r,this);this._createMiddleMarker(n,i);this._createMiddleMarker(i,t)};e=function(){r.call(this);f.call(this);this._fireEdit()};i.on("click",e,this).on("dragstart",r,this).on("dragend",f,this).on("touchmove",r,this);this._markerGroup.addLayer(i)},_updatePrevNext:function(n,t){n&&(n._next=t);t&&(t._prev=n)},_getMiddleLatLng:function(n,t){var i=this._poly._map,r=i.project(n.getLatLng()),u=i.project(t.getLatLng());return i.unproject(r._add(u)._divideBy(2))}});L.Polyline.addInitHook(function(){if(!this.editing){L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}});L.Edit=L.Edit||{};L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(15,15),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(15,15),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(n,t){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon);this._shape=n;L.Util.setOptions(this,t)},addHooks:function(){var n=this._shape;this._shape._map&&(this._map=this._shape._map,n.setStyle(n.options.editing),n._map&&(this._map=n._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var t=this._shape,n,i;if(t.setStyle(t.options.original),t._map){for(this._unbindMarker(this._moveMarker),n=0,i=this._resizeMarkers.length;n<i;n++)this._unbindMarker(this._resizeMarkers[n]);this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._createMoveMarker();this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(n,t){var i=new L.Marker.Touch(n,{draggable:!0,icon:t,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(n){n.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(n){n.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(n){var t=n.target;t.setOpacity(0);this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0;this._shape.fire("edit")},_onMarkerDrag:function(n){var t=n.target,i=t.getLatLng();t===this._moveMarker?this._move(i):this._resize(i);this._shape.redraw();this._shape.fire("editdrag")},_onMarkerDragEnd:function(n){var t=n.target;t.setOpacity(1);this._fireEdit()},_onTouchStart:function(n){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n),typeof this._getCorners=="function"){var r=this._getCorners(),t=n.target,i=t._cornerIndex;t.setOpacity(0);this._oppositeCorner=r[(i+2)%4];this._toggleCornerMarkers(0,i)}this._shape.fire("editstart")},_onTouchMove:function(n){var i=this._map.mouseEventToLayerPoint(n.originalEvent.touches[0]),t=this._map.layerPointToLatLng(i),r=n.target;return r===this._moveMarker?this._move(t):this._resize(t),this._shape.redraw(),!1},_onTouchEnd:function(n){var t=n.target;t.setOpacity(1);this.updateMarkers();this._fireEdit()},_move:function(){},_resize:function(){}});L.Edit=L.Edit||{};L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getBounds(),t=n.getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners(),n,i;for(this._resizeMarkers=[],n=0,i=t.length;n<i;n++)this._resizeMarkers.push(this._createMarker(t[n],this.options.resizeIcon)),this._resizeMarkers[n]._cornerIndex=n},_onMarkerDragStart:function(n){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,n);var i=this._getCorners(),r=n.target,t=r._cornerIndex;this._oppositeCorner=i[(t+2)%4];this._toggleCornerMarkers(0,t)},_onMarkerDragEnd:function(n){var t=n.target,i,r;t===this._moveMarker&&(i=this._shape.getBounds(),r=i.getCenter(),t.setLatLng(r));this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,n)},_move:function(n){for(var i=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),e=this._shape.getBounds(),u=e.getCenter(),r,f=[],t=0,o=i.length;t<o;t++)r=[i[t].lat-u.lat,i[t].lng-u.lng],f.push([n.lat+r[0],n.lng+r[1]]);this._shape.setLatLngs(f);this._repositionCornerMarkers();this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(n){var t;this._shape.setBounds(L.latLngBounds(n,this._oppositeCorner));t=this._shape.getBounds();this._moveMarker.setLatLng(t.getCenter());this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var n=this._shape.getBounds(),t=n.getNorthWest(),i=n.getNorthEast(),r=n.getSouthEast(),u=n.getSouthWest();return[t,i,r,u]},_toggleCornerMarkers:function(n){for(var t=0,i=this._resizeMarkers.length;t<i;t++)this._resizeMarkers[t].setOpacity(n)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),n=0,i=this._resizeMarkers.length;n<i;n++)this._resizeMarkers[n].setLatLng(t[n])}});L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var n=this._shape.getLatLng();this._moveMarker=this._createMarker(n,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(n){if(this._resizeMarkers.length){var t=this._getResizeMarkerPoint(n);this._resizeMarkers[0].setLatLng(t)}this._shape.setLatLng(n);this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}});L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})});L.Edit=L.Edit||{};L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var n=this._shape.getLatLng(),t=this._getResizeMarkerPoint(n);this._resizeMarkers=[];this._resizeMarkers.push(this._createMarker(t,this.options.resizeIcon))},_getResizeMarkerPoint:function(n){var t=this._shape._radius*Math.cos(Math.PI/4),i=this._map.project(n);return this._map.unproject([i.x+t,i.y-t])},_resize:function(n){var t=this._moveMarker.getLatLng();radius=L.GeometryUtil.isVersion07x()?t.distanceTo(n):this._map.distance(t,n);this._shape.setRadius(radius);this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)});this._shape.setRadius(radius);this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}});L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})});L.Map.mergeOptions({touchExtend:!0});L.Map.TouchExtend=L.Handler.extend({initialize:function(n){this._map=n;this._container=n._container;this._pane=n._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this);L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this);if(this._detectIE()){L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this);L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this);L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this);L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)}else{L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this);L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this)}},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart);L.DomEvent.off(this._container,"touchend",this._onTouchEnd);L.DomEvent.off(this._container,"touchmove",this._onTouchMove);this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(n,t){var i={};if(typeof n.touches!="undefined"){if(!n.touches.length)return;i=n.touches[0]}else if(n.pointerType==="touch"){if(i=n,!this._filterClick(n))return}else return;var u=this._map.mouseEventToContainerPoint(i),r=this._map.mouseEventToLayerPoint(i),f=this._map.layerPointToLatLng(r);this._map.fire(t,{latlng:f,layerPoint:r,containerPoint:u,pageX:i.pageX,pageY:i.pageY,originalEvent:n})},_filterClick:function(n){var i=n.timeStamp||n.originalEvent.timeStamp,t=L.DomEvent._lastClick&&i-L.DomEvent._lastClick;return t&&t>100&&t<500||n.target._simulatedClick&&!n._simulated?(L.DomEvent.stop(n),!1):(L.DomEvent._lastClick=i,!0)},_onTouchStart:function(n){if(this._map._loaded)this._touchEvent(n,"touchstart")},_onTouchEnd:function(n){if(this._map._loaded)this._touchEvent(n,"touchend")},_onTouchCancel:function(n){if(this._map._loaded){var t="touchcancel";this._detectIE()&&(t="pointercancel");this._touchEvent(n,t)}},_onTouchLeave:function(n){if(this._map._loaded)this._touchEvent(n,"touchleave")},_onTouchMove:function(n){if(this._map._loaded)this._touchEvent(n,"touchmove")},_detectIE:function(){var t=n.navigator.userAgent,r=t.indexOf("MSIE "),f,u,i;return r>0?parseInt(t.substring(r+5,t.indexOf(".",r)),10):(f=t.indexOf("Trident/"),f>0)?(u=t.indexOf("rv:"),parseInt(t.substring(u+3,t.indexOf(".",u)),10)):(i=t.indexOf("Edge/"),i>0)?parseInt(t.substring(i+5,t.indexOf(".",i)),10):!1}});L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend);L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){var n,t,i;if(this.options.clickable){n=this._icon;t=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?t.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):t.concat(["touchcancel"]);L.DomUtil.addClass(n,"leaflet-clickable");L.DomEvent.on(n,"click",this._onMouseClick,this);L.DomEvent.on(n,"keypress",this._onKeyPress,this);for(i=0;i<t.length;i++)L.DomEvent.on(n,t[i],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var t=n.navigator.userAgent,r=t.indexOf("MSIE "),f,u,i;return r>0?parseInt(t.substring(r+5,t.indexOf(".",r)),10):(f=t.indexOf("Trident/"),f>0)?(u=t.indexOf("rv:"),parseInt(t.substring(u+3,t.indexOf(".",u)),10)):(i=t.indexOf("Edge/"),i>0)?parseInt(t.substring(i+5,t.indexOf(".",i)),10):!1}});L.LatLngUtil={cloneLatLngs:function(n){for(var i=[],t=0,r=n.length;t<r;t++)Array.isArray(n[t])?i.push(L.LatLngUtil.cloneLatLngs(n[t])):i.push(this.cloneLatLng(n[t]));return i},cloneLatLng:function(n){return L.latLng(n.lat,n.lng)}},function(){var n={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(n){var r=n.length,i=0,u=Math.PI/180,f,e,t;if(r>2){for(t=0;t<r;t++)f=n[t],e=n[(t+1)%r],i+=(e.lng-f.lng)*u*(2+Math.sin(f.lat*u)+Math.sin(e.lat*u));i=i*40680631590769/2}return Math.abs(i)},formattedNumber:function(n,t){var i=parseFloat(n).toFixed(t),o=L.drawLocal.format&&L.drawLocal.format.numeric,u=o&&o.delimiters,e=u&&u.thousands,f=u&&u.decimal,r;return(e||f)&&(r=i.split("."),i=e?r[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+e):r[0],f=f||".",r.length>1&&(i=i+f+r[1])),i},readableArea:function(t,i,r){var f,u,r=L.Util.extend({},n,r);return i?(u=["ha","m"],type=typeof i,type==="string"?u=[i]:type!=="boolean"&&(u=i),f=t>=1e6&&u.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(t*1e-6,r.km)+" km":t>=1e4&&u.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(t*.0001,r.ha)+" ha":L.GeometryUtil.formattedNumber(t,r.m)+" m"):(t/=.836127,f=t>=3097600?L.GeometryUtil.formattedNumber(t/3097600,r.mi)+" mi":t>=4840?L.GeometryUtil.formattedNumber(t/4840,r.ac)+" acres":L.GeometryUtil.formattedNumber(t,r.yd)+" yd"),f},readableDistance:function(t,i,r,u,f){var e,o,f=L.Util.extend({},n,f);o=i?typeof i=="string"?i:"metric":r?"feet":u?"nauticalMile":"yards";switch(o){case"metric":e=t>1e3?L.GeometryUtil.formattedNumber(t/1e3,f.km)+" km":L.GeometryUtil.formattedNumber(t,f.m)+" m";break;case"feet":t*=1.09361*3;e=L.GeometryUtil.formattedNumber(t,f.ft)+" ft";break;case"nauticalMile":t*=.53996;e=L.GeometryUtil.formattedNumber(t/1e3,f.nm)+" nm";break;case"yards":default:t*=1.09361;e=t>1760?L.GeometryUtil.formattedNumber(t/1760,f.mi)+" miles":L.GeometryUtil.formattedNumber(t,f.yd)+" yd"}return e},isVersion07x:function(){var n=L.version.split(".");return parseInt(n[0],10)===0&&parseInt(n[1],10)===7}})}();L.Util.extend(L.LineUtil,{segmentsIntersect:function(n,t,i,r){return this._checkCounterclockwise(n,i,r)!==this._checkCounterclockwise(t,i,r)&&this._checkCounterclockwise(n,t,i)!==this._checkCounterclockwise(n,t,r)},_checkCounterclockwise:function(n,t,i){return(i.y-n.y)*(t.x-n.x)>(t.y-n.y)*(i.x-n.x)}});L.Polyline.include({intersects:function(){var t=this._getProjectedPoints(),u=t?t.length:0,n,i,r;if(this._tooFewPointsForIntersection())return!1;for(n=u-1;n>=3;n--)if(i=t[n-1],r=t[n],this._lineSegmentsIntersectsRange(i,r,n-2))return!0;return!1},newLatLngIntersects:function(n,t){return this._map?this.newPointIntersects(this._map.latLngToLayerPoint(n),t):!1},newPointIntersects:function(n,t){var i=this._getProjectedPoints(),r=i?i.length:0,u=i?i[r-1]:null,f=r-2;return this._tooFewPointsForIntersection(1)?!1:this._lineSegmentsIntersectsRange(u,n,f,t?1:0)},_tooFewPointsForIntersection:function(n){var t=this._getProjectedPoints(),i=t?t.length:0;return i+=n||0,!t||i<=3},_lineSegmentsIntersectsRange:function(n,t,i,r){var f=this._getProjectedPoints(),e,o,u;for(r=r||0,u=i;u>r;u--)if(e=f[u-1],o=f[u],L.LineUtil.segmentsIntersect(n,t,e,o))return!0;return!1},_getProjectedPoints:function(){var t,i,n;if(!this._defaultShape)return this._originalPoints;for(t=[],i=this._defaultShape(),n=0;n<i.length;n++)t.push(this._map.latLngToLayerPoint(i[n]));return t}});L.Polygon.include({intersects:function(){var i,n=this._getProjectedPoints(),t,r,u,f;return this._tooFewPointsForIntersection()?!1:(i=L.Polyline.prototype.intersects.call(this),i)?!0:(t=n.length,r=n[0],u=n[t-1],f=t-2,this._lineSegmentsIntersectsRange(u,r,f,1))}});L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(n){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,n);var t;if(this._toolbars={},L.DrawToolbar&&this.options.draw){t=new L.DrawToolbar(this.options.draw);this._toolbars[L.DrawToolbar.TYPE]=t;this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)}if(L.EditToolbar&&this.options.edit){t=new L.EditToolbar(this.options.edit);this._toolbars[L.EditToolbar.TYPE]=t;this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)}L.toolbar=this},onAdd:function(n){var i=L.DomUtil.create("div","leaflet-draw"),r=!1,u="leaflet-draw-toolbar-top",t;for(var f in this._toolbars)this._toolbars.hasOwnProperty(f)&&(t=this._toolbars[f].addToolbar(n),t&&(r||(L.DomUtil.hasClass(t,u)||L.DomUtil.addClass(t.childNodes[0],u),r=!0),i.appendChild(t)));return i},onRemove:function(){for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&this._toolbars[n].removeToolbar()},setDrawingOptions:function(n){for(var t in this._toolbars)this._toolbars[t]instanceof L.DrawToolbar&&this._toolbars[t].setOptions(n)},_toolbarEnabled:function(n){var i=n.target;for(var t in this._toolbars)this._toolbars[t]!==i&&this._toolbars[t].disable()}});L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1});L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))});L.Toolbar=L.Class.extend({initialize:function(n){L.setOptions(this,n);this._modes={};this._actionButtons=[];this._activeMode=null;var t=L.version.split(".");parseInt(t[0],10)===1&&parseInt(t[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(n){var r=L.DomUtil.create("div","leaflet-draw-section"),u=0,f=this._toolbarClass||"",i=this.getModeHandlers(n),t;for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=n,t=0;t<i.length;t++)i[t].enabled&&this._initModeHandler(i[t].handler,this._toolbarContainer,u++,f,i[t].title);if(u)return this._lastButtonIndex=--u,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),r.appendChild(this._toolbarContainer),r.appendChild(this._actionsContainer),r},removeToolbar:function(){var n,t,i;for(n in this._modes)this._modes.hasOwnProperty(n)&&(this._disposeButton(this._modes[n].button,this._modes[n].handler.enable,this._modes[n].handler),this._modes[n].handler.disable(),this._modes[n].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));for(this._modes={},t=0,i=this._actionButtons.length;t<i;t++)this._disposeButton(this._actionButtons[t].button,this._actionButtons[t].callback,this);this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(n,t,i,r,u){var f=n.type;this._modes[f]={};this._modes[f].handler=n;this._modes[f].button=this._createButton({type:f,title:u,className:r+"-"+f,container:t,callback:this._modes[f].handler.enable,context:this._modes[f].handler});this._modes[f].buttonIndex=i;this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!n.MSStream},_createButton:function(n){var t=L.DomUtil.create("a",n.className||"",n.container),i=L.DomUtil.create("span","sr-only",n.container),r;t.href="#";t.appendChild(i);n.title&&(t.title=n.title,i.innerHTML=n.title);n.text&&(t.innerHTML=n.text,i.innerHTML=n.text);r=this._detectIOS()?"touchstart":"click";L.DomEvent.on(t,"click",L.DomEvent.stopPropagation).on(t,"mousedown",L.DomEvent.stopPropagation).on(t,"dblclick",L.DomEvent.stopPropagation).on(t,"touchstart",L.DomEvent.stopPropagation).on(t,"click",L.DomEvent.preventDefault).on(t,r,n.callback,n.context);return t},_disposeButton:function(n,t){var i=this._detectIOS()?"touchstart":"click";L.DomEvent.off(n,"click",L.DomEvent.stopPropagation).off(n,"mousedown",L.DomEvent.stopPropagation).off(n,"dblclick",L.DomEvent.stopPropagation).off(n,"touchstart",L.DomEvent.stopPropagation).off(n,"click",L.DomEvent.preventDefault).off(n,i,t)},_handlerActivated:function(n){this.disable();this._activeMode=this._modes[n.handler];L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._showActionsToolbar();this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._activeMode=null;this.fire("disable")},_createActions:function(n){for(var u=this._actionsContainer,i=this.getActions(n),s=i.length,f,o,t,r=0,e=this._actionButtons.length;r<e;r++)this._disposeButton(this._actionButtons[r].button,this._actionButtons[r].callback);for(this._actionButtons=[];u.firstChild;)u.removeChild(u.firstChild);for(t=0;t<s;t++)"enabled"in i[t]&&!i[t].enabled||(f=L.DomUtil.create("li","",u),o=this._createButton({title:i[t].title,text:i[t].text,container:f,callback:i[t].callback,context:i[t].context}),this._actionButtons.push({button:o,callback:i[t].callback}))},_showActionsToolbar:function(){var n=this._activeMode.buttonIndex,t=this._lastButtonIndex,i=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler);this._actionsContainer.style.top=i+"px";n===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top"));n===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom"));this._actionsContainer.style.display="block";this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none";L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom");this._map.fire(L.Draw.Event.TOOLBARCLOSED)}});L.Draw=L.Draw||{};L.Draw.Tooltip=L.Class.extend({initialize:function(n){this._map=n;this._popupPane=n._panes.popupPane;this._visible=!1;this._container=n.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null;this._singleLineLabel=!1;this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this);this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(n){return this._container?(n.subtext=n.subtext||"",n.subtext.length!==0||this._singleLineLabel?n.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(n.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+n.subtext+"<\/span><br />":"")+"<span>"+n.text+"<\/span>",n.text||n.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(n){var i=this._map.latLngToLayerPoint(n),t=this._container;return this._container&&(this._visible&&(t.style.visibility="inherit"),L.DomUtil.setPosition(t,i)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}});L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(n){for(var t in this.options)this.options.hasOwnProperty(t)&&n[t]&&(n[t]=L.extend({},this.options[t],n[t]));this._toolbarClass="leaflet-draw-draw";L.Toolbar.prototype.initialize.call(this,n)},getModeHandlers:function(n){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(n,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(n,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(n,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(n,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(n,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(n,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(n){return[{enabled:n.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:n.completeShape,context:n},{enabled:n.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:n.deleteLastVertex,context:n},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(n){L.setOptions(this,n);for(var t in this._modes)this._modes.hasOwnProperty(t)&&n.hasOwnProperty(t)&&this._modes[t].handler.setOptions(n[t])}});L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(n){n.edit&&(typeof n.edit.selectedPathOptions=="undefined"&&(n.edit.selectedPathOptions=this.options.edit.selectedPathOptions),n.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,n.edit.selectedPathOptions));n.remove&&(n.remove=L.extend({},this.options.remove,n.remove));n.poly&&(n.poly=L.extend({},this.options.poly,n.poly));this._toolbarClass="leaflet-draw-edit";L.Toolbar.prototype.initialize.call(this,n);this._selectedFeatureCount=0},getModeHandlers:function(n){var t=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(n,{featureGroup:t,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(n,{featureGroup:t}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(n){var t=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return n.removeAllLayers&&t.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),t},addToolbar:function(n){var t=L.Toolbar.prototype.addToolbar.call(this,n);this._checkDisabled();this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this);return t},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this);L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save();this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers();this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var i=this.options.featureGroup,t=i.getLayers().length!==0,n;this.options.edit&&(n=this._modes[L.EditToolbar.Edit.TYPE].button,t?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",t?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled));this.options.remove&&(n=this._modes[L.EditToolbar.Delete.TYPE].button,t?L.DomUtil.removeClass(n,"leaflet-disabled"):L.DomUtil.addClass(n,"leaflet-disabled"),n.setAttribute("title",t?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}});L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(n,t){if(L.Handler.prototype.initialize.call(this,n),L.setOptions(this,t),this._featureGroup=t.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE;var i=L.version.split(".");parseInt(i[0],10)===1&&parseInt(i[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){if(!this._enabled&&this._hasAvailableLayers()){this.fire("enabled",{handler:this.type});this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type});L.Handler.prototype.enable.call(this);this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this)}},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;if(n){n.getContainer().focus();this._featureGroup.eachLayer(this._enableLayerEdit,this);this._tooltip=new L.Draw.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext});n._editTooltip=this._tooltip;this._updateTooltip();this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this)}},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(n){this._revertLayer(n)},this)},save:function(){var n=new L.LayerGroup;this._featureGroup.eachLayer(function(t){t.edited&&(n.addLayer(t),t.edited=!1)});this._map.fire(L.Draw.Event.EDITED,{layers:n})},_backupLayer:function(n){var t=L.Util.stamp(n);this._uneditedLayerProps[t]||(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?this._uneditedLayerProps[t]={latlngs:L.LatLngUtil.cloneLatLngs(n.getLatLngs())}:n instanceof L.Circle?this._uneditedLayerProps[t]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng()),radius:n.getRadius()}:(n instanceof L.Marker||n instanceof L.CircleMarker)&&(this._uneditedLayerProps[t]={latlng:L.LatLngUtil.cloneLatLng(n.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(n){var t=L.Util.stamp(n);n.edited=!1;this._uneditedLayerProps.hasOwnProperty(t)&&(n instanceof L.Polyline||n instanceof L.Polygon||n instanceof L.Rectangle?n.setLatLngs(this._uneditedLayerProps[t].latlngs):n instanceof L.Circle?(n.setLatLng(this._uneditedLayerProps[t].latlng),n.setRadius(this._uneditedLayerProps[t].radius)):(n instanceof L.Marker||n instanceof L.CircleMarker)&&n.setLatLng(this._uneditedLayerProps[t].latlng),n.fire("revert-edited",{layer:n}))},_enableLayerEdit:function(n){var t=n.layer||n.target||n,i,r;if(this._backupLayer(t),this.options.poly&&(r=L.Util.extend({},this.options.poly),t.options.poly=r),this.options.selectedPathOptions&&(i=L.Util.extend({},this.options.selectedPathOptions),i.maintainColor&&(i.color=t.options.color,i.fillColor=t.options.fillColor),t.options.original=L.extend({},t.options),t.options.editing=i),t instanceof L.Marker){t.editing&&t.editing.enable();t.dragging.enable();t.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)}else t.editing.enable()},_disableLayerEdit:function(n){var t=n.layer||n.target||n;t.edited=!1;t.editing&&t.editing.disable();delete t.options.editing;delete t.options.original;this._selectedPathOptions&&(t instanceof L.Marker?this._toggleMarkerHighlight(t):(t.setStyle(t.options.previousOptions),delete t.options.previousOptions));t instanceof L.Marker?(t.dragging.disable(),t.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):t.editing.disable()},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_onMarkerDragEnd:function(n){var t=n.target;t.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:t})},_onTouchMove:function(n){var t=n.originalEvent.changedTouches[0],i=this._map.mouseEventToLayerPoint(t),r=this._map.layerPointToLatLng(i);n.target.setLatLng(r)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}});L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(n,t){if(L.Handler.prototype.initialize.call(this,n),L.Util.setOptions(this,t),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var i=L.version.split(".");parseInt(i[0],10)===1&&parseInt(i[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){if(!this._enabled&&this._hasAvailableLayers()){this.fire("enabled",{handler:this.type});this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type});L.Handler.prototype.enable.call(this);this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this)}},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var n=this._map;if(n){n.getContainer().focus();this._deletableLayers.eachLayer(this._enableLayerDelete,this);this._deletedLayers=new L.LayerGroup;this._tooltip=new L.Draw.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text});this._map.on("mousemove",this._onMouseMove,this)}},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(n){this._deletableLayers.addLayer(n);n.fire("revert-deleted",{layer:n})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(n){this._removeLayer({layer:n})},this);this.save()},_enableLayerDelete:function(n){var t=n.layer||n.target||n;t.on("click",this._removeLayer,this)},_disableLayerDelete:function(n){var t=n.layer||n.target||n;t.off("click",this._removeLayer,this);this._deletedLayers.removeLayer(t)},_removeLayer:function(n){var t=n.layer||n.target||n;this._deletableLayers.removeLayer(t);this._deletedLayers.addLayer(t);t.fire("deleted")},_onMouseMove:function(n){this._tooltip.updatePosition(n.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document)},function(){L.drawLocal.draw.toolbar.actions={title:"",text:""};L.drawLocal.draw.toolbar.finish={title:"",text:""};L.drawLocal.draw.toolbar.undo={title:"",text:""};L.drawLocal.draw.toolbar.buttons={polyline:"",polygon:"",rectangle:"",circle:"",marker:""};L.drawLocal.edit.toolbar.actions.save={title:".",text:""};L.drawLocal.edit.toolbar.actions.cancel={title:"",text:""};L.drawLocal.edit.toolbar.actions.clearAll={title:"",text:""};L.drawLocal.edit.toolbar.buttons={edit:"",editDisabled:"",remove:"",removeDisabled:""};L.drawLocal.draw.handlers.circle={tooltip:{start:""},radius:""};L.drawLocal.draw.handlers.marker={tooltip:{start:""}};L.drawLocal.draw.handlers.polygon={tooltip:{start:"",cont:"",end:""}};L.drawLocal.draw.handlers.polyline={error:"<strong>:<\/strong> !",tooltip:{start:"",cont:"",end:","}};L.drawLocal.draw.handlers.rectangle={tooltip:{start:""}};L.drawLocal.draw.handlers.simpleshape={tooltip:{end:""}};L.drawLocal.edit.handlers.edit={tooltip:{text:"",subtext:""}};L.drawLocal.edit.handlers.remove={tooltip:{text:""}};L.Edit.Marker.prototype._toggleMarkerHighlight=function(){};L.Draw.Text=L.Draw.Marker.extend({statics:{TYPE:"text"},options:{repeatMode:!1},initialize:function(n,t){t=t||{};t.icon=this.getIcon();this.type=L.Draw.Text.TYPE;L.Draw.Feature.prototype.initialize.call(this,n,t)},updateIcon:function(n){this.options.icon=this.getIcon(n)},defaultIconAttr:{text:"",color:"#0081c2",font_size:25,font_family:"",font_style:"normal",font_weight:"normal",background:!1,border:!1},getIcon:function(n){n=n||this.defaultIconAttr;n.text=n.text||this.defaultIconAttr.text;var t=this.getTextSize(n),i=this.getTextCSS(n);return L.divIcon({className:"leaflet-text-marker",iconSize:[t.width,t.height],iconAnchor:[t.width/2,t.height/2],html:'<div style="'+i+'">'+n.text+"<\/div>"})},getTextSize:function(n){for(var u,f,e,t=n.text.split("<br />"),i=-1,r=0;r<t.length;r++)u=t[r].replace(/[\u0391-\uFFE5]/g,"aa").length,u>i&&(i=u);return f=i*(n.font_size||this.defaultIconAttr.font_size)/2+10,e=t.length*(n.font_size||this.defaultIconAttr.font_size)*1.5+10,{width:f,height:e}},getTextCSS:function(n){var t="display:table; padding:5px; color:"+(n.color||this.defaultIconAttr.color)+";    font-size:"+(n.font_size||this.defaultIconAttr.font_size)+"px;  font-family:'"+(n.font_family||this.defaultIconAttr.font_family)+"';   font-style:"+(n.font_style||this.defaultIconAttr.font_style)+";    font-weight:"+(n.font_weight||this.defaultIconAttr.font_weight)+";";return n.background&&(t+="background-color: "+n.background_color+";  "),n.border&&(t+="border: "+n.border_width+"px  "+n.border_style+" "+n.border_color+" ;  "),t},_createMarker:function(n){return new L.Marker(n,{draggable:!0,icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onMouseMove:function(n){var t=n.latlng;if(this._mouseMarker&&this._mouseMarker.setLatLng(t),this._marker)this._mouseMarker&&(t=this._mouseMarker.getLatLng()),this._marker.setLatLng(t);else{this._marker=this._createMarker(t);this._marker.on("click",this._onClick,this);this._map.on("click",this._onClick,this).addLayer(this._marker)}}});L.Draw.FontMarker=L.Draw.Marker.extend({statics:{TYPE:"font-marker"},initialize:function(n,t){t=t||{};t.icon=this.getIcon();this.type=L.Draw.FontMarker.TYPE;L.Draw.Feature.prototype.initialize.call(this,n,t)},updateIcon:function(n){this.options.icon=this.getIcon(n)},defaultIconAttr:{size:50,color:"#0081c2",iconClass:"fa fa-crosshairs"},getIcon:function(n){return n=n||this.defaultIconAttr,n.size=n.size||this.defaultIconAttr.size,n.color=n.color||this.defaultIconAttr.color,n.iconClass=n.iconClass||this.defaultIconAttr.iconClass,L.divIcon({className:"",html:'<i class="'+n.iconClass+'" style="color:'+n.color+";font-size:"+n.size+'px;"><\/i> ',iconSize:[n.size+2,n.size+2]})}});L.ImageOverlay=L.ImageOverlay.extend({getLatLngs:function(){return this._boundsToLatLngs(this.getBounds())},_boundsToLatLngs:function(n){return n=L.latLngBounds(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]},toGeoJSON:function(){var n=this.getLatLngs(),t=!L.LineUtil.isFlat(n),r=t&&!L.LineUtil.isFlat(n[0]),i=L.json.latLngsToCoords(n,r?2:t?1:0,!0);return t||(i=[i]),L.json.getFeature(this,{type:(r?"Multi":"")+"Polygon",coordinates:i})}});L.Draw.Image=L.Draw.Rectangle.extend({statics:{TYPE:"image"},_defstyle:{weight:1,fill:!0,fillOpacity:.1,color:"#ffffff",showArea:!1,clickable:!0},options:{iconUrl:"",opacity:1,metric:!0},initialize:function(n,t){this.type=L.Draw.Image.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,n,t)},_drawShape:function(n){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,n)):(this._shape=new L.ImageOverlay(this.options.iconUrl,new L.LatLngBounds(this._startLatLng,n),{opacity:this.options.opacity}),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Rectangle(this._shape.getBounds(),this._defstyle);imageOverlay=new L.ImageOverlay(this.options.iconUrl,this._shape.getBounds(),{opacity:this.options.opacity});n._imageOverlay=imageOverlay;L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,n)}});L.Draw.Polylinefree=L.Draw.SimpleShape.extend({statics:{TYPE:"polylinefree"},options:{allowIntersection:!0,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},nautic:!1},initialize:function(n,t){t&&t.drawError&&(t.drawError=L.Util.extend({},this.options.drawError,t.drawError));this.type=L.Draw.Polylinefree.TYPE;L.Draw.Feature.prototype.initialize.call(this,n,t)},_onMouseMove:function(n){this._isDrawing&&this._drawShape(n.latlng)},_drawShape:function(n){this._shape?this._shape.addLatLng(n):(this._shape=new L.Polyline([],this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var n=new L.Polyline(this._shape.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,n)}})},function(){L.SimpleGraticule=L.LayerGroup.extend({options:{interval:20,showOriginLabel:!0,redraw:"move",hidden:!1,zoomIntervals:[]},lineStyle:{stroke:!0,color:"#111",opacity:.6,weight:1,interactive:!1,clickable:!1},initialize:function(n){L.LayerGroup.prototype.initialize.call(this);L.Util.setOptions(this,n)},onAdd:function(n){this._map=n;var t=this.redraw();this._map.on("viewreset "+this.options.redraw,t.redraw,t);this.eachLayer(n.addLayer,n)},onRemove:function(n){n.off("viewreset "+this.options.redraw,this.map);this.eachLayer(this.removeLayer,this)},hide:function(){this.options.hidden=!0;this.redraw()},show:function(){this.options.hidden=!1;this.redraw()},redraw:function(){var t,n;if(this._bounds=this._map.getBounds().pad(.5),this.clearLayers(),!this.options.hidden){for(t=this._map.getZoom(),n=0;n<this.options.zoomIntervals.length;n++)if(t>=this.options.zoomIntervals[n].start&&t<=this.options.zoomIntervals[n].end){this.options.interval=this.options.zoomIntervals[n].interval;break}this.constructLines(this.getMins(),this.getLineCounts());this.options.showOriginLabel&&this.addLayer(this.addOriginLabel())}return this},getLineCounts:function(){return{x:Math.ceil((this._bounds.getEast()-this._bounds.getWest())/this.options.interval),y:Math.ceil((this._bounds.getNorth()-this._bounds.getSouth())/this.options.interval)}},getMins:function(){var n=this.options.interval;return{x:Math.floor(this._bounds.getWest()/n)*n,y:Math.floor(this._bounds.getSouth()/n)*n}},constructLines:function(n,t){for(var e,r,o,u=new Array(t.x+t.y),f=new Array(t.x+t.y),i=0;i<=t.x;i++)e=n.x+i*this.options.interval,u[i]=this.buildXLine(e),f[i]=this.buildLabel("gridlabel-horiz",e);for(r=0;r<=t.y;r++)o=n.y+r*this.options.interval,u[r+i]=this.buildYLine(o),f[r+i]=this.buildLabel("gridlabel-vert",o);u.forEach(this.addLayer,this);f.forEach(this.addLayer,this)},buildXLine:function(n){var t=new L.LatLng(this._bounds.getSouth(),n),i=new L.LatLng(this._bounds.getNorth(),n);return new L.Polyline([t,i],this.lineStyle)},buildYLine:function(n){var t=new L.LatLng(n,this._bounds.getWest()),i=new L.LatLng(n,this._bounds.getEast());return new L.Polyline([t,i],this.lineStyle)},buildLabel:function(n,t){var i=this._map.getBounds().pad(-.003),r,u;return r=n=="gridlabel-horiz"?new L.LatLng(i.getNorth(),t):new L.LatLng(t,i.getWest()),u=t.toFixed(1).replace(".0",""),L.marker(r,{interactive:!1,clickable:!1,icon:L.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="'+n+'">'+u+"<\/div>"})})},addOriginLabel:function(){return L.marker([0,0],{interactive:!1,clickable:!1,icon:L.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="gridlabel-horiz">(0,0)<\/div>'})})}});L.simpleGraticule=function(n){return new L.SimpleGraticule(n)}},function(){(function(n,t,i){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(n){L.Util.setOptions(this,n);this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction);this._featureGroup=L.featureGroup();this._featureGroup.addEventParent(this);this._nonPointGroup=L.featureGroup();this._nonPointGroup.addEventParent(this);this._inZoomAnimation=0;this._needsClustering=[];this._needsRemoving=[];this._currentShownBounds=null;this._queue=[];this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation);this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(n){if(n instanceof L.LayerGroup)return this.addLayers([n]);if(!n.getLatLng)return this._nonPointGroup.addLayer(n),this.fire("layeradd",{layer:n}),this;if(!this._map)return this._needsClustering.push(n),this.fire("layeradd",{layer:n}),this;if(this.hasLayer(n))return this;this._unspiderfy&&this._unspiderfy();this._addLayer(n,this._maxZoom);this.fire("layeradd",{layer:n});this._topClusterLevel._recalculateBounds();this._refreshClustersIcons();var t=n,i=this._zoom;if(n.__parent)while(t.__parent._zoom>=i)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(n,t):this._animationAddLayerNonAnimated(n,t)),this},removeLayer:function(n){return n instanceof L.LayerGroup?this.removeLayers([n]):n.getLatLng?this._map?n.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(n)),this._removeLayer(n,!0),this.fire("layerremove",{layer:n}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),n.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(n)&&(this._featureGroup.removeLayer(n),n.clusterShow&&n.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,n)&&this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}),this):(this._nonPointGroup.removeLayer(n),this.fire("layerremove",{layer:n}),this)},addLayers:function(n,t){var h,e,c;if(!L.Util.isArray(n))return this.addLayer(n);var l=this._featureGroup,o=this._nonPointGroup,a=this.options.chunkedLoading,v=this.options.chunkInterval,s=this.options.chunkProgress,u=n.length,r=0,f=!0,i;if(this._map)h=(new Date).getTime(),e=L.bind(function(){for(var w=(new Date).getTime(),y,c,p;r<u;r++){if(a&&r%200==0&&(y=(new Date).getTime()-w,y>v))break;if(i=n[r],i instanceof L.LayerGroup){f&&(n=n.slice(),f=!1);this._extractNonGroupLayers(i,n);u=n.length;continue}if(!i.getLatLng){o.addLayer(i);t||this.fire("layeradd",{layer:i});continue}this.hasLayer(i)||(this._addLayer(i,this._maxZoom),t||this.fire("layeradd",{layer:i}),i.__parent&&i.__parent.getChildCount()===2&&(c=i.__parent.getAllChildMarkers(),p=c[0]===i?c[1]:c[0],l.removeLayer(p)))}s&&s(r,u,(new Date).getTime()-h);r===u?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(e,this.options.chunkDelay)},this),e();else for(c=this._needsClustering;r<u;r++){if(i=n[r],i instanceof L.LayerGroup){f&&(n=n.slice(),f=!1);this._extractNonGroupLayers(i,n);u=n.length;continue}if(!i.getLatLng){o.addLayer(i);continue}this.hasLayer(i)||c.push(i)}return this},removeLayers:function(n){var i,t,r=n.length,o=this._featureGroup,s=this._nonPointGroup,u=!0,f,e;if(!this._map){for(i=0;i<r;i++){if(t=n[i],t instanceof L.LayerGroup){u&&(n=n.slice(),u=!1);this._extractNonGroupLayers(t,n);r=n.length;continue}this._arraySplice(this._needsClustering,t);s.removeLayer(t);this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng});this.fire("layerremove",{layer:t})}return this}if(this._unspiderfy)for(this._unspiderfy(),f=n.slice(),e=r,i=0;i<e;i++){if(t=f[i],t instanceof L.LayerGroup){this._extractNonGroupLayers(t,f);e=f.length;continue}this._unspiderfyLayer(t)}for(i=0;i<r;i++){if(t=n[i],t instanceof L.LayerGroup){u&&(n=n.slice(),u=!1);this._extractNonGroupLayers(t,n);r=n.length;continue}if(!t.__parent){s.removeLayer(t);this.fire("layerremove",{layer:t});continue}this._removeLayer(t,!0,!0);this.fire("layerremove",{layer:t});o.hasLayer(t)&&(o.removeLayer(t),t.clusterShow&&t.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(n){n.off(this._childMarkerEventHandlers,this);delete n.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var n=new L.LatLngBounds,t;for(this._topClusterLevel&&n.extend(this._topClusterLevel._bounds),t=this._needsClustering.length-1;t>=0;t--)n.extend(this._needsClustering[t].getLatLng());return n.extend(this._nonPointGroup.getBounds()),n},eachLayer:function(n,t){var r=this._needsClustering.slice(),e=this._needsRemoving,f,i,u;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),i=r.length-1;i>=0;i--){for(f=!0,u=e.length-1;u>=0;u--)if(e[u].layer===r[i]){f=!1;break}f&&n.call(t,r[i])}this._nonPointGroup.eachLayer(n,t)},getLayers:function(){var n=[];return this.eachLayer(function(t){n.push(t)}),n},getLayer:function(n){var t=null;return n=parseInt(n,10),this.eachLayer(function(i){L.stamp(i)===n&&(t=i)}),t},hasLayer:function(n){if(!n)return!1;for(var i=this._needsClustering,t=i.length-1;t>=0;t--)if(i[t]===n)return!0;for(i=this._needsRemoving,t=i.length-1;t>=0;t--)if(i[t].layer===n)return!1;return!!(n.__parent&&n.__parent._group===this)||this._nonPointGroup.hasLayer(n)},zoomToShowLayer:function(n,t){typeof t!="function"&&(t=function(){});var i=function(){if((n._icon||n.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",i,this),this.off("animationend",i,this),n._icon)t();else if(n.__parent._icon){this.once("spiderfied",t,this);n.__parent.spiderfy()}};if(n._icon&&this._map.getBounds().contains(n.getLatLng()))t();else if(n.__parent._zoom<Math.round(this._map._zoom)){this._map.on("moveend",i,this);this._map.panTo(n.getLatLng())}else{this._map.on("moveend",i,this);this.on("animationend",i,this);n.__parent.zoomToBounds()}},onAdd:function(n){this._map=n;var i,r,t;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(n),this._nonPointGroup.addTo(n),this._gridClusters||this._generateInitialClusters(),this._maxLat=n.options.crs.projection.MAX_LATITUDE,i=0,r=this._needsRemoving.length;i<r;i++)t=this._needsRemoving[i],t.newlatlng=t.layer._latlng,t.layer._latlng=t.latlng;for(i=0,r=this._needsRemoving.length;i<r;i++)t=this._needsRemoving[i],this._removeLayer(t.layer,!0),t.layer._latlng=t.newlatlng;this._needsRemoving=[];this._zoom=Math.round(this._map._zoom);this._currentShownBounds=this._getExpandedVisibleBounds();this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);this._spiderfierOnAdd&&this._spiderfierOnAdd();this._bindEvents();r=this._needsClustering;this._needsClustering=[];this.addLayers(r,!0)},onRemove:function(n){n.off("zoomend",this._zoomEnd,this);n.off("moveend",this._moveEnd,this);this._unbindEvents();this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","");this._spiderfierOnRemove&&this._spiderfierOnRemove();delete this._maxLat;this._hideCoverage();this._featureGroup.remove();this._nonPointGroup.remove();this._featureGroup.clearLayers();this._map=null},getVisibleParent:function(n){for(var t=n;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(n,t){for(var i=n.length-1;i>=0;i--)if(n[i]===t)return n.splice(i,1),!0},_removeFromGridUnclustered:function(n,t){for(var i=this._map,r=this._gridUnclustered,u=Math.floor(this._map.getMinZoom());t>=u;t--)if(!r[t].removeObject(n,i.project(n.getLatLng(),t)))break},_childMarkerDragStart:function(n){n.target.__dragStart=n.target._latlng},_childMarkerMoved:function(n){if(!this._ignoreMove&&!n.target.__dragStart){var t=n.target._popup&&n.target._popup.isOpen();this._moveChild(n.target,n.oldLatLng,n.latlng);t&&n.target.openPopup()}},_moveChild:function(n,t,i){n._latlng=t;this.removeLayer(n);n._latlng=i;this.addLayer(n)},_childMarkerDragEnd:function(n){n.target.__dragStart&&this._moveChild(n.target,n.target.__dragStart,n.target._latlng);delete n.target.__dragStart},_removeLayer:function(n,t,i){var s=this._gridClusters,h=this._gridUnclustered,f=this._featureGroup,e=this._map,c=Math.floor(this._map.getMinZoom()),r,o,u;for(t&&this._removeFromGridUnclustered(n,this._maxZoom),r=n.__parent,o=r._markers,this._arraySplice(o,n);r;){if(r._childCount--,r._boundsNeedUpdate=!0,r._zoom<c)break;else t&&r._childCount<=1?(u=r._markers[0]===n?r._markers[1]:r._markers[0],s[r._zoom].removeObject(r,e.project(r._cLatLng,r._zoom)),h[r._zoom].addObject(u,e.project(u.getLatLng(),r._zoom)),this._arraySplice(r.__parent._childClusters,r),r.__parent._markers.push(u),u.__parent=r.__parent,r._icon&&(f.removeLayer(r),i||f.addLayer(u))):r._iconNeedsUpdate=!0;r=r.__parent}delete n.__parent},_isOrIsParent:function(n,t){while(t){if(n===t)return!0;t=t.parentNode}return!1},fire:function(n,t,i){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;n="cluster"+n}L.FeatureGroup.prototype.fire.call(this,n,t,i)},listens:function(n,t){return L.FeatureGroup.prototype.listens.call(this,n,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+n,t)},_defaultIconCreateFunction:function(n){var t=n.getChildCount(),i=" marker-cluster-";return i+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"<\/span><\/div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var n=this._map,t=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick;if(t||r)this.on("clusterclick",this._zoomOrSpiderfy,this);if(i){this.on("clustermouseover",this._showCoverage,this);this.on("clustermouseout",this._hideCoverage,this);n.on("zoomend",this._hideCoverage,this)}},_zoomOrSpiderfy:function(n){for(var i=n.layer,t=i;t._childClusters.length===1;)t=t._childClusters[0];t._zoom===this._maxZoom&&t._childCount===i._childCount&&this.options.spiderfyOnMaxZoom?i.spiderfy():this.options.zoomToBoundsOnClick&&i.zoomToBounds();n.originalEvent&&n.originalEvent.keyCode===13&&this._map._container.focus()},_showCoverage:function(n){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),n.layer.getChildCount()>2&&n.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(n.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var n=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,r=this._map;(n||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this);t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),r.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var n=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,n);this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),n);this._currentShownBounds=n;return}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),u=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,r=i,n;for(typeof i!="function"&&(r=function(){return i}),this.options.disableClusteringAtZoom!==null&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={},n=t;n>=u;n--)this._gridClusters[n]=new L.DistanceGrid(r(n)),this._gridUnclustered[n]=new L.DistanceGrid(r(n));this._topClusterLevel=new this._markerCluster(this,u-1)},_addLayer:function(n,t){var s=this._gridClusters,h=this._gridUnclustered,c=Math.floor(this._map.getMinZoom()),e,r,i,o,u,f;this.options.singleMarkerMode&&this._overrideMarkerIcon(n);n.on(this._childMarkerEventHandlers,this);for(;t>=c;t--){if(e=this._map.project(n.getLatLng(),t),i=s[t].getNearObject(e),i){i._addChild(n);n.__parent=i;return}if(i=h[t].getNearObject(e),i){for(o=i.__parent,o&&this._removeLayer(i,!1),u=new this._markerCluster(this,t,i,n),s[t].addObject(u,this._map.project(u._cLatLng,t)),i.__parent=u,n.__parent=u,f=u,r=t-1;r>o._zoom;r--)f=new this._markerCluster(this,r,f),s[r].addObject(f,this._map.project(i.getLatLng(),r));o._addChild(f);this._removeFromGridUnclustered(i,t);return}h[t].addObject(n,e)}this._topClusterLevel._addChild(n);n.__parent=this._topClusterLevel;return},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(n){n instanceof L.MarkerCluster&&n._iconNeedsUpdate&&n._updateIcon()})},_enqueue:function(n){this._queue.push(n);this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var n=0;n<this._queue.length;n++)this._queue[n].call(this);this._queue.length=0;clearTimeout(this._queueTimeout);this._queueTimeout=null},_mergeSplitClusters:function(){var n=Math.round(this._map._zoom);this._processQueue();this._zoom<n&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,n)):this._zoom>n?(this._animationStart(),this._animationZoomOut(this._zoom,n)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(n){var t=this._maxLat;return t!==i&&(n.getNorth()>=t&&(n._northEast.lat=Infinity),n.getSouth()<=-t&&(n._southWest.lat=-Infinity)),n},_animationAddLayerNonAnimated:function(n,t){if(t===n)this._featureGroup.addLayer(n);else if(t._childCount===2){t._addToMap();var i=t.getAllChildMarkers();this._featureGroup.removeLayer(i[0]);this._featureGroup.removeLayer(i[1])}else t._updateIcon()},_extractNonGroupLayers:function(n,t){var u=n.getLayers(),r=0,i;for(t=t||[];r<u.length;r++){if(i=u[r],i instanceof L.LayerGroup){this._extractNonGroupLayers(i,t);continue}t.push(i)}return t},_overrideMarkerIcon:function(n){return n.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[n]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-Infinity,-Infinity),new L.LatLng(Infinity,Infinity))});L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(n,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),n);this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds());this.fire("animationend")},_animationZoomOut:function(n,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),n);this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds());this.fire("animationend")},_animationAddLayer:function(n,t){this._animationAddLayerNonAnimated(n,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationZoomIn:function(n,t){var i=this._getExpandedVisibleBounds(),r=this._featureGroup,f=Math.floor(this._map.getMinZoom()),u;this._ignoreMove=!0;this._topClusterLevel._recursively(i,n,f,function(f){var e=f._latlng,s=f._markers,o;for(i.contains(e)||(e=null),f._isSingleParent()&&n+1===t?(r.removeLayer(f),f._recursivelyAddChildrenToMap(null,t,i)):(f.clusterHide(),f._recursivelyAddChildrenToMap(e,t,i)),u=s.length-1;u>=0;u--)o=s[u],i.contains(o._latlng)||r.removeLayer(o)});this._forceLayout();this._topClusterLevel._recursivelyBecomeVisible(i,t);r.eachLayer(function(n){n instanceof L.MarkerCluster||!n._icon||n.clusterShow()});this._topClusterLevel._recursively(i,n,t,function(n){n._recursivelyRestoreChildPositions(t)});this._ignoreMove=!1;this._enqueue(function(){this._topClusterLevel._recursively(i,n,f,function(n){r.removeLayer(n);n.clusterShow()});this._animationEnd()})},_animationZoomOut:function(n,t){this._animationZoomOutSingle(this._topClusterLevel,n-1,t);this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds());this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),n,this._getExpandedVisibleBounds())},_animationAddLayer:function(n,t){var i=this,r=this._featureGroup;r.addLayer(n);t!==n&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),n._setPos(this._map.latLngToLayerPoint(t.getLatLng())),n.clusterHide(),this._enqueue(function(){r.removeLayer(n);n.clusterShow();i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(n,t,i){var r=this._getExpandedVisibleBounds(),u=Math.floor(this._map.getMinZoom()),f;n._recursivelyAnimateChildrenInAndAddSelfToMap(r,u,t+1,i);f=this;this._forceLayout();n._recursivelyBecomeVisible(r,i);this._enqueue(function(){if(n._childCount===1){var e=n._markers[0];this._ignoreMove=!0;e.setLatLng(e.getLatLng());this._ignoreMove=!1;e.clusterShow&&e.clusterShow()}else n._recursively(r,i,u,function(n){n._recursivelyRemoveChildrenFromMap(r,u,t+1)});f._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""));this._inZoomAnimation--;this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(t.body.offsetWidth)}});L.markerClusterGroup=function(n){return new L.MarkerClusterGroup(n)};L.MarkerCluster=L.Marker.extend({initialize:function(n,t,i,r){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:n.options.clusterPane});this._group=n;this._zoom=t;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=!0;this._boundsNeedUpdate=!0;this._bounds=new L.LatLngBounds;i&&this._addChild(i);r&&this._addChild(r)},getAllChildMarkers:function(n){var t,i;for(n=n||[],t=this._childClusters.length-1;t>=0;t--)this._childClusters[t].getAllChildMarkers(n);for(i=this._markers.length-1;i>=0;i--)n.push(this._markers[i]);return n},getChildCount:function(){return this._childCount},zoomToBounds:function(n){for(var t=this._childClusters.slice(),e=this._group._map,f=e.getBoundsZoom(this._bounds),i=this._zoom+1,o=e.getZoom(),r,u;t.length>0&&f>i;){for(i++,u=[],r=0;r<t.length;r++)u=u.concat(t[r]._childClusters);t=u}f>i?this._group._map.setView(this._latlng,i):f<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds,n)},getBounds:function(){var n=new L.LatLngBounds;return n.extend(this._bounds),n},_updateIcon:function(){this._iconNeedsUpdate=!0;this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(n,t){this._iconNeedsUpdate=!0;this._boundsNeedUpdate=!0;this._setClusterCenter(n);n instanceof L.MarkerCluster?(t||(this._childClusters.push(n),n.__parent=this),this._childCount+=n._childCount):(t||this._markers.push(n),this._childCount++);this.__parent&&this.__parent._addChild(n,!0)},_setClusterCenter:function(n){this._cLatLng||(this._cLatLng=n._cLatLng||n._latlng)},_resetBounds:function(){var n=this._bounds;n._southWest&&(n._southWest.lat=Infinity,n._southWest.lng=Infinity);n._northEast&&(n._northEast.lat=-Infinity,n._northEast.lng=-Infinity)},_recalculateBounds:function(){var o=this._markers,s=this._childClusters,r=0,u=0,f=this._childCount,n,i,t,e;if(f!==0){for(this._resetBounds(),n=0;n<o.length;n++)t=o[n]._latlng,this._bounds.extend(t),r+=t.lat,u+=t.lng;for(n=0;n<s.length;n++)i=s[n],i._boundsNeedUpdate&&i._recalculateBounds(),this._bounds.extend(i._bounds),t=i._wLatLng,e=i._childCount,r+=t.lat*e,u+=t.lng*e;this._latlng=this._wLatLng=new L.LatLng(r/f,u/f);this._boundsNeedUpdate=!1}},_addToMap:function(n){n&&(this._backupLatlng=this._latlng,this.setLatLng(n));this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(n,t,i){this._recursively(n,this._group._map.getMinZoom(),i-1,function(n){for(var u=n._markers,r,i=u.length-1;i>=0;i--)r=u[i],r._icon&&(r._setPos(t),r.clusterHide())},function(n){for(var u=n._childClusters,r,i=u.length-1;i>=0;i--)r=u[i],r._icon&&(r._setPos(t),r.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(n,t,i,r){this._recursively(n,r,t,function(u){u._recursivelyAnimateChildrenIn(n,u._group._map.latLngToLayerPoint(u.getLatLng()).round(),i);u._isSingleParent()&&i-1===r?(u.clusterShow(),u._recursivelyRemoveChildrenFromMap(n,t,i)):u.clusterHide();u._addToMap()})},_recursivelyBecomeVisible:function(n,t){this._recursively(n,this._group._map.getMinZoom(),t,null,function(n){n.clusterShow()})},_recursivelyAddChildrenToMap:function(n,t,i){this._recursively(i,this._group._map.getMinZoom()-1,t,function(r){var f,u;if(t!==r._zoom)for(f=r._markers.length-1;f>=0;f--)(u=r._markers[f],i.contains(u._latlng))&&(n&&(u._backupLatlng=u.getLatLng(),u.setLatLng(n),u.clusterHide&&u.clusterHide()),r._group._featureGroup.addLayer(u))},function(t){t._addToMap(n)})},_recursivelyRestoreChildPositions:function(n){for(var t,r,u,i=this._markers.length-1;i>=0;i--)t=this._markers[i],t._backupLatlng&&(t.setLatLng(t._backupLatlng),delete t._backupLatlng);if(n-1===this._zoom)for(r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._restorePosition();else for(u=this._childClusters.length-1;u>=0;u--)this._childClusters[u]._recursivelyRestoreChildPositions(n)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(n,t,i,r){var u,f;this._recursively(n,t-1,i-1,function(n){for(f=n._markers.length-1;f>=0;f--)u=n._markers[f],r&&r.contains(u._latlng)||(n._group._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())},function(n){for(f=n._childClusters.length-1;f>=0;f--)u=n._childClusters[f],r&&r.contains(u._latlng)||(n._group._featureGroup.removeLayer(u),u.clusterShow&&u.clusterShow())})},_recursively:function(n,t,i,r,u){var s=this._childClusters,f=this._zoom,e,o;if(t<=f&&(r&&r(this),u&&f===i&&u(this)),f<t||f<i)for(e=s.length-1;e>=0;e--)o=s[e],n.intersects(o._bounds)&&o._recursively(n,t,i,r,u)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var n=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,n}});L.DistanceGrid=function(n){this._cellSize=n;this._sqCellSize=n*n;this._grid={};this._objectPoint={}};L.DistanceGrid.prototype={addObject:function(n,t){var i=this._getCoord(t.x),r=this._getCoord(t.y),u=this._grid,f=u[r]=u[r]||{},e=f[i]=f[i]||[],o=L.Util.stamp(n);this._objectPoint[o]=t;e.push(n)},updateObject:function(n,t){this.removeObject(n);this.addObject(n,t)},removeObject:function(n,t){var r=this._getCoord(t.x),o=this._getCoord(t.y),s=this._grid,u=s[o]=s[o]||{},f=u[r]=u[r]||[],i,e;for(delete this._objectPoint[L.Util.stamp(n)],i=0,e=f.length;i<e;i++)if(f[i]===n)return f.splice(i,1),e===1&&delete u[r],!0},eachObject:function(n,t){var e,o,i,r,u,f,s,h=this._grid;for(e in h){u=h[e];for(o in u)for(f=u[o],i=0,r=f.length;i<r;i++)s=n.call(t,f[i]),s&&(i--,r--)}},getNearObject:function(n){for(var c=this._getCoord(n.x),l=this._getCoord(n.y),i,r,e,u,a,o,f,v=this._objectPoint,s=this._sqCellSize,h=null,t=l-1;t<=l+1;t++)if(e=this._grid[t],e)for(i=c-1;i<=c+1;i++)if(u=e[i],u)for(r=0,a=u.length;r<a;r++)o=u[r],f=this._sqDist(v[L.Util.stamp(o)],n),(f<s||f<=s&&h===null)&&(s=f,h=o);return h},_getCoord:function(n){var t=Math.floor(n/this._cellSize);return isFinite(t)?t:n},_sqDist:function(n,t){var i=t.x-n.x,r=t.y-n.y;return i*i+r*r}},function(){L.QuickHull={getDistant:function(n,t){var i=t[1].lat-t[0].lat,r=t[0].lng-t[1].lng;return r*(n.lat-t[0].lat)+i*(n.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(n,t){for(var f=0,e=null,o=[],r,u,i=t.length-1;i>=0;i--){if(r=t[i],u=this.getDistant(r,n),u>0)o.push(r);else continue;u>f&&(f=u,e=r)}return{maxPoint:e,newPoints:o}},buildConvexHull:function(n,t){var r=[],i=this.findMostDistantPointFromBaseLine(n,t);return i.maxPoint?(r=r.concat(this.buildConvexHull([n[0],i.maxPoint],i.newPoints)),r.concat(this.buildConvexHull([i.maxPoint,n[1]],i.newPoints))):[n[0]]},getConvexHull:function(n){for(var i=!1,r=!1,o=!1,s=!1,h=null,c=null,l=null,a=null,u=null,f=null,t,e=n.length-1;e>=0;e--)t=n[e],(i===!1||t.lat>i)&&(h=t,i=t.lat),(r===!1||t.lat<r)&&(c=t,r=t.lat),(o===!1||t.lng>o)&&(l=t,o=t.lng),(s===!1||t.lng<s)&&(a=t,s=t.lng);return r!==i?(f=c,u=h):(f=a,u=l),[].concat(this.buildConvexHull([f,u],n),this.buildConvexHull([u,f],n))}}}();L.MarkerCluster.include({getConvexHull:function(){for(var t=this.getAllChildMarkers(),i=[],r,n=t.length-1;n>=0;n--)r=t[n].getLatLng(),i.push(r);return L.QuickHull.getConvexHull(i)}});L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var n=this.getAllChildMarkers(),r=this._group,u=r._map,t=u.latLngToLayerPoint(this._latlng),i;this._group._unspiderfy();this._group._spiderfied=this;n.length>=this._circleSpiralSwitchover?i=this._generatePointsSpiral(n.length,t):(t.y+=10,i=this._generatePointsCircle(n.length,t));this._animationSpiderfy(n,i)}},unspiderfy:function(n){this._group._inZoomAnimation||(this._animationUnspiderfy(n),this._group._spiderfied=null)},_generatePointsCircle:function(n,t){var e=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+n),f=e/this._2PI,o=this._2PI/n,r=[],i,u;for(r.length=n,i=n-1;i>=0;i--)u=this._circleStartAngle+i*o,r[i]=new L.Point(t.x+f*Math.cos(u),t.y+f*Math.sin(u))._round();return r},_generatePointsSpiral:function(n,t){var f=this._group.options.spiderfyDistanceMultiplier,r=f*this._spiralLengthStart,o=f*this._spiralFootSeparation,s=f*this._spiralLengthFactor*this._2PI,u=0,e=[],i;for(e.length=n,i=n-1;i>=0;i--)u+=o/r+i*.0005,e[i]=new L.Point(t.x+r*Math.cos(u),t.y+r*Math.sin(u))._round(),r+=s/u;return e},_noanimationUnspiderfy:function(){var t=this._group,u=t._map,f=t._featureGroup,r=this.getAllChildMarkers(),n,i;for(t._ignoreMove=!0,this.setOpacity(1),i=r.length-1;i>=0;i--)n=r[i],f.removeLayer(n),n._preSpiderfyLatlng&&(n.setLatLng(n._preSpiderfyLatlng),delete n._preSpiderfyLatlng),n.setZIndexOffset&&n.setZIndexOffset(0),n._spiderLeg&&(u.removeLayer(n._spiderLeg),delete n._spiderLeg);t.fire("unspiderfied",{cluster:this,markers:r});t._ignoreMove=!1;t._spiderfied=null}});L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(n,t){var r=this._group,o=r._map,s=r._featureGroup,h=this._group.options.spiderLegPolylineOptions,u,i,f,e;for(r._ignoreMove=!0,u=0;u<n.length;u++)e=o.layerPointToLatLng(t[u]),i=n[u],f=new L.Polyline([this._latlng,e],h),o.addLayer(f),i._spiderLeg=f,i._preSpiderfyLatlng=i._latlng,i.setLatLng(e),i.setZIndexOffset&&i.setZIndexOffset(1e6),s.addLayer(i);this.setOpacity(.3);r._ignoreMove=!1;r.fire("spiderfied",{cluster:this,markers:n})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}});L.MarkerCluster.include({_animationSpiderfy:function(n,t){var p=this,f=this._group,h=f._map,w=f._featureGroup,y=this._latlng,b=h.latLngToLayerPoint(y),a=L.Path.SVG,o=L.extend({},this._group.options.spiderLegPolylineOptions),c=o.opacity,u,r,e,s,v,l;for(c===i&&(c=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),a?(o.opacity=0,o.className=(o.className||"")+" leaflet-cluster-spider-leg"):o.opacity=c,f._ignoreMove=!0,u=0;u<n.length;u++)r=n[u],l=h.layerPointToLatLng(t[u]),e=new L.Polyline([y,l],o),h.addLayer(e),r._spiderLeg=e,a&&(s=e._path,v=s.getTotalLength()+.1,s.style.strokeDasharray=v,s.style.strokeDashoffset=v),r.setZIndexOffset&&r.setZIndexOffset(1e6),r.clusterHide&&r.clusterHide(),w.addLayer(r),r._setPos&&r._setPos(b);for(f._forceLayout(),f._animationStart(),u=n.length-1;u>=0;u--)l=h.layerPointToLatLng(t[u]),r=n[u],r._preSpiderfyLatlng=r._latlng,r.setLatLng(l),r.clusterShow&&r.clusterShow(),a&&(e=r._spiderLeg,s=e._path,s.style.strokeDashoffset=0,e.setStyle({opacity:c}));this.setOpacity(.3);f._ignoreMove=!1;setTimeout(function(){f._animationEnd();f.fire("spiderfied",{cluster:p,markers:n})},200)},_animationUnspiderfy:function(n){var l=this,r=this._group,e=r._map,h=r._featureGroup,a=n?e._latLngToNewLayerPoint(this._latlng,n.zoom,n.center):e.latLngToLayerPoint(this._latlng),u=this.getAllChildMarkers(),v=L.Path.SVG,t,i,o,s,c,f;for(r._ignoreMove=!0,r._animationStart(),this.setOpacity(1),i=u.length-1;i>=0;i--)(t=u[i],t._preSpiderfyLatlng)&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,f=!0,t._setPos&&(t._setPos(a),f=!1),t.clusterHide&&(t.clusterHide(),f=!1),f&&h.removeLayer(t),v&&(o=t._spiderLeg,s=o._path,c=s.getTotalLength()+.1,s.style.strokeDashoffset=c,o.setStyle({opacity:0})));r._ignoreMove=!1;setTimeout(function(){var n=0;for(i=u.length-1;i>=0;i--)t=u[i],t._spiderLeg&&n++;for(i=u.length-1;i>=0;i--)(t=u[i],t._spiderLeg)&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),n>1&&h.removeLayer(t),e.removeLayer(t._spiderLeg),delete t._spiderLeg);r._animationEnd();r.fire("unspiderfied",{cluster:l,markers:u})},200)}});L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation)this._map.on("zoomstart",this._unspiderfyZoomStart,this);this._map.on("zoomend",this._noanimationUnspiderfy,this);L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._map.off("zoomend",this._noanimationUnspiderfy,this);this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){if(this._map)this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(n){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(n))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(n){this._spiderfied&&this._spiderfied.unspiderfy(n)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(n){n._spiderLeg&&(this._featureGroup.removeLayer(n),n.clusterShow&&n.clusterShow(),n.setZIndexOffset&&n.setZIndexOffset(0),this._map.removeLayer(n._spiderLeg),delete n._spiderLeg)}});L.MarkerClusterGroup.include({refreshClusters:function(n){return n?n instanceof L.MarkerClusterGroup?n=n._topClusterLevel.getAllChildMarkers():n instanceof L.LayerGroup?n=n._layers:n instanceof L.MarkerCluster?n=n.getAllChildMarkers():n instanceof L.Marker&&(n=[n]):n=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(n),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(n),this},_flagParentsIconsNeedUpdate:function(n){var i,t;for(i in n)for(t=n[i].__parent;t;)t._iconNeedsUpdate=!0,t=t.__parent},_refreshSingleMarkerModeMarkers:function(n){var i,t;for(i in n)t=n[i],this.hasLayer(t)&&t.setIcon(this._overrideMarkerIcon(t))}});L.Marker.include({refreshIconOptions:function(n,t){var i=this.options.icon;return L.setOptions(i,n),this.setIcon(i),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}})})(window,document)},function(n,t,i){var r,f,u;(function(e){var o,s;if(1)!(f=[i(4),i(65)],r=e,u=typeof r=="function"?r.apply(t,f):r,u!==undefined&&(n.exports=u));else if(typeof n=="object"&&typeof n.exports=="object")o=require("leaflet"),s=require("proj4"),n.exports=e(o,s);else{if(typeof window.L=="undefined"||typeof window.proj4=="undefined")throw"Leaflet and proj4 must be loaded first";e(window.L,window.proj4)}})(function(n,t){return t.__esModule&&t.default&&(t=t.default),n.Proj={},n.Proj._isProj4Obj=function(n){return typeof n.inverse!="undefined"&&typeof n.forward!="undefined"},n.Proj.Projection=n.Class.extend({initialize:function(t,i,r){var u=n.Proj._isProj4Obj(t);this._proj=u?t:this._projFromCodeDef(t,i);this.bounds=u?i:r},project:function(t){var i=this._proj.forward([t.lng,t.lat]);return new n.Point(i[0],i[1])},unproject:function(t,i){var r=this._proj.inverse([t.x,t.y]);return new n.LatLng(r[1],r[0],i)},_projFromCodeDef:function(n,i){if(i)t.defs(n,i);else if(t.defs[n]===undefined){var r=n.split(":");if(r.length>3&&(n=r[r.length-3]+":"+r[r.length-1]),t.defs[n]===undefined)throw"No projection definition for code "+n;}return t(n)}}),n.Proj.CRS=n.Class.extend({includes:n.CRS,options:{transformation:new n.Transformation(1,0,-1,0)},initialize:function(t,i,r){var e,o,s,f,u;if(n.Proj._isProj4Obj(t)?(o=t,e=o.srsCode,f=i||{},this.projection=new n.Proj.Projection(o,f.bounds)):(e=t,s=i,f=r||{},this.projection=new n.Proj.Projection(e,s,f.bounds)),n.Util.setOptions(this,f),this.code=e,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new n.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions)for(this._scales=[],u=this.options.resolutions.length-1;u>=0;u--)this.options.resolutions[u]&&(this._scales[u]=1/this.options.resolutions[u]);this.infinite=!this.options.bounds},scale:function(n){var t=Math.floor(n),i,r,u,f;return n===t?this._scales[n]:(i=this._scales[t],r=this._scales[t+1],u=r-i,f=n-t,i+u*f)},zoom:function(n){var t=this._closestElement(this._scales,n),i=this._scales.indexOf(t),r,u,f;return n===t?i:t===undefined?-Infinity:(u=i+1,r=this._scales[u],r===undefined)?Infinity:(f=r-t,(n-t)/f+i)},distance:n.CRS.Earth.distance,R:n.CRS.Earth.R,_closestElement:function(n,t){for(var i,r=n.length;r--;)n[r]<=t&&(i===undefined||i<n[r])&&(i=n[r]);return i}}),n.Proj.GeoJSON=n.GeoJSON.extend({initialize:function(t,i){this._callLevel=0;n.GeoJSON.prototype.initialize.call(this,t,i)},addData:function(t){var i;t&&(t.crs&&t.crs.type==="name"?i=new n.Proj.CRS(t.crs.properties.name):t.crs&&t.crs.type&&(i=new n.Proj.CRS(t.crs.type+":"+t.crs.properties.code)),i!==undefined&&(this.options.coordsToLatLng=function(t){var r=n.point(t[0],t[1]);return i.projection.unproject(r)}));this._callLevel++;try{n.GeoJSON.prototype.addData.call(this,t)}finally{this._callLevel--;this._callLevel===0&&delete this.options.coordsToLatLng}}}),n.Proj.geoJson=function(t,i){return new n.Proj.GeoJSON(t,i)},n.Proj.ImageOverlay=n.ImageOverlay.extend({initialize:function(t,i,r){n.ImageOverlay.prototype.initialize.call(this,t,null,r);this._projectedBounds=i},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),r=n.point(this._projectedBounds.min.x,this._projectedBounds.max.y),u=this._projectedToNewLayerPoint(r,t.zoom,t.center);n.DomUtil.setTransform(this._image,u,i)},_reset:function(){var t=this._map.getZoom(),i=this._map.getPixelOrigin(),r=n.bounds(this._transform(this._projectedBounds.min,t)._subtract(i),this._transform(this._projectedBounds.max,t)._subtract(i)),u=r.getSize();n.DomUtil.setPosition(this._image,r.min);this._image.style.width=u.x+"px";this._image.style.height=u.y+"px"},_projectedToNewLayerPoint:function(n,t,i){var r=this._map.getSize()._divideBy(2),u=this._map.project(i,t)._subtract(r)._round(),f=u.add(this._map._getMapPanePos());return this._transform(n,t)._subtract(f)},_transform:function(n,t){var i=this._map.options.crs,r=i.transformation,u=i.scale(t);return r.transform(n,u)}}),n.Proj.imageOverlay=function(t,i,r){return new n.Proj.ImageOverlay(t,i,r)},n.Proj})},function(){Date.prototype.getJulian=function(){return this/864e5+2440587.5};Date.prototype.getGMST=function(){var n=this.getJulian(),t=n-2451545;return(18.697374558+24.065709824419081*t)%24};L.Terminator=L.Polygon.extend({options:{color:"#00",opacity:.5,fillColor:"#00",fillOpacity:.5,resolution:2},initialize:function(n){this.version="0.1.0";this._R2D=180/Math.PI;this._D2R=Math.PI/180;L.Util.setOptions(this,n);var t=this._compute(this.options.time||null);this.setLatLngs(t)},setTime:function(n){this.options.time=n;var t=this._compute(n||null);this.setLatLngs(t)},_sunEclipticPosition:function(n){var i=n-2451545,r=280.46+.9856474*i,t,u,f;return r%=360,t=357.528+.9856003*i,t%=360,u=r+1.915*Math.sin(t*this._D2R)+.02*Math.sin(2*t*this._D2R),f=1.00014-.01671*Math.cos(t*this._D2R)-.0014*Math.cos(2*t*this._D2R),{lambda:u,R:f}},_eclipticObliquity:function(n){var i=n-2451545,t=i/36525;return 23.43929111-t*(46.836769/3600-t*(.0001831/3600+t*(.0020034/3600-t*(576e-9/3600-t*434e-10/3600))))},_sunEquatorialPosition:function(n,t){var i=Math.atan(Math.cos(t*this._D2R)*Math.tan(n*this._D2R))*this._R2D,r=Math.asin(Math.sin(t*this._D2R)*Math.sin(n*this._D2R))*this._R2D,u=Math.floor(n/90)*90,f=Math.floor(i/90)*90;return i=i+(u-f),{alpha:i,delta:r}},_hourAngle:function(n,t,i){var r=i+n/15;return r*15-t.alpha},_latitude:function(n,t){return Math.atan(-Math.cos(n*this._D2R)/Math.tan(t.delta*this._D2R))*this._R2D},_compute:function(n){var r,i;r=n==null?new Date:new Date(n);var f=r.getJulian(),s=r.getGMST(),t=[],e,o,h=this._sunEclipticPosition(f),c=this._eclipticObliquity(f),u=this._sunEquatorialPosition(h.lambda,c);for(i=0;i<=720*this.options.resolution;i++)lng=-360+i/this.options.resolution,e=this._hourAngle(lng,u,s),o=this._latitude(e,u),t[i+1]=[o,lng];return u.delta<0?(t[0]=[90,-360],t[t.length]=[90,360]):(t[0]=[-90,-360],t[t.length]=[-90,360]),t}});L.terminator=function(n){return new L.Terminator(n)}},function(){(function(){L.Control.ToolBar=L.Control.extend({options:{position:"topleft"},_createButton:function(n,t,i,r){var u=L.DomUtil.create("a",t,i);u.href="#";u.title=n;L.DomEvent.on(u,"mousedown dblclick",L.DomEvent.stopPropagation).on(u,"click",L.DomEvent.stop).on(u,"click",r,this).on(u,"click",this._refocusOnMap,this);return u},onAdd:function(n){var t,i,r,u;for(this.options.center||(this.options.center=n.getCenter()),this.options.zoom||(this.options.zoom=n.getZoom()),options=this.options,t="leaflet-control-toolbar",i=L.DomUtil.create("div",t+"  leaflet-bar leaflet-control"),this.options.item=this.options.item||["home","location","fullscreen"],r=0;r<this.options.item.length;r++){u=this.options.item[r];switch(u){case"home":this._createButton("",t+"-home",i,this._btnclick_goHome);break;case"location":this.btnLocation=this._createButton("",t+"-locate",i,this._btnclick_goLocate);this._map.on("locationfound",this.onLocationFound,this);this._map.on("locationerror",this.onLocationError,this);break;case"fullscreen":this.btnFullscreen=this._createButton("",t+"-fullscreen",i,this._btnclick_fullscreen);this._map.on("fullscreenchange",this._toggle_fullscreen_Title,this);break;case"clear":this._createButton("",t+"-clear",i,this._btnclick_clear)}}return i},_btnclick_goHome:function(){if(this.options.bbox)try{this._map.fitBounds(this.options.bbox)}catch(n){this._map.setView(this.options.center,this.options.zoom)}this._map.setView(this.options.center,this.options.zoom)},_btnclick_clear:function(){window.clearALL!=null&&clearALL()},btnLocation:null,_location_mark:null,_location_circle:null,_iconLocationLoading:"leaflet-control-toolbar-locate-loading",_iconLocation:"leaflet-control-toolbar-locate",_btnclick_goLocate:function(){L.DomUtil.removeClasses(this.btnLocation,this._iconLocation);L.DomUtil.addClasses(this.btnLocation,this._iconLocationLoading);this._map.locate({setView:!0})},onLocationFound:function(n){var t=this,i,r;L.DomUtil.removeClasses(this.btnLocation,this._iconLocationLoading);L.DomUtil.addClasses(this.btnLocation,this._iconLocation);i=n.accuracy/2;i>1e3&&(i=1e3);r=this._map.convert2map(n.latlng);setTimeout(function(){t._map.setView(r,16)},500);this.options.noLocPoint||(this._location_mark!=null&&this._location_mark.remove(),this._location_circle!=null&&this._location_circle.remove(),this._location_mark=L.marker(r,{icon:L.divIcon({className:"",iconSize:[10,10],iconAnchor:[5,5],popupAnchor:[5,-5],tooltipAnchor:[5,-5],html:'<div class="centerat_animation" style="color:#0f89f5;"><p><\/p><\/div>'})}).addTo(map),this._location_circle=L.circle(r,{radius:i,stroke:!1,fillOpacity:.2}).addTo(map),setTimeout(function(){t._location_mark.remove();t._location_circle.remove();t._location_mark=null;t._location_circle=null},5e3))},onLocationError:function(n){L.DomUtil.removeClasses(this.btnLocation,this._iconLocationLoading);L.DomUtil.addClasses(this.btnLocation,this._iconLocation);this.options.noLocPoint||haoutil.msg(""+(n.message||"").replace("Geolocation error: ")+"(code:"+n.code+")")},btnFullscreen:null,_btnclick_fullscreen:function(n){L.DomEvent.stopPropagation(n);L.DomEvent.preventDefault(n);this._map.toggleFullscreen(this.options)},_toggle_fullscreen_Title:function(){this.btnFullscreen.title=this._map.isFullscreen()?"":""},onRemove:function(){this._map.off("fullscreenchange",this._toggle_fullscreen_Title,this);this._map.off("locationfound",this.onLocationFound,this);this._map.off("locationerror",this.onLocationError,this)}});L.control.toolbar=function(n){return new L.Control.ToolBar(n)};var n=function(n,t,i){i=i.split(" ");i.forEach(function(i){L.DomUtil[n].call(this,t,i)})};L.DomUtil.addClasses=function(t,i){n("addClass",t,i)};L.DomUtil.removeClasses=function(t,i){n("removeClass",t,i)};L.Map.include({isFullscreen:function(){return this._isFullscreen},toggleFullscreen:function(){var n=document.documentElement;this._isFullscreen?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this._isFullscreen=!1):(n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):n.msRequestFullscreen&&n.msRequestFullscreen(),this._isFullscreen=!0)}})})()},function(n,t,i){var r,f,u;window.flowEchartsIndex=999,function(e,o){!(f=[i(4)],r=e,u=typeof r=="function"?r.apply(t,f):r,u!==undefined&&(n.exports=u));typeof o!="undefined"&&o.L&&(o.L.flowEcharts=e(L))}(function(n){return n.FlowEcharts=(n.version<"1.0"?n.Class:n.Layer).extend({includes:n.version<"1.0"?n.Mixin.Events:[],_echartsContainer:null,_map:null,_ec:null,_option:null,_echartsOption:null,initialize:function(n,t){this._option=t;this._echartsOption=n},onAdd:function(n){this._map=n;this._initEchartsContainer();n.on("moveend",this._redraw,this);this._redraw()},onRemove:function(n){this._echartsContainer&&n.getPanes().overlayPane.removeChild(this._echartsContainer);this._ec.dispose();n.off("moveend",this._redraw,this)},addTo:function(n){return n.addLayer(this),this},_initEchartsContainer:function(){var t=this._map.getSize(),n=document.createElement("div");n.style.position="absolute";n.style.height=t.y+"px";n.style.width=t.x+"px";n.style.zIndex=flowEchartsIndex--;this._echartsContainer=n;this._map.getPanes().overlayPane.appendChild(this._echartsContainer)},_resetCanvasPosition:function(){var t=this._map.getBounds(),i=this._map.latLngToLayerPoint(t.getNorthWest());n.DomUtil.setPosition(this._echartsContainer,i)},_redraw:function(){return this._resetCanvasPosition(),this._echartsContainer.innerHTML="",this.initECharts(),this.setOption(this._echartsOption),this},clear:function(){this._echartsContainer.innerHTML="";this.echartsOption={}},redraw:function(){this._redraw()},geoCoord2Pixel:function(t){var r=new n.latLng(t[1],t[0]),i=this._map.latLngToContainerPoint(r);return[i.x,i.y]},pixel2GeoCoord:function(t){var i=this._map.containerPointToLatLng(n.point(t[0],t[1]));return[i.lng,i.lat]},initECharts:function(){if(this._ec=echarts.init(this._echartsContainer),echarts.version>="3.0"){var t=this;t._ec.Geo.prototype.dataToPoint=function(i){var u=new n.latLng(i[1],i[0]),r=t._map.latLngToContainerPoint(u);return[r.x,r.y]}}this._unbindEvent()},setOption:function(n,t){var h,e,u,r,o;if(n.series){var c=n.series||{},f={},s=!1;if(echarts.version<"3.0"){for(e=0;u=c[e++];)h=u.geoCoord,h&&(s=!0,f=h);for(e=0;u=c[e++];){var l=u.markPoint||{},a=u.markLine||{},i=l.data;if(i&&i.length)for(r=0,o=i.length;r<o;r++)s&&(i[r].geoCoord=f[i[r].name]),this._AddPos(i[r]);if(i=a.data,i&&i.length)for(r=0,o=i.length;r<o;r++)s&&(i[r][0].geoCoord=f[i[r][0].name],i[r][1].geoCoord=f[i[r][1].name]),this._AddPos(i[r][0]),this._AddPos(i[r][1])}}this._ec.setOption(n,t)}},_AddPos:function(n){var i,t;echarts.version<"3.0"?(i=echarts.version<"3.0"?n.geoCoord:n.coord,t=this.geoCoord2Pixel(i),n.x=t[0],n.y=t[1]):(i=n.coord,t=this.geoCoord2Pixel(i),n.coord=t)},_unbindEvent:function(){echarts.version<"3.0"?(this._ec.getZrender().un("dragstart",function(){}),this._ec.getZrender().un("dragend",function(){}),this._ec.getZrender().un("mouseup",function(){}),this._ec.getZrender().un("mousedown",function(){}),this._ec.getZrender().un("mousewheel",function(){})):(this._ec.getZr().off("dragstart",function(){}),this._ec.getZr().off("dragend",function(){}),this._ec.getZr().off("mouseup",function(){}),this._ec.getZr().off("mousedown",function(){}),this._ec.getZr().off("mousewheel",function(){}))}}),n.flowEcharts=function(t,i){return new n.FlowEcharts(t,i)},n.flowEcharts},window)},function(){!function(){"use strict";function n(t){return this instanceof n?(this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,void this.clear()):new n(t)}n.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(n){return this._data=n,this},max:function(n){return this._max=n,this},add:function(n){return this._data.push(n),this},clear:function(){return this._data=[],this},radius:function(n,t){t=t||15;var r=this._circle=document.createElement("canvas"),i=r.getContext("2d"),u=this._r=n+t;return r.width=r.height=2*u,i.shadowOffsetX=i.shadowOffsetY=200,i.shadowBlur=t,i.shadowColor="black",i.beginPath(),i.arc(u-200,u-200,n,0,2*Math.PI,!0),i.closePath(),i.fill(),this},gradient:function(n){var i=document.createElement("canvas"),t=i.getContext("2d"),u=t.createLinearGradient(0,0,0,256),r;i.width=1;i.height=256;for(r in n)u.addColorStop(r,n[r]);return t.fillStyle=u,t.fillRect(0,0,1,256),this._grad=t.getImageData(0,0,1,256).data,this},draw:function(n){var t,i,r,f,u;for(this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient),t=this._ctx,t.clearRect(0,0,this._width,this._height),r=0,f=this._data.length;f>r;r++)i=this._data[r],t.globalAlpha=Math.max(i[2]/this._max,n||.05),t.drawImage(this._circle,i[0]-this._r,i[1]-this._r);return u=t.getImageData(0,0,this._width,this._height),this._colorize(u.data,this._grad),t.putImageData(u,0,0),this},_colorize:function(n,t){for(var r,i=3,u=n.length;u>i;i+=4)r=4*n[i],r&&(n[i-3]=t[r],n[i-2]=t[r+1],n[i-1]=t[r+2])}};window.simpleheat=n}();L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(n,t){this._latlngs=n;L.setOptions(this,t)},setLatLngs:function(n){return this._latlngs=n,this.redraw()},addLatLng:function(n){return this._latlngs.push(n),this.redraw()},setOptions:function(n){return L.setOptions(this,n),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(n){this._map=n;this._canvas||this._initCanvas();n._panes.overlayPane.appendChild(this._canvas);n.on("moveend",this._reset,this);n.options.zoomAnimation&&L.Browser.any3d&&n.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(n){n.getPanes().overlayPane.removeChild(this._canvas);n.off("moveend",this._reset,this);n.options.zoomAnimation&&n.off("zoomanim",this._animateZoom,this)},addTo:function(n){return n.addLayer(this),this},_initCanvas:function(){var n=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),r=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]),t,i;n.style[r]="50% 50%";t=this._map.getSize();n.width=t.x;n.height=t.y;i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(n,"leaflet-zoom-"+(i?"animated":"hide"));this._heat=simpleheat(n);this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur);this.options.gradient&&this._heat.gradient(this.options.gradient);this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]),n;L.DomUtil.setPosition(this._canvas,t);n=this._map.getSize();this._heat._width!==n.x&&(this._canvas.width=this._heat._width=n.x);this._heat._height!==n.y&&(this._canvas.height=this._heat._height=n.y);this._redraw()},_redraw:function(){for(var i,n,c,f,s,l,u,a=[],e=this._heat._r,p=this._map.getSize(),w=new L.Bounds(L.point([-e,-e]),p.add([e,e])),b=void 0===this.options.max?1:this.options.max,k=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,d=1/Math.pow(2,Math.max(0,Math.min(k-this._map.getZoom(),12))),h=e/2,r=[],v=this._map._getMapPanePos(),g=v.x%h,nt=v.y%h,y,t=0,o=this._latlngs.length;o>t;t++)(i=this._map.latLngToContainerPoint(this._latlngs[t]),w.contains(i))&&(c=Math.floor((i.x-g)/h)+2,f=Math.floor((i.y-nt)/h)+2,y=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1,u=y*d,r[f]=r[f]||[],n=r[f][c],n?(n[0]=(n[0]*n[2]+i.x*u)/(n[2]+u),n[1]=(n[1]*n[2]+i.y*u)/(n[2]+u),n[2]+=u):r[f][c]=[i.x,i.y,u]);for(t=0,o=r.length;o>t;t++)if(r[t])for(s=0,l=r[t].length;l>s;s++)n=r[t][s],n&&a.push([Math.round(n[0]),Math.round(n[1]),Math.min(n[2],b)]);this._heat.data(a).draw(this.options.minOpacity);this._frame=null},_animateZoom:function(n){var t=this._map.getZoomScale(n.zoom),i=this._map._getCenterOffset(n.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,t):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+t+")"}});L.heatLayer=function(n,t){return new L.HeatLayer(n,t)}},function(n,t,i){var r,f,u;(function(e,o){!(f=[i(4)],r=e,u=typeof r=="function"?r.apply(t,f):r,u!==undefined&&(n.exports=u));typeof o!="undefined"&&o.L&&(o.L.mapVLayer=e(L))})(function(n){function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function u(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n}function s(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var r,t,i,f;if(window.mapv!=null)return n.Map.include({latLngToAccurateContainerPoint:function(t){var i=this.project(n.latLng(t)),r=i._subtract(this.getPixelOrigin());return n.point(r).add(this._getMapPanePos())}}),r=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),t=function e(n,t,i){var r,u,f;return n===null&&(n=Function.prototype),r=Object.getOwnPropertyDescriptor(n,t),r===undefined?(u=Object.getPrototypeOf(n),u===null?undefined:e(u,t,i)):"value"in r?r.value:(f=r.get,f===undefined)?undefined:f.call(i)},i=mapv.baiduMapLayer?mapv.baiduMapLayer.__proto__:Function,f=function(f){function e(n,t,r,f){var s,h;if(o(this,e),!i)return u(s);s=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,f));h=s;f=f||{};h.init(f);h.argCheck(f);s.canvasLayer=t;s.clickEvent=s.clickEvent.bind(s);s.mousemoveEvent=s.mousemoveEvent.bind(s);var c=s.moveStartEvent.bind(s),l=s.moveEndEvent.bind(s),a=s.zoomStartEvent.bind(s);s.map.on("movestart",c);s.map.on("moveend",l);s.map.on("zoomstart",a);return s._dispose=!1,s.unbindMapEvent=function(){s.map.off("movestart",c);s.map.off("moveend",l);s.map.off("zoomstart",a)},s.bindEvent(),s}return s(e,f),r(e,[{key:"dispose",value:function(){this._dispose=!0;this.unbindEvent();this.unbindMapEvent();this.clear()}},{key:"clickEvent",value:function(n){var i=n.layerPoint;t(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,i,n)}},{key:"mousemoveEvent",value:function(n){var i=n.layerPoint;t(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,i,n)}},{key:"bindEvent",value:function(){var n=this.map;if(this.options.methods){if(this.options.methods.click)n.on("click",this.clickEvent);if(this.options.methods.mousemove)n.on("mousemove",this.mousemoveEvent)}}},{key:"unbindEvent",value:function(){var n=this.map;this.options.methods&&(this.options.methods.click&&n.off("click",this.clickEvent),this.options.methods.mousemove&&n.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(n,t){var i=n;n&&n.get&&(i=n.get());this.dataSet.add(i);this.update({options:t})}},{key:"updateData",value:function(n,t){var i=n;n&&n.get&&(i=n.get());this.dataSet.set(i);this.update({options:t})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(n){if(this.dataSet){var t=this.dataSet.get(n);this.dataSet.set(t);this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear();this.update({options:null})}},{key:"_canvasUpdate",value:function(t){var e,f,o,s,h,c;if(!this._dispose&&this.canvasLayer){var i=this,l=i.options.animation,r=this.getContext(),u=this.map;if(i.isEnabledTime()){if(t===undefined){this.clear(r);return}this.context==="2d"&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if(this.context==="2d")for(e in i.options)r[e]=i.options[e];else r.clear(r.COLOR_BUFFER_BIT);i.options.minZoom&&u.getZoom()<i.options.minZoom||i.options.maxZoom&&u.getZoom()>i.options.maxZoom||(f=u.latLngToAccurateContainerPoint(this.canvasLayer.getTopLeft()),o={transferCoordinate:function(t){var i=u.latLngToAccurateContainerPoint(n.latLng(t[1],t[0])),r={x:i.x-f.x,y:i.y-f.y};return[r.x,r.y]}},t!==undefined&&(o.filter=function(n){var i=l.trails||10;return t&&n.time>t-i&&n.time<t}),s=i.dataSet.get(o),this.processData(s),i.options._size=i.options.size,h=u.latLngToContainerPoint(n.latLng(0,0)),c={x:h.x-f.x,y:h.y-f.y},this.drawContext(r,new mapv.DataSet(s),i.options,c),i.options.updateCallback&&i.options.updateCallback(t))}}},{key:"init",value:function(n){var t=this;t.options=n;this.initDataRange(n);this.context=t.options.context||"2d";t.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(t.options.zIndex);this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var n=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=n.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw();this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(n){n&&n.clearRect&&n.clearRect(0,0,n.canvas.width,n.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),e}(i),n.MapVLayer=n.Layer.extend({initialize:function(t,i,r){r=r||{};this.dataSet=t||{};this.mapVOptions=i||{};this.render=this.render.bind(this);n.Util.setOptions(this,r);this.canvas=this._createCanvas();n.stamp(this)},onAdd:function(t){var u,i,r;this._map=t;u=this.getPane();i=this.container=n.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",u);i.appendChild(this.canvas);r=t.getSize();i.style.width=r.x+"px";i.style.height=r.y+"px";this.renderer=new f(t,this,this.dataSet,this.mapVOptions);this.draw();this.fire("loaded")},_hide:function(){this.canvas.style.display="none"},_show:function(){this.canvas.style.display="block"},onRemove:function(t){n.DomUtil.remove(this.container);this.renderer.dispose();t.off({moveend:this.draw,zoomstart:this._hide,zoomend:this._show},this)},addData:function(n,t){this.renderer.addData(n,t)},update:function(n,t){this.renderer.updateData(n,t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(n){this.renderer&&this.renderer.removeData(n)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(n){this.canvas.style.zIndex=n},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var n=this._map,t,i;return n&&(i=n.getBounds(),t=i.getNorthWest()),t},_createCanvas:function(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=this.options.zIndex||600,n},_resize:function(){var t=this.canvas,r,i,u,f;t&&(r=this._map,i=r.getSize(),t.width=i.x,t.height=i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",u=r.getBounds(),f=r.latLngToLayerPoint(u.getNorthWest()),n.DomUtil.setPosition(t,f))},_reset:function(){this._resize();this._render()},redraw:function(){this._resize();this._render()},_render:function(){this.render()}}),n.mapVLayer=function(t,i,r){return new n.MapVLayer(t,i,r)},n.mapVLayer},window)},function(n,t,i){"use strict";function r(n,t,i){var w=n.key,v=w?w[Math.floor(Math.random()*w.length)]:"5ef21fa556102c4b65d390618f60fd89",b,p,y,o,k,s,g,a,l,d;n.url&&(t&&(n.url=n.url.replace("$serverURL$",t)),n.url=n.url.replace("$hostname$",location.hostname).replace("$host$",location.host));n.crs&&(n._crs=n.crs,n.crs=null);switch(n.type){case"group":if(n.layers&&n.layers.length>0){for(b=[],p=0;p<n.layers.length;p++)(y=n.layers[p],!y.crs&&n._crs&&(y.crs=n._crs),o=r(y,t,i),o!=null)&&(!y.hasOwnProperty("visible")||y.visible)&&b.push(o);o=L.layerGroup(b)}break;case"image":o=L.imageOverlay(n.url,n.bounds||[[0,0],[1e3,1e3]]);break;case"tile":o=L.tileLayer(n.url,n);break;case"wms":o=L.tileLayer.wms(n.url,n);break;case"wmts":o=L.tileLayer.wmts(n.url,n);break;case"arcgis_cache":o=L.tileLayer.arcGISTile(n.url,n);break;case"arcgis_tile":o=L.esri.tiledMapLayer(n);break;case"arcgis_image":o=L.esri.imageMapLayer(n);break;case"arcgis_dynamic":k={};for(l in n)l!="popup"&&l!="columns"&&l!="symbol"&&(k[l]=n[l]);o=L.esri.dynamicMapLayer(k);(n.popup||n.columns)&&(n.popup&&typeof n.popup=="string"&&n.popup.endsWith(".html")&&$.ajax({url:n.popup,type:"GET",dataType:"html",success:function(t){n.popup=t}}),o.bindPopup(function(t,i){var r,f;if(!o.hasOwnProperty("isPopup")||o.isPopup)return t!=null&&t.code>0?(haoutil.msg(t.message),!1):i.features.length==0?!1:(u&&(r=L.geoJSON(i).getLayers(),u("arcgis_dynamic",r[r.length-1])),f=i.features[i.features.length-1].properties,e(n,f))},{maxWidth:600}));break;case"arcgis_feature":o=L.esri.featureLayer(c(n));(n.popup||n.columns)&&(n.popup&&typeof n.popup=="string"&&n.popup.endsWith(".html")&&$.ajax({url:n.popup,type:"GET",dataType:"html",success:function(t){n.popup=t}}),o.bindPopup(function(t){if(!o.hasOwnProperty("isPopup")||o.isPopup){u&&u("arcgis_feature",t);var i=t.feature.properties;return e(n,i)}},{maxWidth:600}));n.tooltip&&o.bindTooltip(function(t){var i=t.feature.properties;return h(n,i)},{className:"leafletlayer-tooltip",direction:"top"});break;case"geojson":o=L.geoJSON(null,c(n));(n.popup||n.columns)&&(n.popup&&typeof n.popup=="string"&&n.popup.endsWith(".html")&&$.ajax({url:n.popup,type:"GET",dataType:"html",success:function(t){n.popup=t}}),o.bindPopup(function(t){if(!o.hasOwnProperty("isPopup")||o.isPopup){u&&u("arcgis_feature",t);var i=t.feature.properties;return e(n,i)}},{maxWidth:600}));n.tooltip&&o.bindTooltip(function(t){var i=t.feature.properties;return h(n,i)},{className:"leafletlayer-tooltip",direction:"top"});n.data?o.addData(n.data):n.url&&$.ajax({url:n.url,data:n.filter||{},type:n.ajaxType||"get",dataType:"json",success:function(n){o.addData(n)},error:function(){console.log("Json"+n.url+"")}});break;case"www_tdt":s=f.clone(n);s.subdomains="01234567";switch(n._crs){default:switch(n.layer){case"vec_d":o=L.tileLayer("http://t{s}.tianditu.com/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk="+v,s);break;case"vec_z":o=L.tileLayer("http://t{s}.tianditu.com/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk="+v,s);break;case"img_d":o=L.tileLayer("http://t{s}.tianditu.com/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk="+v,s);break;case"img_z":o=L.tileLayer("http://t{s}.tianditu.com/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk="+v,s);break;case"ter_d":o=L.tileLayer("http://t{s}.tianditu.com/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk="+v,s);break;case"ter_z":o=L.tileLayer("http://t{s}.tianditu.com/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk="+v,s);break;case"vec":default:o=L.layerGroup([r($.extend(s,{name:"",layer:"vec_d",crs:n._crs})),r($.extend(s,{name:"",layer:"vec_z",crs:n._crs}))]);break;case"img":o=L.layerGroup([r($.extend(s,{name:"",layer:"img_d",crs:n._crs})),r($.extend(s,{name:"",layer:"img_z",crs:n._crs}))]);break;case"ter":o=L.layerGroup([r($.extend(s,{name:"",layer:"ter_d",crs:n._crs})),r($.extend(s,{name:"",layer:"ter_z",crs:n._crs}))])}break;case"4326":case"EPSG4326":s.zOffset=1;switch(n.layer){case"vec_d":o=L.tileLayer("http://t{s}.tianditu.com/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk="+v,s);break;case"vec_z":o=L.tileLayer("http://t{s}.tianditu.com/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk="+v,s);break;case"img_d":o=L.tileLayer("http://t{s}.tianditu.com/img_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk="+v,s);break;case"img_z":o=L.tileLayer("http://t{s}.tianditu.com/cia_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=c&TileMatrix={z}&TileRow={y}&TileCol={x}&style=default&format=tiles&tk="+v,s);break;case"ter_d":o=L.tileLayer("http://t{s}.tianditu.com/ter_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=ter&tileMatrixSet=c&TileMatrix={z}&TileRow={y}&TileCol={x}&style=default&format=tiles&tk="+v,s);break;case"ter_z":o=L.tileLayer("http://t{s}.tianditu.com/cta_c/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cta&tileMatrixSet=c&TileMatrix={z}&TileRow={y}&TileCol={x}&style=default&format=tiles&tk="+v,s);break;case"vec":default:o=L.layerGroup([r($.extend(s,{name:"",layer:"vec_d",crs:n._crs})),r($.extend(s,{name:"",layer:"vec_z",crs:n._crs}))]);break;case"img":o=L.layerGroup([r($.extend(s,{name:"",layer:"img_d",crs:n._crs})),r($.extend(s,{name:"",layer:"img_z",crs:n._crs}))]);break;case"ter":o=L.layerGroup([r($.extend(s,{name:"",layer:"ter_d",crs:n._crs})),r($.extend(s,{name:"",layer:"ter_z",crs:n._crs}))])}break;case"4490":case"EPSG4490":switch(n.layer){case"vec_d":s.layer="vec";o=L.tileLayer.tdt(s);break;case"vec_z":s.layer="cva";o=L.tileLayer.tdt(s);break;case"img_d":s.layer="img";o=L.tileLayer.tdt(s);break;case"img_z":s.layer="cia";o=L.tileLayer.tdt(s);break;case"ter_d":s.layer="ter";o=L.tileLayer.tdt(s);break;case"ter_z":s.layer="cta";o=L.tileLayer.tdt(s);break;case"vec":default:o=L.layerGroup([L.tileLayer.tdt({name:"",type:n.type,crs:n._crs,layer:"vec"}),L.tileLayer.tdt({name:"",type:n.type,crs:n._crs,layer:"cva"})]);break;case"img":o=L.layerGroup([L.tileLayer.tdt({name:"",type:n.type,crs:n._crs,layer:"img"}),L.tileLayer.tdt({name:"",type:n.type,crs:n._crs,layer:"cia"})]);break;case"ter":o=L.layerGroup([L.tileLayer.tdt({name:"",type:n.type,crs:n._crs,layer:"ter"}),L.tileLayer.tdt({name:"",type:n.type,crs:n._crs,layer:"cta"})])}}break;case"www_gaode":a={subdomains:"1234"};for(l in n)l!="layer"&&(a[l]=n[l]);switch(n.layer){case"vec":default:o=L.tileLayer("http://"+(n.bigfont?"wprd":"webrd")+"0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",a);break;case"img_d":o=L.tileLayer("http://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",a);break;case"img_z":o=L.tileLayer("http://webst0{s}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scale=1&style=8",a);break;case"time":g=(new Date).getTime();o=L.tileLayer("http://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&;t=1&x={x}&y={y}&z={z}&&t="+g,a);break;case"img":o=L.layerGroup([r({name:"",type:n.type,layer:"img_d"}),r({name:"",type:n.type,layer:"img_z"})])}break;case"www_google":a={subdomains:"123"};for(l in n)l!="layer"&&(a[l]=n[l]);switch(n.layer){case"vec":default:o=L.tileLayer("http://mt{s}.google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=Galile",a);break;case"img_d":o=L.tileLayer("http://mt{s}.google.cn/vt/lyrs=s&hl=zh-CN&gl=CN&x={x}&y={y}&z={z}&s=Gali",a);break;case"img_z":o=L.tileLayer("http://mt{s}.google.cn/vt/imgtp=png32&lyrs=h@207000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galil",a);break;case"img":o=L.layerGroup([r({name:"",type:n.type,layer:"img_d"}),r({name:"",type:n.type,layer:"img_z"})]);break;case"ter":o=L.tileLayer("http://mt{s}.google.cn/vt/lyrs=t@131,r@227000000&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}&s=Galile",a)}break;case"www_osm":a={subdomains:"abc"};for(l in n)a[l]=n[l];o=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",a);break;case"www_baidu":o=L.tileLayer.baidu(n);break;case"custom_jww":o=L.simpleGraticule({interval:10,zoomIntervals:[{start:0,end:2,interval:60},{start:3,end:4,interval:30},{start:5,end:6,interval:10},{start:7,end:8,interval:5},{start:9,end:10,interval:1},{start:11,end:11,interval:.5},{start:12,end:12,interval:.2},{start:13,end:20,interval:.1}],showOriginLabel:!0,redraw:"move"});break;case"custom_lighting":o=L.terminator()}return i&&(d=i(n,o),d&&(o=d)),o==null?n.type!="group"&&console.log(""+(n.name?n.name:"")):(o.config=n,o.name=n.name,n._layer=o),n._crs&&(n.crs=n._crs,delete n._crs),o}function e(n,t){var i=n.popupNameField?t[n.popupNameField]:n.name;return n.popup?o(n.popup,t,i):n.columns?o(n.columns,t,i):!1}function h(n,t){var i=n.popupNameField?t[n.popupNameField]:n.name;return n.tooltip?o(n.tooltip,t,i):!1}function o(n,t,i){var h,u,c,o,e,s,r;if(i=i||"",L.Util.isArray(n)){for(o=0,e='<div class="mars-popup-titile">'+i+'<\/div><div class="mars-popup-content" >',h=0;h<n.length;h++){if(u=n[h],u.type=="details"){if(r=$.trim(t[u.field||"OBJECTID"]),r==null||r==""||r=="Null"||r=="Unknown")continue;e+='<div style="text-align: center;padding: 10px 0;"><button type="button" onclick="'+u.calback+"('"+r+'\');" " class="btn btn-info  btn-sm">'+(u.name||"")+"<\/button><\/div>";continue}if(r=$.trim(t[u.field]),u.hasOwnProperty("show")&&u.show||r!=null&&r!=""&&r!="Null"&&r!="Unknown"&&r!="0"&&r.length!=0){if(u.format)try{r=eval(u.format+"('"+r+"')")}catch(l){console.log("getPopupByConfig error:"+u.format)}u.unit&&(r+=u.unit);e+="<div><label>"+u.name+"<\/label>"+(r||"")+"<\/div>";o++}}return(e+="<\/div>",o==0)?!1:e}if(typeof n=="object")switch(n.type){case"iframe":return c=f.template(n.url,t),e='<iframe id="ifarm" src="'+c+'"  style="width:'+(n.width||"300")+"px;height:"+(n.height||"300")+'px;overflow:hidden;margin:0;" scrolling="no" frameborder="0" ><\/iframe>',e;case"javascript":return eval(n.calback+"("+JSON.stringify(t)+")")}else{if(n=="all"){o=0;e='<div class="mars-popup-titile">'+i+'<\/div><div class="mars-popup-content" >';for(s in t)s!="Shape"&&s!="FID"&&s!="OBJECTID"&&(r=$.trim(t[s]),r!=null&&r!=""&&r!="Null"&&r!="Unknown"&&r!="0"&&r.length!=0)&&(e+="<div><label>"+s+"<\/label>"+r+"<\/div>",o++);return(e+="<\/div>",o==0)?!1:e}return f.template(n,t)}return!1}function c(n){var t={};for(var i in n)i!="popup"&&i!="columns"&&i!="symbol"&&(t[i]=n[i]);return n.symbol&&n.symbol.iconOptions&&(t.pointToLayer=function(t,i){var r=t.properties,u=l(n,r);return L.marker(i,u)}),n.symbol&&n.symbol.styleOptions&&(t.style=function(t){var i=t.properties;return a(n,i)}),t.coordsToLatLng=function(n){if(window.map&&window.map.convert2map){var t=map.convert2map({lat:n[1],lng:n[0]});return new L.LatLng(t[0],t[1],n[2])}return new L.LatLng(n[1],n[0],n[2])},t}function l(n,t,i){var u=n.symbol,r=$.extend({},n.symbol.iconOptions),h,e,o,f,s,c;return u.iconField&&(h=t[u.iconField],e=n.symbol.iconFieldOptions[h],e!=null&&(r=$.extend({},r),r=$.extend(r,e))),i&&r.iconUrlForSelect&&(r.iconUrl=r.iconUrlForSelect),r.hasOwnProperty("iconUrl")?u.icon=L.icon(r):r.hasOwnProperty("iconFont")?(o=20,r.hasOwnProperty("iconSize")&&(o=r.iconSize[0]),f=r.color||"#000000",r.className="",r.html='<i class="'+r.iconFont+'" style="color:'+f+";font-size:"+o+'px;"><\/i> ',u.icon=L.divIcon(r)):(f=r.color||"#0f89f5",s='<div class="centerat_animation" style="color:'+f+';"><p><\/p><\/div>',u.nameField&&(c=t[u.nameField],s+=' <div class="layer_divicon_name" style="top: 2px;left: 25px;" >'+c+"<\/div>"),u.icon=L.divIcon({className:"",iconSize:[10,10],iconAnchor:[5,5],popupAnchor:[5,-5],tooltipAnchor:[5,-5],html:s})),u}function a(n,t){var u=n.symbol,i=n.symbol.styleOptions,e,r;return u.styleField&&(e=t[u.styleField],r=n.symbol.styleFieldOptions[e],r!=null&&(i=f.clone(i),i=$.extend(i,r))),i}function s(n){var t=y(n.options),u,i;if(n instanceof L.SVG)return L.svg(t);if(n instanceof L.Canvas)return L.canvas(t);if(n.config&&n.config.type){u={};for(i in n.config)i!="_layer"&&(u[i]=n.config[i]);return r(u)}if(t.type=="arcgis_cache"||n instanceof L.TileLayer.ArcGISTile)return L.tileLayer.arcGISTile(t.url,t);if(t.type=="wmts"||n instanceof L.TileLayer.WMTS||t.type=="wms"||n instanceof L.TileLayer.WMTS)return L.tileLayer.wmts(n._url,t);if(n instanceof L.TileLayer)return L.tileLayer(n._url,t);if(n instanceof L.ImageOverlay)return L.imageOverlay(n._url,n._bounds,t);if(n instanceof L.Marker)return L.marker(n.getLatLng(),t);if(n instanceof L.Circle)return L.circle(n.getLatLng(),n.getRadius(),t);if(n instanceof L.CircleMarker)return L.circleMarker(n.getLatLng(),t);if(n instanceof L.Rectangle)return L.rectangle(n.getBounds(),t);if(n instanceof L.Polygon)return L.polygon(n.getLatLngs(),t);if(n instanceof L.Polyline)return L.polyline(n.getLatLngs(),t);if(n instanceof L.GeoJSON)return L.geoJson(n.toGeoJSON(),t);if(n instanceof L.LayerGroup)return L.layerGroup(v(n));if(n instanceof L.FeatureGroup)return L.FeatureGroup(v(n));throw"Unknown layer, cannot clone this layer. Leaflet-version: "+L.version;}function y(n){var r={},i,t;for(i in n)t=n[i],r[i]=t&&t.clone?t.clone():t instanceof L.Layer?s(t):t;return r}function v(n){var t=[];return n.eachLayer(function(n){t.push(s(n))}),t}function p(n){var r,i,t;return n instanceof L.Marker||n instanceof L.Circle||n instanceof L.CircleMarker?(r=n.getLatLng(),[r]):n instanceof L.Rectangle?(i=n.getBounds(),[i.getNorthWest(),i.getSouthEast()]):n instanceof L.Polygon?(t=n.getLatLngs(),t.length==0)?t:t[0]:n instanceof L.Polyline?n.getLatLngs():[]}function w(){return[{name:"",type:"www_gaode",layer:"vec",icon:"bingmap.png",visible:!0,crs:"gcj"},{name:"",type:"www_gaode",layer:"img",icon:"bingimage.png",crs:"gcj"},{name:"",type:"www_google",layer:"vec",icon:"googlemap.png",crs:"gcj"},{name:"",type:"www_google",layer:"img",icon:"googleimage.png",crs:"gcj"},{name:"",type:"www_tdt",layer:"vec",icon:"tianditumap.png",crs:"EPSG3857"},{name:"",type:"www_tdt",layer:"img",icon:"tiandituimage.png",crs:"EPSG3857"}]}function b(n,t){return n instanceof L.Circle?k(n,t):n instanceof L.Rectangle?d(n,t):n instanceof L.Polygon?nt(n,t):void 0}function k(n,t){var i=n.getRadius(),r=n.getLatLng();return Math.abs(r.distanceTo(t))<=i}function d(n,t){var i=n.getBounds();return i.contains(t)}function g(n,t,i){for(var u=!1,r=0,f=i.length-1;r<i.length;f=r++){var o=i[r].lat,e=i[r].lng,h=i[f].lat,s=i[f].lng,c=e>t!=s>t&&n<(h-o)*(t-e)/(s-e)+o;c&&(u=!u)}return u}function nt(n,t){for(var r=n.getLatLngs(),u=!1,i=0;i<r.length;i++)g(t.lat,t.lng,r[i])&&(u=!0);return u}function tt(n){u=n}var f,u;Object.defineProperty(t,"__esModule",{value:!0});i.d(t,"createLayer",function(){return r});i.d(t,"cloneLayer",function(){return s});i.d(t,"getDefaultBaseLayers",function(){return w});i.d(t,"isInPoly",function(){return b});i.d(t,"getLatlngs",function(){return p});i.d(t,"getPopup",function(){return o});i.d(t,"getPopupByConfig",function(){return e});i.d(t,"getMarkerOptionsByConfig",function(){return l});i.d(t,"getPolyOptionsByConfig",function(){return a});i.d(t,"bindClickFeature",function(){return tt});f=i(20)},function(n,t,i){function f(n,t,i){var e,o,h,u,f,r;if(t==null){console.log("");return}if(!t.hasOwnProperty("copyright")||t.copyright)try{eval(function(n,t,i,r,u,f){if(u=function(n){return n.toString(t)},!"".replace(/^/,String)){while(i--)f[u(i)]=r[i]||u(i);r=[function(n){return f[n]}];u=function(){return"\\w+"};i=1}while(i--)r[i]&&(n=n.replace(new RegExp("\\b"+u(i)+"\\b","g"),r[i]));return n}('1(f(){2.3("\\4\\5\\6\\7\\8\\9 a b\\d\\e\\0\\g %c \\h\\i\\j\\k\\l://m.n.o","p:q")},r);',28,28,"u5b9e|setTimeout|console|log|u5f53|u524d|u5730|u56fe|u4f7f|u7528MarsGIS|for|Leaflet||u6846|u67b6|function|u73b0|u5b98|u65b9|u7f51|u7ad9|uff1ahttp|leaflet|marsgis|cn|color|red|6E4".split("|"),0,{}))}catch(c){}return t.centerAutoLevel=t.centerAutoLevel||15,t.extent?(o=(t.extent.xmin+t.extent.xmax)/2,h=(t.extent.ymin+t.extent.ymax)/2,e=[h,o]):e=t.center&&t.center.x?[t.center.y,t.center.x]:t.center,t.center=e,u=s(n.id,t,n),f=u.map,t.zoom||(t.zoom=f.getZoom()),r={},r.config=t,r.baselayers=u.baselayers,r.overlayers=u.overlayers,r.controls=u.controls,f.gisdata=r,n.success&&n.success(f,r,i),f}function s(n,t,i){function ot(n,t){function u(i){var u={z:n.getZoom()},e,f,o;switch(t.crs){default:f=t.hasOwnProperty("toFixed")?t.toFixed:6;u.x=i.lng.toFixed(f);u.y=i.lat.toFixed(f);break;case"degree":u.x=r.formatDegree(i.lng);u.y=r.formatDegree(i.lat);break;case"project":f=t.hasOwnProperty("toFixed")?t.toFixed:0;e=n.project(i,n.getZoom());u.x=e.x.toFixed(f);u.y=e.y.toFixed(f);break;case"wgs":f=t.hasOwnProperty("toFixed")?t.toFixed:6;i=n.convert2wgs(i);u.x=i[1].toFixed(f);u.y=i[0].toFixed(f);break;case"wgs-degree":i=n.convert2wgs(i);u.x=r.formatDegree(i[1]);u.y=r.formatDegree(i[0])}o=r.template(t.format,u);$("#location").html(o)}function f(){$("#location").css({left:$(".leaflet-control-scale-line").width()+40+"px"})}document.getElementById("location")||$("#"+n._container.id).prepend('<div id="location" class="location-bar no-print no-print-view"><\/div>');t.format=t.format||"<div>:{x}<\/div><div>:{y}<\/div>";var i;n.on("mousemove",function(n){i=n.latlng;u(n.latlng)});n.on("zoomend",function(){f();i=i||n.getCenter();u(i)});f()}var o,v=r.getRequest(),s=t.basemaps,h,c,it,ut,b,k,y,a,d,g,nt,l,rt,tt,e,f,p,w,ft;for(t.crs=t.crs||"EPSG3857",e=0;e<s.length;e++)f=s[e],f.crs==null&&t.crs!=null&&(f.crs=t.crs),f.hasOwnProperty("visible")&&f.visible&&(h=f);if(!h&&s.length>0&&(h=s[0],h.visible=!0),v&&v.baselayer)for(e=0;e<s.length;e++)if(f=s[e],f.name==v.baselayer){h&&(h.visible=!1);h=f;h.visible=!0;break}if(h&&h.crs!=t.crs&&(t.crs=h.crs),typeof t.crs=="string"){ut=(t.crs||"").toString().toUpperCase();switch(ut){default:c=L.CRS.EPSG3857;break;case"IMAGE":case"SIMPLE":c=L.CRS.Simple;break;case"4326":case"EPSG4326":c=L.CRS.EPSG4326;break;case"3395":case"EPSG3395":c=L.CRS.EPSG3395;break;case"4490":case"EPSG4490":c=L.CRS.EPSG4490;break;case"BD09":case"BAIDU":it="bd";c=L.CRS.Baidu;break;case"GCJ":case"GCJ02":it="gcj";c=L.CRS.EPSG3857}}else if(typeof t.crs=="object"){b={};for(e in t.crs)if(e!="code"&&e!="proj"){if(e=="bounds"){b.bounds=L.bounds(t.crs.bounds);continue}b[e]=t.crs[e]}c=new L.Proj.CRS(t.crs.code,t.crs.proj,b)}k={crs:c,zoomControl:!1,attributionControl:!1,pointconvertType:it,contextmenu:!0,contextmenuWidth:140,contextmenuItems:[{text:"",iconCls:"fa fa-hand-o-right",callback:function(n){o.panTo(n.latlng)}},{text:"",iconCls:"fa fa-map-marker",callback:function(n){var t=""+o.getZoom(),i;t+="<br/>"+n.latlng.lng.toFixed(6)+" "+n.latlng.lat.toFixed(6);o.hasConvert()&&(i=o.convert2wgs(n.latlng),t+="<br/>"+i[1].toFixed(6)+" "+i[0].toFixed(6)+" (WGS84)");haoutil.alert(t)}},"-",{text:"",iconCls:"fa fa-search-plus",callback:function(){o.zoomIn()}},{text:"",iconCls:"fa fa-search-minus",callback:function(){o.zoomOut()}}]};for(y in t)y!=="crs"&&y!=="controls"&&y!=="basemaps"&&y!=="operationallayers"&&(k[y]=t[y]);i==null&&(i={});for(e in k)i.hasOwnProperty(e)||(i[e]=k[e]);if(o=L.map(n,i),v&&v.center&&v.center.indexOf(",")!=-1&&(a=v.center.split(","),a.length==2?(d=o.convert2map([a[0],a[1]]),o.panTo(d)):a.length==3&&(d=o.convert2map([a[0],a[1]]),o.setView(d,a[2]))),g={},s=t.basemaps,s)for(e=0;e<s.length;e++)(f=s[e],l=u.createLayer(f,t.serverURL,i.layerToMap),l!=null)&&(f.hasOwnProperty("visible")&&f.visible&&(l.addTo(o),f.maxBounds&&o.setMaxBounds(f.maxBounds),f.background&&$(".leaflet-container").css({background:f.background})),g[f.name]=l);if(nt={},s=t.operationallayers,s)for(e=0;e<s.length;e++)(f=s[e],l=u.createLayer(f,t.serverURL,i.layerToMap),l!=null)&&(f.hasOwnProperty("visible")&&f.visible&&l.addTo(o),nt[f.name]=l);if(rt={},tt=t.controls,tt)for(e=0;e<tt.length;e++)if(f=tt[e],!f.hasOwnProperty("visible")||f.visible){switch(f.type){case"layers":p=L.control.layers(g,nt,{position:f.position||"topright"});break;case"zoom":p=L.control.zoom({position:f.position||"bottomright"});break;case"scale":p=L.control.scale({metric:!0,imperial:!1});break;case"tool":f.position=f.position||"bottomright";p=L.control.toolbar(f).addTo(o);break;case"location":ot(o,f)}p!=null&&(o.addControl(p),rt[f.type]=p)}if(t.center&&o.setView(t.center,t.zoom),t.extent&&o.fitBounds([[t.extent.ymin,t.extent.xmin],[t.extent.ymax,t.extent.xmax]]),t.clickHighlight){function et(){if(w){if(ft=="arcgis_dynamic")o.removeLayer(w);else{var n=l.options;n.weight=n._weight_old;n.color=n._color_old;w.setStyle(n)}w=null}}o.on("click",et);u.bindClickFeature(function(n,t){if(et(),t.setStyle){if(n=="arcgis_dynamic")t.setStyle({color:"#3388ff",weight:3}),o.addLayer(t);else{var i=t.options;i._color_old==null&&(i._color_old=i.color);i._weight_old==null&&(i._weight_old=i.weight);i.color="#3388ff";i.weight=3;t.setStyle(i)}w=t;ft=n}})}return{map:o,baselayers:g,overlayers:nt,controls:rt}}var u=i(120),r=i(20),e=i(32),o=function(n){return n.url?($.ajax({type:"get",dataType:"json",url:n.url,success:function(t){var i=t.map;t.serverURL&&(i.serverURL=t.serverURL);n.serverURL&&(i.serverURL=n.serverURL);f(n,i,t)},error:function(){console.log("Json"+n.url+"");haoutil.alert("Json"+n.url+"")}}),null):(n.serverURL&&n.data&&(n.data.serverURL=n.serverURL),f(n,n.data))};t.name="Leaflet";t.website="http://leaflet.marsgis.cn";t.author="marsgis";t.version="1.5";t.createMap=o;t.layer=u;t.pointconvert=e;t.measure=i(122).default;t.util=r;t.Marker=i(124).default;t.Draw=i(123).default;t.MeasureTool=i(125).default},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={length:function(n){var i,t,r;if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),n.length===0)return 0;for(i=0,t=0,r=n.length-1;t<r;t++)i+=n[t].distanceTo(n[t+1]);return i},lengthstr:function(n){return this.lengthFormat(this.length(n))},lengthFormat:function(n){return n>1e3?(n/1e3).toFixed(2)+"":n.toFixed(0)+""},geodesicArea:function(n){return this.area(n)},area:function(n){var t,i,u,f;if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),t=n.length,t==1&&(n=n[0],t=n.length),t==undefined||t<3)return 0;var r=0,e=n[t-1].lng,o=n[t-1].lat;for(i=0;i<t;i++)u=n[i].lng,f=n[i].lat,r+=this.toRadians(u-e)*(2+Math.sin(this.toRadians(o))+Math.sin(this.toRadians(f))),e=u,o=f;return r=r*40680631590769/2,Math.abs(r)},toRadians:function(n){return n*Math.PI/180},areastr:function(n){return this.areaFormat(this.area(n))},areaFormat:function(n){return n>=1e6?(n/1e6).toFixed(2)+"":n.toFixed(0)+""},getAngle:function(n,t){var u,i,f,r;if(!n||!t)return 0;if(u=t.x-n.x,i=t.y-n.y,u==0){if(i==0)return 0;if(i>0)return 90;if(i<0)return 270}return f=Math.atan(i/u),r=f/Math.PI*180,u<=0&&(r=r+180),u>0&&i<0&&(r=r+360),Number(r.toFixed(0))}};t["default"]=i},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(n){var t={map:null,layerDraw:null,options:n,control:{},init:function(){this.map=this.options.map;this.layerDraw=this.options.layer?this.options.layer:L.featureGroup().addTo(this.map,{editing:!0});this.options.style=this.options.style||{color:"#0000ff",weight:2};var n=this.options.style;this.control.marker=new L.Draw.Marker(this.map,{icon:new L.Icon.Default});this.control.text=new L.Draw.Text(this.map);this.control["font-marker"]=new L.Draw.FontMarker(this.map);this.control.polyline=new L.Draw.Polyline(this.map,{shapeOptions:n});this.control.polylinefree=new L.Draw.Polylinefree(this.map,{shapeOptions:n});this.control.rectangle=new L.Draw.Rectangle(this.map,{shapeOptions:n});this.control.circle=new L.Draw.Circle(this.map,{shapeOptions:n});this.control.polygon=new L.Draw.Polygon(this.map,{allowIntersection:!0,showArea:!0,metric:["km","m"],shapeOptions:n});this.control.image=new L.Draw.Image(this.map);(!this.options.hasOwnProperty("onEvnet")||this.options.onEvnet)&&this.onEvnet()},onEvnet:function(){this.layerDraw.on("click",this._layerDraw_clickHndler,this);this.map.on("click",this._map_clickHndler,this);this.map.on("dblclick",this._map_dblclickHndler,this);this.map.on("draw:created",this._map_draw_createdHndler,this);if(this.options.onChange&&typeof this.options.onChange=="function"){this.map.on("draw:editvertex",this._map_draw_changeHandler,this);this.map.on("draw:editmove",this._map_draw_changeHandler,this);this.map.on("draw:editresize",this._map_draw_changeHandler,this)}return this},offEvent:function(){return this.layerDraw.off("click",this._layerDraw_clickHndler,this),this.map.off("click",this._map_clickHndler,this),this.map.off("dblclick",this._map_dblclickHndler,this),this.map.off("draw:created",this._map_draw_createdHndler,this),this.options.onChange&&typeof this.options.onChange=="function"&&(this.map.off("draw:editvertex",this._map_draw_changeHandler,this),this.map.off("draw:editmove",this._map_draw_changeHandler,this),this.map.off("draw:editresize",this._map_draw_changeHandler,this)),this},destroy:function(n){return this.stopDraw(),n||this.clearDraw(),this.offEvent(),this},_drawtype:null,_defval:null,startDraw:function(n,t){if(this.control[n]==null)throw"type"+n+"";if(t=t||this.configDefval[n],t.type=t.type||n,this._drawtype=n,this._defval=t,this.options.isOnly&&this.clearDraw(),this.stopDraw(),t)switch(n){default:this.control[n].setOptions({shapeOptions:t.style});break;case"image":this.control[n].setOptions(t.style);break;case"marker":var i;t.style.hasOwnProperty("iconUrl")&&t.style.iconUrl!=null&&t.style.iconUrl!=""?(t.style.iconSize0&&t.style.iconSize1&&(t.style.iconSize=[t.style.iconSize0,t.style.iconSize1]),t.style.iconAnchor0&&t.style.iconAnchor1&&(t.style.iconAnchor=[t.style.iconAnchor0,t.style.iconAnchor1]),i=L.icon(t.style)):i=new L.Icon.Default;this.control[n].setOptions({icon:i});break;case"text":case"font-marker":this.control[n].updateIcon(t.style)}this.control[n].enable()},stopDraw:function(){for(var n in this.control)this.control[n].disable();return this.stopEditing(),this},clearDraw:function(){this.layerDraw.clearLayers()},_hasEdit:!0,hasEdit:function(n){this._hasEdit=n;n||this.stopEditing()},currEditFeature:null,startEditing:function(n){if(n!=null&&this._hasEdit&&(n.editing&&n.editing.enable(),this.currEditFeature=n,this.options.hasOwnProperty("onStartEditing")&&this.options.onStartEditing))this.options.onStartEditing(this.currEditFeature)},stopEditing:function(){if(this.currEditFeature&&this.currEditFeature.editing&&this.currEditFeature.editing.disable&&(this.currEditFeature.editing.disable(),this.options.hasOwnProperty("onStopEditing")&&this.options.onStopEditing))this.options.onStopEditing(this.currEditFeature);this.currEditFeature=null},updateProperties:function(n,t){var r,i,u,f,e;if(n=n||this.currEditFeature,n!=null){r=n.properties;t?n.properties=t:t=r;switch(t.type){case"marker":t.style.hasOwnProperty("iconUrl")&&t.style.iconUrl!=null&&t.style.iconUrl!=""?(u={iconUrl:t.style.iconUrl,iconSize:[t.style.iconSize0,t.style.iconSize1],iconAnchor:[t.style.iconAnchor0,t.style.iconAnchor1]},i=L.icon(u)):i=new L.Icon.Default;n.setIcon(i);n.setOpacity(t.style.opacity);break;case"text":case"font-marker":n.setOpacity(t.style.opacity);f=this.control[t.type].getIcon(t.style);n.setIcon(f);break;case"polyline":case"polylinefree":case"polygon":case"rectangle":n.setStyle(t.style);break;case"image":n._imageOverlay==null&&(e=new L.ImageOverlay(t.style.iconUrl,n.getBounds(),{opacity:t.style.opacity}),n._imageOverlay=e,n._imageOverlay._nosave=!0,this.layerDraw.addLayer(n._imageOverlay));n._imageOverlay.setOpacity(t.style.opacity);break;case"circle":t.isSemicircle||(t.startAngle=null,t.stopAngle=null);n.setRadius(t.style.radius);n.setStyle(t.style);n.redraw()}return n}},deleteFeature:function(n){this.layerDraw.removeLayer(n)},_map_clickHndler:function(){this.stopEditing()},_map_dblclickHndler:function(n){L.DomEvent.stopPropagation(n);for(var t in this.control)this.control[t]._enabled&&this.control[t]._finishShape&&this.control[t]._finishShape()},_layerDraw_clickHndler:function(n){n.layer!=this.currEditFeature&&this.stopEditing();this.startEditing(n.layer);L.DomEvent.stopPropagation(n)},_map_draw_createdHndler:function(n){var t=n.layer;if(t.properties=this._defval,this._updateFeatureForEdit(t),this.layerDraw.addLayer(t),this.options.hasDel&&this.bindDeleteContextmenu(t),this.stopEditing(),L.Browser.ie||this.startEditing(t),this.options.onCreate&&typeof this.options.onCreate=="function")this.options.onCreate(n)},_map_draw_changeHandler:function(n){var t=this.currEditFeature;n.layer=t;this._updateFeatureForEdit(t);this.options.onChange(n)},_updateFeatureForEdit:function(n){if(n.properties!=null&&n.properties.type!=null)switch(n.properties.type){case"circle":n.properties.style.radius=parseInt(n.getRadius());break;case"image":this.layerDraw.addLayer(n._imageOverlay);n._imageOverlay._nosave=!0;n._imageOverlay.setBounds(n.getBounds());break;case"polylinefree":if(window.turf){var i=turf.simplify(n.toGeoJSON(),{tolerance:.0001,highQuality:!1}),t=L.geoJSON(i).getLayers()[0].getLatLngs();t&&t.length>0&&n.setLatLngs(t)}}},hasDraw:function(){if(this.layerDraw==null)return!1;var n=this.layerDraw.getLayers();return n.length>0},getLayer:function(){return this.layerDraw},getFeatures:function(){if(this.hasDraw()){var n=this.layerDraw.getLayers();return this.options.isOnly?n[0]:n}return null},bindDeleteContextmenu:function(n){var t=this;n.bindContextMenu&&n.bindContextMenu({contextmenu:!0,contextmenuInheritItems:!1,contextmenuItems:[{text:"",iconCls:"fa fa-trash",context:n,callback:function(){var n=this;t.deleteFeature(n)}}]})},toJson:function(n){var o=this.layerDraw.getLayers(),s,f,i,r,h,u,t,e,c,l;if(o.length==0)return n?{}:"";for(s=[],f=0;f<o.length;f++)if(i=o[f],!i._nosave){r=i.toGeoJSON();r.properties={type:i.properties.type};h=this.configDefval[i.properties.type];for(u in i.properties.style)(t=i.properties.style[u],t!=null&&t!="")&&(e=h.style[u],e!=t)&&(r.properties.style==null&&(r.properties.style={}),r.properties.style[u]=t);for(u in i.properties.attr)(t=i.properties.attr[u],t!=null&&t!="")&&(e=h.attr[u],e!=t)&&(r.properties.attr==null&&(r.properties.attr={}),r.properties.attr[u]=t);s.push(r)}return c={type:"FeatureCollection",features:s},l=n?c:JSON.stringify(c),l},jsonToLayer:function(n,t,i){var l,v,e,s,u,r,h,f,c,o;this.stopDraw();this.options.isOnly&&this.clearDraw();l=n;try{typeof n=="string"&&n.constructor==String&&(l=JSON.parse(n))}catch(a){haoutil.alert(a.name+": "+a.message+" \njson!!!");return}if(v=L.geoJSON(l),e=v.getLayers(),e.length==0)return 0;for(t&&this.layerDraw.clearLayers(),s=0;s<e.length;s++){if(u=e[s],u.feature.properties=u.feature.properties||{},r=u.feature.properties,r.style==null&&(r.style={}),r.attr==null&&(r.attr={}),r.type==null)switch(u.feature.geometry.type){default:case"Point":case"MultiPoint":r.type="marker";break;case"LineString":case"MultiLineString":r.type="polyline";break;case"Polygon":case"MultiPolygon":r.type="polygon"}h=this.configDefval[r.type];for(f in h.style)(c=r.style[f],c==null)&&(r.style[f]=h.style[f]);for(f in h.attr)(c=r.attr[f],c==null)&&(r.attr[f]=h.attr[f]);switch(r.type){case"circle":o=L.circle(u.getLatLng(),{radius:r.style.radius});u=o;break;case"rectangle":o=L.rectangle(u.getBounds());u=o;break;case"image":o=L.rectangle(u.getBounds(),this.control.image._defstyle);u=o}u.properties=r;u.feature=null;this.layerDraw.addLayer(u);this.updateProperties(u);e[s]=u}return i&&map.fitBounds(this.layerDraw.getBounds()),e},configDefval:{text:{type:"text",name:"",style:{text:"",opacity:1,color:"#0081c2",font_size:30,font_family:"",font_style:"normal",font_weight:"normal",background:!1,background_color:"#ccc",border:!1,border_color:"#5928de",border_width:3,border_style:"solid"},attr:{name:"",remark:""}},"font-marker":{type:"font-marker",name:"",style:{opacity:1,size:50,color:"#000000",iconClass:"fa fa-crosshairs"},attr:{name:"",remark:""}},marker:{type:"marker",name:"",style:{opacity:1,iconUrl:"",iconSize0:25,iconSize1:41,iconAnchor0:12,iconAnchor1:41},attr:{name:"",remark:""}},polyline:{type:"polyline",name:"",style:{color:"#3388ff",weight:3,opacity:1,dashArray:""},attr:{name:"",remark:""}},polylinefree:{type:"polylinefree",name:"",style:{color:"#3388ff",weight:3,opacity:1,dashArray:""},attr:{name:"",remark:""}},polygon:{type:"polygon",name:"",style:{stroke:!0,color:"#3388ff",weight:2,opacity:1,dashArray:"",fill:!0,fillColor:"#3388ff",fillOpacity:.3},attr:{name:"",remark:""}},rectangle:{type:"rectangle",name:"",style:{stroke:!0,color:"#3388ff",weight:2,opacity:1,dashArray:"",fill:!0,fillColor:"#3388ff",fillOpacity:.3},attr:{name:"",remark:""}},circle:{type:"circle",name:"",style:{radius:0,stroke:!0,color:"#3388ff",weight:2,opacity:1,dashArray:"",fill:!0,fillColor:"#3388ff",fillOpacity:.3,isSemicircle:!1,startAngle:0,stopAngle:0},attr:{name:"",remark:""}},image:{type:"image",name:"",style:{iconUrl:"",opacity:1},attr:{name:"",remark:""}}}};return t.init(),t};t["default"]=i},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(n){var t={map:null,layerBase:null,layerPoint:null,layerText:null,textShowZoom:-1,minZoom:-1,maxZoom:99,init:function(){t.map=n.map;t.minZoom=n.minZoom||-1;t.maxZoom=n.maxZoom||99;t.textShowZoom=n.textShowZoom||15;t._visible=n.hasOwnProperty("visible")?n.visible:!0;t.layerBase=L.layerGroup([]);t._visible&&t.map.addLayer(t.layerBase);t.layerText=L.featureGroup([]).addTo(t.layerBase);t.layerPoint=n.isCluster?L.markerClusterGroup({chunkedLoading:!0,showCoverageOnHover:!1,disableClusteringAtZoom:t.textShowZoom}).addTo(t.layerBase):L.featureGroup([]).addTo(t.layerBase);t.map.on("zoomend",t.map_zoomendHandler);if(t.map_zoomendHandler(),n.click){t.layerText.on("click",function(t){n.click(t.layer.attribute,t.layer)});t.layerPoint.on("click",function(t){n.click(t.layer.attribute,t.layer)})}if(n.dblclick){t.layerText.on("dblclick",function(t){n.dblclick(t.layer.attribute,t.layer)});t.layerPoint.on("dblclick",function(t){n.dblclick(t.layer.attribute,t.layer)})}},getLayer:function(){return this.layerBase},map_zoomendHandler:function(){if(t._visible){var n=t.map.getZoom();t.minZoom<=n&&n<=t.maxZoom?(t.map.addLayer(t.layerBase),t.updatePointSize(n),n>=t.textShowZoom?t.layerBase.addLayer(t.layerText):t.layerBase.removeLayer(t.layerText)):t.map.removeLayer(t.layerBase)}},updatePointSize:function(t){var e,f,u,i;if(n.isAutoZoomSize){var o=16,s=map.getZoomScale(t,o),h=Math.pow(.55,t-o),r=s*h;for(r>1&&(r=1),e=this.layerPoint.getLayers(),f=0;f<e.length;f++)u=e[f],i=u.options.icon.options,i.iconSize&&(i.iconSizeDef||(i.iconSizeDef=[i.iconSize[0],i.iconSize[1]]),i.iconSize[0]=i.iconSizeDef[0]*r,i.iconSize[1]=i.iconSizeDef[1]*r),i.iconAnchor&&(i.iconAnchorDef||(i.iconAnchorDef=[i.iconAnchor[0],i.iconAnchor[1]]),i.iconAnchor[0]=i.iconAnchorDef[0]*r,i.iconAnchor[1]=i.iconAnchorDef[1]*r),u.options.icon instanceof L.DivIcon?u.setIcon(L.divIcon(i)):u.options.icon instanceof L.Icon&&u.setIcon(L.icon(i))}},_visible:!0,visible:function(n){t._visible=n;n?(t.map.addLayer(t.layerBase),t.map_zoomendHandler()):t.map.removeLayer(t.layerBase)},clear:function(){t.layerPoint.clearLayers();t.layerText.clearLayers()},_isBindPopup:!1,_isBindTooltip:!1,arrData:null,showData:function(n,i){if(t.arrData=n,t.clear(),n!=null&&n.length!=0){i=i||{};i.name=i.name||{};var r=i.name.jd||"jd",u=i.name.wd||"wd",f=i.name.mc||"mc";return $.each(n,function(n,e){var h=e[r],c=e[u],v=e[f],s,o,l;if(!isNaN(h)&&!isNaN(c)&&h!=0&&c!=0){s=typeof i.icon=="function"?i.icon(e):i.icon;o=L.marker([c,h],{icon:s});i.bindPopup&&(t._isBindPopup=!0,l=i.bindPopup(e),o.bindPopup(l));i.bindTooltip&&(t._isBindTooltip=!0,l=i.bindTooltip(e),o.bindTooltip(l));o.attribute=e;t.layerPoint.addLayer(o);e._marker_point=o;var y=i.fontsize||13,w=v.replace(/[\u0391-\uFFE5]/g,"aa").length,p=w*y/2,a=5;s.options.iconSize&&s.options.iconSize.length>1&&(a+=s.options.iconSize[1]||10,s.options.iconAnchor&&s.options.iconAnchor.length>1&&(a-=s.options.iconAnchor[1]||0));o=L.marker([c,h],{icon:L.divIcon({iconSize:[p,y],iconAnchor:[p/2,-a],className:"leaflet-text-marker",html:v})});o.attribute=e;t.layerText.addLayer(o);e._marker_text=o}}),i.hasOwnProperty("isCenter")||(i.isCenter=!0),i.isCenter&&map.fitBounds(t.layerPoint.getBounds()),t.updatePointSize(map.getZoom()),t.layerPoint.getLayers()}},getData:function(){return arrData},getItemById:function(n,i){var u,r,f;for(i=i||"id",u=t.arrData,r=0;r<u.length;r++)if(f=u[r],f[i]==n)return f;return null},getMarkerById:function(n,i){var u,r,f;for(i=i||"id",u=t.layerPoint.getLayers(),r=0;r<u.length;r++)if(f=u[r],f.attribute[i]==n)return f;return null},lastCenter:null,lastCenterAnimation:null,centerAt:function(n,i,r){var u,f,e;return(t.clearCenter(),u=t.getMarkerById(n,i),u==null)?!1:(f=u.getLatLng(),t.map.centerAt(f),t._isBindTooltip&&u.openTooltip(f),t._isBindPopup&&u.openPopup(f),t.lastCenter=u,r&&(e=L.marker(f,{icon:L.divIcon({className:"",iconSize:[10,10],iconAnchor:[5,5],popupAnchor:[5,-5],tooltipAnchor:[5,-5],html:'<div class="centerat_animation" style="color:#0f89f5;"><p><\/p><\/div>'})}),t.map.addLayer(e),t.lastCenterAnimation=e,setTimeout(function(){t.lastCenterAnimation!=null&&(t.lastCenterAnimation.remove(),t.lastCenterAnimation=null)},6e3)),!0)},clearCenter:function(){t.lastCenter!=null&&(t._isBindTooltip&&t.lastCenter.closeTooltip(),t._isBindPopup&&t.lastCenter.closePopup(),t.lastCenter=null);t.lastCenterAnimation!=null&&(t.lastCenterAnimation.remove(),t.lastCenterAnimation=null)}};return t.init(),t};t["default"]=i},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=L.Class.extend({map:null,initialize:function(n){n=n||{};this.map=n.map;this._create();(!n.hasOwnProperty("isactivate")||n.options)&&this.activate()},layerDraw:null,layerResult:null,polylineControl:null,polygonControl:null,_create:function(){this.layerDraw=L.featureGroup().addTo(this.map);this.layerResult=L.featureGroup().addTo(this.map);var n={color:"#0000ff",weight:2};this.polylineControl=new L.Draw.Polyline(this.map,{shapeOptions:n});this.polygonControl=new L.Draw.Polygon(this.map,{allowIntersection:!1,showArea:!0,metric:["km","m"],shapeOptions:n})},isActivate:!1,activate:function(){if(!this.isActivate){this.isActivate=!0;this.map.addLayer(this.layerResult);this.map.addLayer(this.layerDraw);this.layerDraw.on("click",this._layerDraw_clickHndler,this);this.map.on("click",this._map_clickHndler,this);this.map.on("dblclick",this._map_dblclickHndler,this);this.map.on("draw:created",this._map_draw_createdHndler,this);this.map.on("draw:drawvertex",this._map_draw_drawvertexHandler,this);this.map.on("draw:drawing",this._map_draw_drawing,this);this.map.on("draw:editvertex",this._map_draw_changeHandler,this);this.map.on("draw:editmove",this._map_draw_changeHandler,this);this.map.on("draw:editresize",this._map_draw_changeHandler,this)}},disable:function(){this.isActivate=!1;this.clear();this.map.removeLayer(this.layerDraw);this.map.removeLayer(this.layerResult);this.layerDraw.off("click",this._layerDraw_clickHndler,this);this.map.off("click",this._map_clickHndler,this);this.map.off("dblclick",this._map_dblclickHndler,this);this.map.off("draw:created",this._map_draw_createdHndler,this);this.map.off("draw:drawvertex",this._map_draw_drawvertexHandler,this);this.map.off("draw:drawing",this._map_draw_drawing,this);this.map.off("draw:editvertex",this._map_draw_changeHandler,this);this.map.off("draw:editmove",this._map_draw_changeHandler,this);this.map.off("draw:editresize",this._map_draw_changeHandler,this)},currEditFeature:null,startEditing:function(n){n!=null&&(n.editing.enable(),this.currEditFeature=n)},stopEditing:function(){this.currEditFeature&&this.currEditFeature.editing&&this.currEditFeature.editing.disable&&this.currEditFeature.editing.disable();this.currEditFeature=null},_map_clickHndler:function(){this.stopEditing()},_layerDraw_clickHndler:function(n){n.layer!=this.currEditFeature&&this.stopEditing();this.startEditing(n.layer);L.DomEvent.stopPropagation(n)},_map_draw_changeHandler:function(){var n=this.currEditFeature,u,r,t,i;if(n.type=="polyline"){if(n.tipMarker)for(u=0;u<n.tipMarker.length;u++)t=n.tipMarker[u],t.remove();for(n.tipMarker=[],i=n.getLatLngs(),r=0;r<i.length;r++)t=this._showLengthTipMarker(i.slice(0,r+1)),r==i.length-1&&(t._isend=!0,t._icon.innerHTML=""+t._icon.innerHTML),n.tipMarker.push(t);this._showResultLength(i)}else n.tipMarker&&n.tipMarker.remove(),i=n.getLatLngs()[0],this._showResultArea(i),this._showAreaTipMarker(n)},clear:function(){return this._stopDraw(),this._last_length_val=0,this._last_area_val=0,this._length_tipmarker=[],this.layerDraw.clearLayers(),this.layerResult.clearLayers(),this},_stopDraw:function(){this._length_tipmarker=[];this.polylineControl.disable();this.polygonControl.disable()},_drawType:"",_drawParams:null,measureLength:function(n){return this._drawType="length",this._drawParams=n,this._stopDraw(),this.polylineControl.enable(),this},measureArea:function(n){return this._drawType="area",this._drawParams=n,this._stopDraw(),this.polygonControl.enable(),this},_map_draw_drawvertexHandler:function(n){var u=n.layers.getLayers(),e,i,t,r,f;if(this._drawType=="length"){for(i=[],t=0;t<u.length;t++)r=u[t],f=r.getLatLng(),i.push(f),r.tipMarker||(e=this._showLengthTipMarker(i),this._length_tipmarker.push(e),r.tipMarker=e);this._showResultLength(i)}else if(this._drawType=="area"){for(i=[],t=0;t<u.length;t++)r=u[t],f=r.getLatLng(),i.push(f);this._showResultArea(i)}},_map_draw_createdHndler:function(n){var t=n.layer,r,i;t.type=n.layerType;this.layerDraw.addLayer(t);n.layerType=="polyline"?(i=t.getLatLngs(),this._showResultLength(i),r=this._length_tipmarker[this._length_tipmarker.length-1],r._isend=!0,r._icon.innerHTML=""+r._icon.innerHTML,t.tipMarker=this._length_tipmarker):n.layerType=="polygon"&&(i=t.getLatLngs()[0],this._showResultArea(i),this._showAreaTipMarker(t));this._drawParams&&this._drawParams.drawend&&this._drawParams.drawend()},_map_dblclickHndler:function(n){L.DomEvent.stopPropagation(n);this.polygonControl._enabled&&this.polygonControl._finishShape&&this.polygonControl._finishShape()},_map_draw_drawing:function(n){var i=n.layer,r=n.latlng,t;if(i instanceof L.Polyline){if(t=i.getLatLngs().concat([r]),t.length<2)return;this._drawType=="length"?this._showResultLength(t):this._showResultArea(t)}},_formatLength:function(n,t){var i="";t==null&&(t=this._drawParams&&this._drawParams.unit?typeof this._drawParams.unit=="function"?this._drawParams.unit():this._drawParams.unit:n<1e3?"m":"km");t=="auto"&&(t=n<1e3?"m":"km");switch(t){default:case"m":i=n.toFixed(0)+" ";break;case"km":i=(n*.001).toFixed(2)+" ";break;case"mile":i=(n*.00054).toFixed(2)+" ";break;case"zhang":i=(n*.3).toFixed(2)+" "}return i},_length_tipmarker:[],_showLengthTipMarker:function(n){var t,r,u,i;return n.length==1?t="":(r=L.mars.measure.length(n),t=this._formatLength(r),n.length>2&&(u=L.mars.measure.length([n[n.length-1],n[n.length-2]]),t+="<br>(+"+this._formatLength(u)+")")),i=L.marker(n[n.length-1],{icon:L.divIcon({className:"leaflet-measuretool-result",html:t,iconSize:[null,null],iconAnchor:[-20,12]})}).addTo(this.layerResult),i._length=r,i._length2D=u,i},updateLengthUnit:function(n){for(var i,r,t,u,e=this.layerDraw.getLayers(),f=0;f<e.length;f++)if(i=e[f],i.type=="polyline")for(r=0;r<i.tipMarker.length;r++)(t=i.tipMarker[r],t._length!=null)&&(u=this._formatLength(t._length,n),t._length2D&&(u+="<br>(+"+this._formatLength(t._length2D,n)+")"),t._icon.innerHTML=t._isend?""+u:u)},_last_length_val:0,_showResultLength:function(n){this._last_length_val=L.mars.measure.length(n);var t=this._formatLength(this._last_length_val);this._drawParams&&this._drawParams.showResult&&typeof this._drawParams.showResult=="function"&&this._drawParams.showResult(t,this._last_length_val)},_formatArea:function(n,t){var i="";t==null&&(t=this._drawParams&&this._drawParams.unit?typeof this._drawParams.unit=="function"?this._drawParams.unit():this._drawParams.unit:n<1e6?"m":"km");t=="auto"&&(t=n<1e6?"m":"km");switch(t){default:case"m":i=n.toFixed(0)+" ";break;case"km":i=(n/1e6).toFixed(2)+" ";break;case"mu":i=(n*.0015).toFixed(2)+" ";break;case"ha":i=(n*.0001).toFixed(2)+" "}return i},_showAreaTipMarker:function(n){var r=n.getCenter(),i=this._formatArea(this._last_area_val),t=L.marker(r,{icon:L.divIcon({className:"leaflet-measuretool-result",html:i,iconSize:[null,25],iconAnchor:[i.length*5,12]})}).addTo(this.layerResult);return t._area=this._last_area_val,n.tipMarker=t,t},updateAreaUnit:function(n){for(var i,r,f,u=this.layerDraw.getLayers(),t=0;t<u.length;t++)(i=u[t],i.type=="polygon")&&(r=i.tipMarker,f=this._formatArea(r._area,n),r._icon.innerHTML=f)},_last_area_val:0,_showResultArea:function(n){this._last_area_val=L.mars.measure.area(n);var t=this._formatArea(this._last_area_val);this._drawParams&&this._drawParams.showResult&&typeof this._drawParams.showResult=="function"&&this._drawParams.showResult(t,this._last_area_val)}});t["default"]=i},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=L.Class.extend({map:null,options:{},config:{},path:"",isActivate:!1,isCreate:!1,initialize:function(n,t){this.map=t;this.config=n;this.path=n.path||"";this.init()},addCacheVersion:function(n){if(n==null)return n;var t=L.widget.getCacheVersion();return t&&(n.indexOf("?")==-1?n+="?time="+t:n.indexOf("time="+t)==-1&&(n+="&time="+t)),n},activateBase:function(){var n,i,f,r,t,u;if(this.beforeActivate(),n=this,this.isActivate){this.changeWidgetView(function(n){n._dom&&($(".layui-layer").each(function(){$(this).css("z-index",19891e3)}),$(n._dom).css("z-index",19891014))});this.disable();this._startActivate();return}if(this.isActivate=!0,!this.isCreate){if(this.options.resources&&this.options.resources.length>0){for(i=[],f=(new Date).getTime(),L.widget._resources_cache=L.widget._resources_cache||[],r=0;r<this.options.resources.length;r++)(t=this.options.resources[r],t=this._getUrl(t),L.widget._resources_cache.indexOf(t)==-1)&&i.push(t);L.widget._resources_cache=L.widget._resources_cache.concat(i);Loader.async(i,function(){var t=n.create(function(){n._createWidgetView();n.isCreate=!0});if(!t){if(n.config.createAtStart){n.config.createAtStart=!1;n.isActivate=!1;n.isCreate=!0;return}n._createWidgetView();n.isCreate=!0}});return}if(u=this.create(function(){n._createWidgetView();this.isCreate=!0}),u)return;if(n.config.createAtStart){n.config.createAtStart=!1;n.isActivate=!1;n.isCreate=!0;return}this.isCreate=!0}return this._createWidgetView(),this},_createWidgetView:function(){var n=this.options.view,t;if(n===undefined||n===null)this._startActivate();else if(L.Util.isArray(n))for(this._viewcreate_allcount=n.length,this._viewcreate_okcount=0,t=0;t<n.length;t++)this.createItemView(n[t]);else this._viewcreate_allcount=1,this._viewcreate_okcount=0,this.createItemView(n)},changeWidgetView:function(n){var t=this.options.view,i,r;if(t===undefined||t===null)return!1;if(L.Util.isArray(t)){for(i=!1,r=0;r<t.length;r++)i=i||n(t[r]);return i}return n(t)},createItemView:function(n){switch(n.type){default:case"window":this._openWindow(n);break;case"divwindow":this._openDivWindow(n);break;case"append":this._appendView(n);break;case"custom":var i=this._getUrl(n.url),t=this;n.open(i,function(i){t.winCreateOK(n,i);t._viewcreate_okcount++;t._viewcreate_okcount>=t._viewcreate_allcount&&t._startActivate(i)},this)}},_viewcreate_allcount:0,_viewcreate_okcount:0,_openWindow:function(n){var t=this,i=this._getUrl(n.url),r={type:2,content:[i,"no"],success:function(r){n._dom=r;var u=window[r.find("iframe")[0].name];t.config.hasOwnProperty("visible")&&!t.config.visible&&$(r).hide();layer.setTop(r);t.winCreateOK(n,u);t._viewcreate_okcount++;t._viewcreate_okcount>=t._viewcreate_allcount&&t._startActivate(r);u&&u.initWidgetView?u.initWidgetView(t):console.error(""+i+"function initWidgetView(widget)widget!")}};n._layerIdx=layer.open(this._getWinOpt(n,r))},_openDivWindow:function(n){var i=this._getUrl(n.url),t=this;this.getHtml(i,function(i){var r={type:1,content:i,success:function(i){n._dom=i;t.config.hasOwnProperty("visible")&&!t.config.visible&&$(i).hide();layer.setTop(i);t.winCreateOK(n,i);t._viewcreate_okcount++;t._viewcreate_okcount>=t._viewcreate_allcount&&t._startActivate(i)}};n._layerIdx=layer.open(t._getWinOpt(n,r))})},_getUrl:function(n){return n=this.addCacheVersion(n),n.startsWith("/")||n.startsWith(".")||n.startsWith("http")?n:this.path+n},_getWinOpt:function(n,t){var f=L.widget.getDefWindowOptions(),i=$.extend(f,n.windowOptions);i=$.extend(i,this.config.windowOptions);n.windowOptions=i;var r=this,u=this._getWinSize(i),e={title:i.noTitle?!1:this.config.name||" ",area:u.area,offset:u.offset,shade:0,maxmin:!1,zIndex:layer.zIndex,end:function(){n._layerIdx=-1;r.disableBase()},full:function(n){r.winFull(n)},min:function(n){r.winMin(n)},restore:function(n){r.winRestore(n)}},o=$.extend(e,i);return $.extend(o,t||{})},_getWinSize:function(n){var u=n.width,f=n.height,e="",t=n.position,i,r,o;if(t)if(typeof t=="string")e=t;else if(typeof t=="object"){if(t.hasOwnProperty("top")&&t.top!=null&&(i=t.top),t.hasOwnProperty("bottom")&&t.bottom!=null&&(n._hasresize=!0,i=document.documentElement.clientHeight-f-t.bottom,t.hasOwnProperty("top"))){
//!viewopt.hasOwnProperty("height") && 
i=t.top;f=document.documentElement.clientHeight-i-t.bottom}if(t.hasOwnProperty("left")&&t.left!=null&&(r=t.left),t.hasOwnProperty("right")&&t.right!=null&&(n._hasresize=!0,r=document.documentElement.clientWidth-u-t.right,t.hasOwnProperty("left"))){
//!viewopt.hasOwnProperty("width") && 
r=t.left;u=document.documentElement.clientWidth-r-t.right}i==null&&(i=(document.documentElement.clientHeight-f)/2);r==null&&(r=(document.documentElement.clientWidth-u)/2);e=[i+"px",r+"px"]}return o=u&&f?[u+"px",f+"px"]:u+"px",{area:o,offset:e}},_appendView:function(n){if(this.isCreate&&n._dom)$(n._dom).show({duration:500}),this._startActivate(n._dom);else{var i=this._getUrl(n.url),t=this;t.getHtml(i,function(i){n._dom=$(i).appendTo(n.parent||"body");t.winCreateOK(n,i);t._viewcreate_okcount++;t._viewcreate_okcount>=t._viewcreate_allcount&&t._startActivate(i)})}},disableBase:function(){if(this.isActivate){var n=this.changeWidgetView(function(n){return n._layerIdx!=null&&n._layerIdx!=-1?(layer.close(n._layerIdx),n._layerIdx=-1,!0):(n.type=="append"&&n._dom&&$(n._dom).hide({duration:1e3}),n.type=="custom"&&n.close&&n.close(),!1)});n||(this.disable(),this.isActivate=!1)}},indexResize:function(){var n=this;this.changeWidgetView(function(t){if(t._layerIdx!=null&&t._layerIdx!=-1&&t.windowOptions!=null&&t.windowOptions._hasresize){var i=n._getWinSize(t.windowOptions),r={width:i.area[0],height:i.area[1],top:i.offset[0],left:i.offset[1]};$(t._dom).attr("myTopLeft",!0);layer.style(t._layerIdx,r);t.type=="divwindow"&&layer.iframeAuto(t._layerIdx)}})},_startActivate:function(n){this.activate(n);this.config.success&&this.config.success(this)},init:function(){},create:function(){},beforeActivate:function(){},activate:function(){},disable:function(){},winCreateOK:function(){},winFull:function(){},winMin:function(){},winRestore:function(){},getHtml:function(n,t){$.ajax({url:n,type:"GET",dataType:"html",timeout:0,success:function(n){t(n)}})}});t["default"]=i},function(){(function(n,t){"use strict";function r(n){return n.readyState==="complete"||n.readyState==="loaded"}function l(n,r,u){var e=t.createElement("link");e.rel="stylesheet";f(e,u,"css");e.async=!0;e.href=n;i.appendChild(e)}function a(n,r,u){var e=t.createElement("script");e.charset="utf-8";f(e,u,"js");e.async=!r.sync;e.src=n;i.appendChild(e)}function u(n,t){var i;n.sheet&&(i=!0);setTimeout(function(){i?t():u(n,t)},20)}function f(n,t,i){function f(){n.onload=n.onreadystatechange=null;n=null;t()}var e="onload"in n,o=i==="css";if(o&&(c||!e)){setTimeout(function(){u(n,t)},1);return}e?(n.onload=f,n.onerror=function(){n.onerror=null;i=="css"?console.error("css"+n.href):console.error("js"+n.src);f()}):n.onreadystatechange=function(){r(n)&&f()}}function v(n,t,i,r){function u(){var i=t.indexOf(n);i>-1&&t.splice(i,1);t.length===0&&r()}if(!n){setTimeout(function(){u()});return}h.test(n)?l(n,i,u):a(n,i,u)}function e(n,t,i){var u=function(){i&&i()},r,f;if(n=Array.prototype.slice.call(n||[]),n.length===0){u();return}for(r=0,f=n.length;r<f;r++)v(n[r],n,t,u)}function o(t,i){if(r(t))i();else{var u=!1;n.addEventListener("load",function(){u||(i(),u=!0)});setTimeout(function(){u||(i(),u=!0)},1500)}}var h=new RegExp("\\.css"),i=t.head||t.getElementsByTagName("head")[0],c=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536,s={async:function(n,i){o(t,function(){e(n,{},i)})},sync:function(n,i){o(t,function(){e(n,{sync:!0},i)})}};return n.Loader=s,s})(window,document)},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function c(r,h,c){var v,w,b,y,p,a,l;if(e=r,h=h||{},f=c||"",n=[],u=h.defaultOptions||{windowOptions:{position:"rt",maxmin:!1,resize:!0},autoDisable:!0,disableOhter:!0},i=h.version,i=="time"&&(i=(new Date).getTime()),v=h.widgetsAtStart,v&&v.length>0)for(a=0;a<v.length;a++){if(l=v[a],!l.hasOwnProperty("uri")||l.uri==""){console.log("widgeturi"+JSON.stringify(l));continue}(!l.hasOwnProperty("visible")||l.visible)&&(l.autoDisable=!1,l.openAtStart=!0,l._nodebug=!0,o(l),n.push(l))}if(w=h["debugger"],w&&(p='<div id="widget-testbar" class="widgetbar  animation-slide-bottom no-print-view" >      <div style="height: 30px; line-height:30px;"><b style="color: #4db3ff;">widget<\/b>&nbsp;&nbsp;<button type="button" onclick="L.widget.removeDebugeBar();" class="btn btn-link btn-xs"><\/button> <\/div>     <button type="button" class="btn btn-info"  onclick="L.widget.disableAll()" ><i class="fa fa-globe"><\/i><\/button><\/div>',$("body").append(p)),v=h.widgets,v&&v.length>0)for(a=0;a<v.length;a++)if(l=v[a],l.type=="group"){for(p=' <div class="btn-group dropup">  <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-align-justify"><\/i>'+l.name+' <span class="caret"><\/span><\/button> <ul class="dropdown-menu">',b=0;b<l.children.length;b++){if(y=l.children[b],o(y),p+=" <li onclick=\"L.widget.activate('"+y.uri+"',"+(y.disableOhter?!1:!0)+')" ><a href="#"><i class="fa fa-star"><\/i>'+y.name+"<\/a><\/li>",!y.hasOwnProperty("uri")||y.uri==""){console.log("widgeturi"+JSON.stringify(y));continue}n.push(y)}p+="<\/ul><\/div>";w&&!l._nodebug&&$("#widget-testbar").append(p)}else{if(o(l),w&&!l._nodebug&&(p='   <button type="button" class="btn btn-primary" onclick="L.widget.activate(\''+l.uri+"',"+(l.disableOhter?!1:!0)+')"  > <i class="fa fa-globe"><\/i>'+l.name+" <\/button>",$("#widget-testbar").append(p)),!l.hasOwnProperty("uri")||l.uri==""){console.log("widgeturi"+JSON.stringify(l));continue}n.push(l)}for(a=0;a<n.length;a++)l=n[a],(l.openAtStart||l.createAtStart)&&t.push(l);$(window).resize(function(){for(var i,t=0;t<n.length;t++)i=n[t],i._class&&i._class.indexResize()});s()}function p(){return l(u.windowOptions)}function l(n,t){if(n==null||typeof n!="object"||n.constructor!=Object&&n.constructor!=Array)return n;if(n.constructor==Date||n.constructor==RegExp||n.constructor==Function||n.constructor==String||n.constructor==Number||n.constructor==Boolean)return new n.constructor(n);t=t||new n.constructor;for(var i in n)t[i]=typeof t[i]=="undefined"?l(n[i],null):t[i];return t}function o(n){if(u)for(var t in u)t=="windowOptions"||n.hasOwnProperty(t)||(n[t]=u[t]);n.path=tt(f+n.uri);n.name=n.name||n.label}function w(i,r){var u,h,l,a,f;for(e==null&&i.map&&c(i.map),typeof i=="string"&&(i={uri:i},r!=null&&(i.disableOhter=!r)),f=0;f<n.length;f++)if(h=n[f],i.uri==h.uri||h.id&&i.uri==h.id){u=h;for(l in i)l!="uri"&&(u[l]=i[l]);break}if(u==null&&(o(i),u=i,n.push(i)),u.disableOhter&&y(u.uri),u._class)u._class.isActivate?u._class.update?u._class.update():(u._class.disableBase(),a=setInterval(function(){u._class.isActivate||(u._class.activateBase(),clearInterval(a))},200)):u._class.activateBase();else{for(f=0;f<t.length;f++)if(t[f].uri==u.uri)return t[f];t.push(u);t.length==1&&s()}return u}function a(t){for(var r,i=0;i<n.length;i++)if(r=n[i],t==r.uri||t==r.id)return r}function v(n){var t=a(n);return t?t._class:null}function b(n){var t=v(n);return t==null?!1:t.isActivate}function k(t){var r,i;if(t!=null)for(r=0;r<n.length;r++)if(i=n[r],i._class&&(t==i.uri||t==i.id)){i._class.disableBase();break}}function y(t){for(var i,r=0;r<n.length;r++)(i=n[r],i.autoDisable)&&(t&&(t==i.uri||t==i.id)||i._class&&i._class.disableBase())}function d(t){for(var r,i=0;i<n.length;i++)r=n[i],t(r)}function s(){if(t.length!=0){if(h){setTimeout(s,500);return}h=!0;r=t[0];var n=r.uri;i&&(n+=n.indexOf("?")==-1?"?time="+i:"&time="+i);window.NProgress&&NProgress.start();Loader.async([f+n],function(){h=!1;window.NProgress&&NProgress.done(!0);t.shift();s()})}}function g(t){var f,u,i;if(r==null){for(f=nt(),u=0;u<n.length;u++)if(i=n[u],f.endsWith(i.uri))return i._class=new t(i,e),i._class.activateBase(),i._class}else return r._class=new t(r,e),r._class.activateBase(),r._class}function nt(){for(var n,i=document.scripts,t=i.length-1;t>=0;t--)if((n=i[t].src,n!=null&&n!="")&&n.indexOf("widgets")!=-1)return n;return""}function tt(n){var t=n.lastIndexOf("/");return n.substring(0,t+1)}function it(){$("#widget-testbar").remove()}function rt(){return i}function ut(){return f}var i,u,n=[],f="",e,t=[],r,h;return{init:c,isActivate:b,activate:w,disable:k,disableAll:y,eachWidget:d,getWidget:a,getClass:v,removeDebugeBar:it,bindClass:g,getDefWindowOptions:p,getCacheVersion:rt,getBasePath:ut}}();t["default"]=i},function(n,t,i){n.exports=i(33)}])